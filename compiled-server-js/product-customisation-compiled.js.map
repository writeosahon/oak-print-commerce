{"version":3,"sources":["product-customisation.js"],"names":[],"mappings":";;AAEA,IAAI,yBAAyB,EAA7B,C,CAAkC;;;AAGlC;AACA,OAAO,gBAAP,CAAwB,SAAxB,EAAmC,6BAAnC,EAAkE,KAAlE;;AAEA;AACA,OAAO,QAAP,EAAiB,KAAjB,CAAuB,YAAU;;AAE7B;AACA,QAAG,WAAW,OAAO,MAArB,EAA4B;AAAE;AAC1B;AACA,eAAO,MAAP,EAAe,QAAf,CAAwB,uBAAxB;;AAEA;AACA,iCAAyB,QAAQ,UAAR,EAAzB;AACH;;AAED;AACA,QAAG,OAAO,MAAP,EAAe,QAAf,CAAwB,uBAAxB,MAAqD,IAAxD,EAA6D;AAAE;;AAE3D;AACA,eAAO,YAAP,EAAqB,SAArB,CAA+B,CAA/B;;AAEA;AACA,eAAO,MAAP,CAAc,WAAd,CAA0B,YAA1B,EAAwC,GAAxC;;AAEA;AACA,eAAO,UAAP,CAAkB,uBAAlB,EAA2C,CAA3C;AACA;AACH;AACJ,CAxBD;;AA0BA;;;;;;AAMA,SAAS,6BAAT,CAAuC,YAAvC,EAAoD,CACnD;;AAGD;;;;;AAKA,SAAS,uBAAT,GAAkC;;AAE9B;AACA,WAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAAyB;AACxC,gBAAQ,OAAR,CAAgB,OAAO,IAAP,CACZ;AACI,iBAAK,iDADT;AAEI,kBAAM,KAFV;AAGI,yBAAa,kBAHjB;AAII,yBAAa,IAJjB;AAKI,uBAAW;AACP,iCAAiB;AADV,aALf;AAQI,sBAAU,MARd;AASI,qBAAS,MATb,EASqB;AACjB,yBAAa;AAVjB,SADY,CAAhB,EAcA,IAdA,CAcK,UAAS,UAAT,EAAoB;AACrB;AACA,mBAAO,MAAP,CAAc,WAAd,CAA0B,KAAK,SAAL,CAAe,UAAf,CAA1B,EAAsD,GAAtD;AAEH,SAlBD,EAmBA,KAnBA,CAmBM,UAAS,GAAT,EAAa;AACf,oBAAQ,GAAR,CAAY,cAAZ,EAA4B,GAA5B;AACH,SArBD;AAsBH,KAvBM,CAAP;AAwBH;;AAED;;;;AAIA,SAAS,uBAAT,GAAkC;AAC9B;AACA,WAAO,oDAAP,EAA6D,GAA7D,CAAiE,CAAjE,EAAoE,KAApE;AACH;;AAGD;;;;AAIA,SAAS,0BAAT,GAAqC;;AAEjC;AACA,QAAI,eAAe,uBAAuB,GAAvB,EAAnB;;AAEA;AACA,SAAI,IAAI,IAAR,IAAgB,YAAhB,EAA6B;AACzB,+BAAuB,MAAvB,CAA8B,IAA9B,EADyB,CACY;AACxC;;AAED;AACA,WAAO,YAAP,CAAoB,KAApB;;AAEA;AACA,WAAO,cAAP,CAAsB,KAAtB;AACH","file":"product-customisation-compiled.js","sourcesContent":["\r\n\r\nvar utopiasoftware_Cookies = {};  // holds the Global cookie object for the js-cookie library\r\n\r\n\r\n// register a listener for receiving messages from the mobile app\r\nwindow.addEventListener(\"message\", utopiasoftware_receiveMessage, false);\r\n\r\n// wait for the entire document to be loaded\r\njQuery(document).ready(function(){\r\n\r\n    // check if the site is being accessed from an iframe\r\n    if(window !== window.parent){ // page is being accessed from an iframe\r\n        // add the utopiasoftware-mobile class to the HTML tag\r\n        jQuery('html').addClass(\"utopiasoftware-mobile\");\r\n\r\n        // set the use of the Cookie library\r\n        utopiasoftware_Cookies = Cookies.noConflict();\r\n    }\r\n\r\n    // check if the utopiasoftware-mobile class is set\r\n    if(jQuery('html').hasClass('utopiasoftware-mobile') === true){ // class has been set\r\n\r\n        // scroll the window to the top\r\n        jQuery('html, body').scrollTop(0);\r\n\r\n        // post message to app that site is loaded\r\n        window.parent.postMessage(\"page ready\", \"*\");\r\n\r\n        // check the user cart in a different event block\r\n        window.setTimeout(utopiasoftware_getUsage, 0);\r\n        return\r\n    }\r\n});\r\n\r\n/**\r\n * method is used to handle the receipt of messages from the mobile app\r\n *\r\n * @param receiveEvent {Event} this is the event object of the \"Message\" event\r\n *\r\n */\r\nfunction utopiasoftware_receiveMessage(receiveEvent){\r\n}\r\n\r\n\r\n/**\r\n * method is used to get the currently logged in user's cart\r\n *\r\n * @returns {Promise<any>}\r\n */\r\nfunction utopiasoftware_getUsage(){\r\n\r\n    // return a Promise object which resolves when the process of setting usage is done\r\n    return new Promise(function(resolve, reject){\r\n        Promise.resolve(jQuery.ajax(\r\n            {\r\n                url: \"https://shopoakexclusive.com/wp-json/wc/v2/cart\",\r\n                type: \"get\",\r\n                contentType: \"application/json\",\r\n                crossDomain: true,\r\n                xhrFields: {\r\n                    withCredentials: true\r\n                },\r\n                dataType: \"json\",\r\n                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                processData: false\r\n            }\r\n        )).\r\n        then(function(serverData){\r\n            // post message to mobile app containing the current cart in session\r\n            window.parent.postMessage(JSON.stringify(serverData), \"*\");\r\n\r\n        }).\r\n        catch(function(err){\r\n            console.log(\"SERVER ERROR\", err);\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n *\r\n * method is used to add the ('presently') current product being customised to the available cart\r\n */\r\nfunction utopiasoftware_addUsage(){\r\n    // trigger the submission of the customisation form by triggering a click on the submit button\r\n    jQuery('.variations_form.cart button[type=\"submit\"].button').get(0).click();\r\n}\r\n\r\n\r\n/**\r\n * method is used to remove all cookies, local storage and\r\n * sessions storage used to keep access to the user's cart. i.e. it is used to clear the user's cart\r\n */\r\nfunction utopiasoftware_removeUsage(){\r\n\r\n    // get all the cookies created by this site\r\n    var localCookies = utopiasoftware_Cookies.get();\r\n\r\n    // remove each cookie using a for-loop\r\n    for(let item in localCookies){\r\n        utopiasoftware_Cookies.remove(item); // remove the cookie\r\n    }\r\n\r\n    // remove the localStorage data\r\n    window.localStorage.clear();\r\n\r\n    // remove the sessionStorage data\r\n    window.sessionStorage.clear();\r\n}"]}