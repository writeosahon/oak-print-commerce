{"version":3,"sources":["product-customisation.js"],"names":[],"mappings":"aAEA,OAAO,gBAAP,CAAwB,SAAxB,CAAmC,6BAAnC,I,CAGA,OAAO,QAAP,EAAiB,KAAjB,CAAuB,UAAU,CAS7B,GANG,SAAW,OAAO,MAMrB,EAJI,OAAO,MAAP,EAAe,QAAf,CAAwB,uBAAxB,CAIJ,CAAG,YAAO,MAAP,EAAe,QAAf,CAAwB,uBAAxB,CAAH,CAGI,WADA,QAAO,MAAP,CAAc,WAAd,CAA0B,YAA1B,CAAwC,GAAxC,CAGP,CAdD,C,CAsBA,QAAS,8BAAT,EAAoD,CACnD,CAUD,QAAS,wBAAT,CAAiC,CAAjC,CAA0C,CAGtC,MAAO,IAAI,QAAJ,CAAY,SAAS,CAAT,CAAyB,CACxC,QAAQ,OAAR,CAAgB,EAAE,IAAF,CACZ,CACI,IAAK,qDADT,CAEI,KAAM,MAFV,CAGI,YAAa,kBAHjB,CAII,WAAY,WAAS,CAAT,CAAgB,CACxB,EAAM,gBAAN,CAAuB,eAAvB,CAAwC,SAAW,CAAnD,CACH,CANL,CAOI,cAPJ,CAQI,UAAW,CACP,kBADO,CARf,CAWI,SAAU,MAXd,CAYI,QAAS,IAZb,CAaI,cAbJ,CAcI,KAAM,KAAK,SAAL,CAAe,EAAf,CAdV,CADY,CAAhB,EAkBA,IAlBA,CAkBK,SAAS,CAAT,CAAoB,CACrB,EAAQ,CAAR,CADqB,CAGrB,OAAO,UAAP,CAAkB,UAAU,CACxB,OAAO,QAAP,CAAgB,MAAhB,IACH,CAFD,CAEG,CAFH,CAGH,CAxBD,EAyBA,KAzBA,CAyBM,SAAS,CAAT,CAAa,CAEf,OAAO,UAAP,CAAkB,UAAU,CACxB,OAAO,QAAP,CAAgB,MAAhB,IACH,CAFD,CAEG,CAFH,CAFe,CAKf,EAAQ,CAAR,CAKH,CAnCD,CAoCH,CArCM,CAsCV","file":"product-customisation-compiled.js","sourcesContent":["\r\n// register a listener for receiving messages from the mobile app\r\nwindow.addEventListener(\"message\", utopiasoftware_receiveMessage, false);\r\n\r\n// wait for the entire document to be loaded\r\njQuery(document).ready(function(){\r\n\r\n    // check if the site is being accessed from an iframe\r\n    if(window !== window.parent){ // page is being accessed from an iframe\r\n        // add the utopiasoftware-mobile class to the HTML tag\r\n        jQuery('html').addClass(\"utopiasoftware-mobile\");\r\n    }\r\n\r\n    // check if the utopiasoftware-mobile class is set\r\n    if(jQuery('html').hasClass('utopiasoftware-mobile') === true){ // class has been set\r\n        // post message to app that site is loaded\r\n        window.parent.postMessage(\"page ready\", \"*\");\r\n        return\r\n    }\r\n});\r\n\r\n/**\r\n * method is used to handle the receipt of messages from the mobile app\r\n *\r\n * @param receiveEvent {Event} this is the event object of the \"Message\" event\r\n *\r\n */\r\nfunction utopiasoftware_receiveMessage(receiveEvent){\r\n}\r\n\r\n\r\n/**\r\n * method is used to set the currently logged in user\r\n *\r\n * @param usageKey {String} authorisation key for the current user\r\n *\r\n * @returns {Promise<any>}\r\n */\r\nfunction utopiasoftware_setUsage(usageKey){\r\n\r\n    // return a Promise object which resolves when the process of setting usage is done\r\n    return new Promise(function(resolve, reject){\r\n        Promise.resolve($.ajax(\r\n            {\r\n                url: \"https://shopoakexclusive.com/wp-json/wc/v2/cart/add\",\r\n                type: \"post\",\r\n                contentType: \"application/json\",\r\n                beforeSend: function(jqxhr) {\r\n                    jqxhr.setRequestHeader(\"Authorization\", \"Basic \" + usageKey);\r\n                },\r\n                crossDomain: true,\r\n                xhrFields: {\r\n                    withCredentials: true\r\n                },\r\n                dataType: \"json\",\r\n                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                processData: false,\r\n                data: JSON.stringify({})\r\n            }\r\n        )).\r\n        then(function(serverData){\r\n            resolve(serverData);\r\n\r\n            window.setTimeout(function(){\r\n                window.location.reload(true);\r\n            }, 0);\r\n        }).\r\n        catch(function(err){\r\n\r\n            window.setTimeout(function(){\r\n                window.location.reload(true);\r\n            }, 0);\r\n            resolve(err);\r\n\r\n            /*window.setTimeout(function(){\r\n                window.location.reload(true);\r\n            }, 0);*/\r\n        });\r\n    });\r\n}"]}