'use strict';var _slicedToArray=function(){function e(e,a){var t=[],o=!0,r=!1,s=void 0;try{for(var p,n=e[Symbol.iterator]();!(o=(p=n.next()).done)&&(t.push(p.value),!(a&&t.length===a));o=!0);}catch(e){r=!0,s=e}finally{try{!o&&n['return']&&n['return']()}finally{if(r)throw s}}return t}return function(a,t){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,t);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function _asyncToGenerator(e){return function(){var a=e.apply(this,arguments);return new Promise(function(e,t){function o(r,s){try{var p=a[r](s),n=p.value}catch(e){return void t(e)}return p.done?void e(n):Promise.resolve(n).then(function(e){o('next',e)},function(e){o('throw',e)})}return o('next')})}}utopiasoftware[utopiasoftware_app_namespace].controller={startup:function e(){ons.ready(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ons.setDefaultDeviceBackButtonListener(function(){}),$('#search-page-search-input-popover').get(0).onDeviceBackButton.disable(),$('#loader-modal-message').html('Loading App...'),$('#loader-modal').get(0).show(),new ej.notifications.Toast({content:'',cssClass:'default-ej2-toast',target:document.body,position:{X:'Center',Y:'Bottom'},width:'100%',timeOut:0,extendedTimeout:0,showCloseButton:!0}).appendTo($('.page-toast').get(0)),new ej.notifications.Toast({content:'',cssClass:'default-ej2-toast',target:document.body,position:{X:'Center',Y:'Bottom'},width:'100%',timeOut:4e3,extendedTimeout:0,showCloseButton:!0}).appendTo($('.timed-page-toast').get(0));try{screen.orientation.lock('portrait')}catch(e){}return e.prev=7,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase=new PouchDB('PrintServiceEcommerce.db',{adapter:'cordova-sqlite',location:'default',androidDatabaseImplementation:2}),utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase=new PouchDB('PrintServiceEcommerceEncrypted.db',{adapter:'cordova-sqlite',location:'default',androidDatabaseImplementation:2}),a=null,e.prev=11,e.next=14,new Promise(function(e,a){NativeStorage.getItem('utopiasoftware-oak-print-service-secure-key',e,a)});case 14:a=e.sent,e.next=22;break;case 17:return e.prev=17,e.t0=e['catch'](11),e.next=21,new Promise(function(e,a){NativeStorage.setItem('utopiasoftware-oak-print-service-secure-key',{password:Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},e,a)});case 21:a=e.sent;case 22:return e.next=24,new Promise(function(e,t){utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.crypto(a.password,{ignore:['_attachments','_deleted'],cb:function r(a,o){a?t(a):e(o)}})});case 24:return e.prev=24,e.next=27,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 27:utopiasoftware[utopiasoftware_app_namespace].model.cartCount=e.sent.cart.length,e.next=32;break;case 30:e.prev=30,e.t1=e['catch'](24);case 32:utopiasoftware[utopiasoftware_app_namespace].controller.appDatabaseChangesListenerViewModel.changesEventEmitter=utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.changes({live:!0,include_docs:!0,since:'now',doc_ids:['user-cart']}).on('change',utopiasoftware[utopiasoftware_app_namespace].controller.appDatabaseChangesListenerViewModel.userCartChanged),e.next=38;break;case 35:e.prev=35,e.t2=e['catch'](7),console.log('APP LOADING ERROR',e.t2);case 38:return e.prev=38,$('ons-splitter').get(0).content.load('app-main-template'),StatusBar.backgroundColorByHexString('#363E7C'),navigator.splashscreen.hide(),utopiasoftware[utopiasoftware_app_namespace].model.isAppReady=!0,e.finish(38);case 44:case'end':return e.stop();}},e,this,[[7,35,38,44],[11,17],[24,30]])})))},appDatabaseChangesListenerViewModel:{changesEventEmitter:null,userCartChanged:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].model.cartCount=!0===a.deleted?0:a.doc.cart.length,$('.cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},homePageViewModel:{newProductsCarousel:null,featuredProductsCarousel:null,salesProductsCarousel:null,pageInit:function o(e){var a=function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(){var r,s,p,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){o.next=3;break}return setTimeout(a,500),o.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked,$('#home-page-pull-hook',t).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction,$('#home-page-pull-hook',t).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),o.prev=6,r=new Flickity($('#home-page #home-latest-design-block .row').get(0),{wrapAround:!0,groupCells:1,imagesLoaded:!0,cellSelector:'.col-xs-12',autoPlay:5e3,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'left',contain:!1,prevNextButtons:!1,pageDots:!1}),r.on('scroll',function(){r._utopiasoftware_scrollTimer&&(window.clearTimeout(r._utopiasoftware_scrollTimer),r._utopiasoftware_scrollTimer=null),r._utopiasoftware_scrollTimer=window.setTimeout(function(){r.playPlayer()},0)}),r.on('staticClick',function(e,a,t){}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel=r,s=new Flickity($('#home-page #home-featured-design-block .row').get(0),{wrapAround:!0,groupCells:1,cellSelector:'.col-xs-7',autoPlay:4e3,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'center',contain:!1,prevNextButtons:!1,pageDots:!1}),s.on('scroll',function(){s._utopiasoftware_scrollTimer&&(window.clearTimeout(s._utopiasoftware_scrollTimer),s._utopiasoftware_scrollTimer=null),s._utopiasoftware_scrollTimer=window.setTimeout(function(){s.playPlayer()},0)}),s.on('staticClick',function(e,a,t){t&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.productItemClicked(window.parseInt($(t).attr('data-product')),$(t).attr('data-segment'))}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel=s,p=new Flickity($('#home-page #home-sales-design-block .row').get(0),{wrapAround:!0,groupCells:1,cellSelector:'.col-xs-7',autoPlay:4500,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'center',contain:!1,prevNextButtons:!1,pageDots:!1}),p.on('scroll',function(){p._utopiasoftware_scrollTimer&&(window.clearTimeout(p._utopiasoftware_scrollTimer),p._utopiasoftware_scrollTimer=null),p._utopiasoftware_scrollTimer=window.setTimeout(function(){p.playPlayer()},0)}),p.on('staticClick',function(e,a,t){t&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.productItemClicked(window.parseInt($(t).attr('data-product')),$(t).attr('data-segment'))}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel=p,$('#loader-modal').get(0).hide(),$('#home-page .page-preloader').css('display','block'),o.next=23,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();case 23:$('#home-page .page-preloader').css('display','none'),o.next=34;break;case 26:o.prev=26,o.t0=o['catch'](6),$('.page-toast').get(0).ej2_instances[0].hide('All'),n=$('.page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',n.dataBind(),n.show();case 34:return o.prev=34,o.finish(34);case 36:case'end':return o.stop();}},o,this,[[6,26,34,36]])}));return function(){return o.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('OAK'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.reloadCells(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.reloadCells(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.reloadCells()},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.newProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.newProductsCarousel=null,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.featuredProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.featuredProductsCarousel=null,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.salesProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.salesProductsCarousel=null},backButtonClicked:function e(){ons.notification.confirm('Do you want to close the app?',{title:'<img src="css/app-images/oak-design-logo.png" style="height: 1.5em; width: auto; margin-right: 0.5em">Exit App',buttonLabels:['No','Yes'],modifier:'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}).then(function(e){1===e&&navigator.app.exitApp()})},deviceOfflineListener:function a(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see live products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#home-page #home-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();case 5:$('#home-page .page-preloader').css('display','none'),e.next=16;break;case 8:e.prev=8,e.t0=e['catch'](2),a=$('.page-toast').get(0).ej2_instances[0],a.hide('All'),a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 16:return e.prev=16,$('#home-page #home-page-pull-hook').removeAttr('disabled'),t(),e.finish(16);case 20:case'end':return e.stop();}},e,this,[[2,8,16,20]])}));return function a(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=Math.ceil,a=Math.abs,t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],navigator.connection.type===Connection.NONE?(r=$('.page-toast').get(0).ej2_instances[0],r.hide('All'),r.cssClass='default-ej2-toast',r.content='No Internet connection. Pull down to refresh and see live products',r.dataBind(),r.show(),o.push(new Promise(function(e,a){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('banner-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(a){$('#home-page #home-latest-design-block').css('opacity','1'),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.remove($('#home-page #home-latest-design-block .row .col-xs-12').get());for(var t,o=0;o<a.length;o++)t='<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="css/app-images/blank-img.png" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.append($('<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="css/app-images/blank-img.png" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>'));$('#home-page #home-latest-design-block').css('opacity','1'),e()}).catch(function(){$('#home-page #home-latest-design-block').css('opacity','1'),a()})})),o.push(new Promise(function(e,a){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('popular-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(a){0<a.length?($('#home-page #home-featured-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.remove($('#home-page #home-featured-design-block .row .col-xs-7').get())):$('#home-page #home-featured-design-block').css({opacity:'0',display:'none'});for(var t,o=0;o<a.length;o++)t='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                    data-product="'+o+'" data-segment="featured">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+a[o].images[0].src+'\');">\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+a[o].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(a[o].price),'n2')+'</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.append($(t));e()}).catch(function(){a()})})),o.push(new Promise(function(t,o){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('sales-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(o){0<o.length?($('#home-page #home-sales-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.remove($('#home-page #home-sales-design-block .row .col-xs-7').get())):$('#home-page #home-sales-design-block').css({opacity:'0',display:'none'});for(var r=0;r<o.length;r++){o[r].regular_price&&''!=o[r].regular_price||(o[r].regular_price='0.00');var s='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                  data-product="'+r+'" data-segment="sales">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+o[r].images[0].src+'\');">\n                                        <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+e(100*(a(kendo.parseFloat(o[r].price)-kendo.parseFloat(o[r].regular_price))/kendo.parseFloat('0.00'===o[r].regular_price?o[r].price:o[r].regular_price)))+'% OFF\n                                                    </span>\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+o[r].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center; text-decoration: line-through">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[r].regular_price),'n2')+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[r].price),'n2')+'\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>';utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.append($(s))}t()}).catch(function(){o()})}))):(o.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'private',type:'external',page:1,per_page:5}})).then(function(a){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'banner-products',docType:'BANNER_PRODUCTS',products:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),$('#home-page #home-latest-design-block').css('opacity','1'),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.remove($('#home-page #home-latest-design-block .row .col-xs-12').get());for(var t,o=0;o<a.length;o++)t='<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="'+a[o].images[0].src+'" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.append($(t));$('#home-page #home-latest-design-block').css('opacity','1'),e()}).catch(function(){$('#home-page #home-latest-design-block').css('opacity','1'),a()})})),o.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:5,featured:!0}})).then(function(a){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'popular-products',docType:'POPULAR_PRODUCTS',products:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),0<a.length?($('#home-page #home-featured-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.remove($('#home-page #home-featured-design-block .row .col-xs-7').get())):$('#home-page #home-featured-design-block').css({opacity:'0',display:'none'});for(var t,o=0;o<a.length;o++)t='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                 data-product="'+o+'" data-segment="featured">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+a[o].images[0].src+'\');">\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+a[o].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(a[o].price),'n2')+'</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.append($(t));e()}).catch(function(){a()})})),o.push(new Promise(function(t,o){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:5,on_sale:!0}})).then(function(o){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'sales-products',docType:'SALES_PRODUCTS',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),0<o.length?($('#home-page #home-sales-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.remove($('#home-page #home-sales-design-block .row .col-xs-7').get())):$('#home-page #home-sales-design-block').css({opacity:'0',display:'none'});for(var r=0;r<o.length;r++){o[r].regular_price&&''!=o[r].regular_price||(o[r].regular_price='0.00');var s='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                    data-product="'+r+'" data-segment="sales">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+o[r].images[0].src+'\');">\n                                        <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+e(100*(a(kendo.parseFloat(o[r].price)-kendo.parseFloat(o[r].regular_price))/kendo.parseFloat('0.00'===o[r].regular_price?o[r].price:o[r].regular_price)))+'% OFF\n                                                    </span>\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+o[r].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center; text-decoration: line-through">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[r].regular_price),'n2')+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[r].price),'n2')+'\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>';utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.append($(s))}t()}).catch(function(){o()})}))),t.abrupt('return',Promise.all(o));case 3:case'end':return t.stop();}},t,this)}));return function e(){return t.apply(this,arguments)}}(),showMoreFeaturedProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,featured:!0});case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',t.dataBind(),t.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),showMoreSalesProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,on_sale:!0});case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',t.dataBind(),t.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),productItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],e.prev=1,e.t0=t,e.next='featured'===e.t0?5:'sales'===e.t0?9:13;break;case 5:return e.next=7,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('popular-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 7:return o=e.sent.products,e.abrupt('break',13);case 9:return e.next=11,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('sales-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 11:return o=e.sent.products,e.abrupt('break',13);case 13:$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:o[a]}}),e.next=18;break;case 16:e.prev=16,e.t1=e['catch'](1);case 18:case'end':return e.stop();}},e,this,[[1,16]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},categoriesPageViewModel:{currentPage:0,pageSize:100,viewContentHeight:0,pageInit:function r(e){var a=Math.floor,t=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(){var s,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){r.next=3;break}return setTimeout(t,500),r.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked,$('#categories-page-pull-hook',o).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction,$('#categories-page-pull-hook',o).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight=a($('#categories-page .page__content').height()),$('#categories-page .page__content').on('scroll',function(){window.setTimeout(function(){var e=a($('#categories-page .page__content').scrollTop()),t=100*(e/utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight);50<=t?$('#categories-page #categories-page-scroll-top-fab').css({transform:'scale(1)',display:'inline-block'}):$('#categories-page #categories-page-scroll-top-fab').css({transform:'scale(0)'})},0)}),o.on('click','.e-card',function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function a(){var t,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return a.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,category:$(e.currentTarget).attr('data-category-id')});case 5:return t=a.sent,a.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(t[0]);case 8:a.next=18;break;case 10:a.prev=10,a.t0=a['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',o.dataBind(),o.show();case 18:return a.prev=18,$('#products-page .page-preloader').css('display','none'),a.finish(18);case 21:case'end':return a.stop();}},a,this,[[0,10,18,21]])})),0)}),r.prev=9,r.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();case 12:return s=r.sent,r.next=15,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(s[0]);case 15:r.next=25;break;case 17:r.prev=17,r.t0=r['catch'](9),$('.page-toast').get(0).ej2_instances[0].hide('All'),p=$('.page-toast').get(0).ej2_instances[0],p.cssClass='error-ej2-toast',p.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',p.dataBind(),p.show();case 25:return r.prev=25,$('#categories-page .page-preloader').css('display','none'),r.finish(25);case 28:case'end':return r.stop();}},r,this,[[9,17,25,28]])}));return function(){return r.apply(this,arguments)}}(),o=$(e.target);t()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('Products'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),$('#categories-page #categories-page-scroll-top-fab').css({display:'none'}),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(0)},deviceOfflineListener:function a(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see updated products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#categories-page #categories-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories(1,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pageSize);case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(a[0]);case 8:e.next=17;break;case 10:e.prev=10,e.t0=e['catch'](2),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred. Refresh to try again',t.dataBind(),t.show();case 17:return e.prev=17,$('#categories-page #categories-page-pull-hook').removeAttr('disabled'),o(),e.finish(17);case 21:case'end':return e.stop();}},e,this,[[2,10,17,21]])}));return function a(){return e.apply(this,arguments)}}(),loadCategories:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.currentPage+1,r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pageSize;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],navigator.connection.type===Connection.NONE?(t=$('.page-toast').get(0).ej2_instances[0],t.hide('All'),t.cssClass='default-ej2-toast',t.content='No Internet connection. Pull down to refresh and see updated products',t.dataBind(),t.show(),a.push(new Promise(function(e,a){var t=(''+o).padStart(7,'0')+'categories';Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(t,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(a){e(a.categories)}).catch(function(e){a(e)})}))):a.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products/categories',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'asc',orderby:'name',hide_empty:!0,page:o,per_page:r}})).then(function(a){if(0<a.length){a=a.filter(function(e){return'uncategorized'!==e.slug});var t=(''+o).padStart(7,'0')+'categories';utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:t,docType:'PRODUCT_CATEGORIES',categories:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.currentPage=o}e(a)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(a));case 3:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t,o=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],r=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(e){var t='';if(0>=a.length)e(a.length);else{for(var s=0;s<a.length;s++)t+='<div class="col-xs-4" ',t+=0==(s+1)%3?'style="border-bottom: 1px lightgray solid">':'style="border-right: 1px lightgray solid; border-bottom: 1px lightgray solid">',t+='\n                        <ons-ripple background="rgba(63, 81, 181, 0.3)"></ons-ripple>\n                        <div class="e-card" data-category-id="'+a[s].id+'">\n                            <div class="e-card-image" style="min-height: 100px; \n                            background-image: url(\''+a[s].image.src+'\');">\n                            </div>\n                            <div class="e-card-header">\n                                <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                                    <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                        '+a[s].name+'\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                      </div>';!0===r?$('#categories-page #categories-contents-container').html(t):!0===o?$('#categories-page #categories-contents-container').append(t):$('#categories-page #categories-contents-container').prepend(t),e(a.length)}}),e.abrupt('return',t);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),scrollPageToTop:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#categories-page .page__content').animate({scrollTop:0},400)},0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},searchPageViewModel:{currentSearchResultsArray:null,pageInit:function o(e){var a=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){t.next=3;break}return setTimeout(a,500),t.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.backButtonClicked;try{new ej.dropdowns.AutoComplete({floatLabelType:'Never',placeholder:'Search Products',allowCustom:!0,filterType:'Contains',minLength:1e3,suggestionCount:20,dataSource:[],noRecordsTemplate:'Tap \'Search\' key to begin search',blur:function e(){this._allowRemoteSearch=!1,$('#search-page-search-input-popover').get(0).hide()},change:function a(){var e='';return!0===this._allowRemoteSearch?this.value&&''!==this.value.trim()?void(e=this.value.trim(),$('#search-page-search-input-popover #search-input-popover-list').html('\n                            <ons-list-item modifier="nodivider" lock-on-drag="true">\n                                <div class="left">\n                                    <ons-progress-circular indeterminate modifier="pull-hook" \n                                    style="transform: scale(0.6)"></ons-progress-circular>\n                                </div>\n                                <div class="center">\n                                    <div style="text-align: center;">\n                                        Searching for products\n                                    </div>\n                                </div>\n                            </ons-list-item>'),$('#search-page-search-input-popover').get(0).show(document.getElementById('search-page-input')),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function a(){var t,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=[],a.prev=1,a.next=4,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:3,search:e});case 4:return t=a.sent,a.next=7,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayPageContent(t[0]);case 7:a.next=20;break;case 9:a.prev=9,a.t0=a['catch'](1),$('#search-page #search-page-input').get(0).ej2_instances[0].focusOut(),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),o.dataBind(),o.show();case 20:case'end':return a.stop();}},a,this,[[1,9]])})),0)):void(this._allowRemoteSearch=!1):void(this._allowRemoteSearch=!1)}}).appendTo('#search-page-input')}catch(e){}case 5:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('Search'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches()},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray=null;case 3:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#search-page #search-page-input').get(0).ej2_instances[0].destroy()},backButtonClicked:function e(){$('#search-page-search-input-popover').get(0).hide(),$('#app-main-tabbar').get(0).setActiveTab(1)},deviceOfflineListener:function a(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see search results',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},displayRecentSearches:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:for(a=e.sent,t='<ons-list-title>Recent Searches</ons-list-title>',o=0;o<a.products.length;o++)t+='\n                    <ons-list-item modifier="longdivider" tappable lock-on-drag="true">\n                        <div class="center">\n                            <div style="width: 100%;" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                              recentSearchesItemClicked('+o+')">\n                                <span class="list-item__subtitle">'+a.products[o].name+'</span>\n                            </div>\n                        </div>\n                        <div class="right" prevent-tap \n                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                                    removeRecentSearchItem('+o+', this);">\n                            <ons-icon icon="md-close-circle" style="color: lavender; font-size: 18px;"></ons-icon>\n                        </div>\n                    </ons-list-item>';$('#search-page #search-list').html(t),e.next=11;break;case 9:e.prev=9,e.t0=e['catch'](0);case 11:case'end':return e.stop();}},e,this,[[0,9]])}));return function a(){return e.apply(this,arguments)}}(),saveRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:t=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,t.unshift(a),t=t.slice(0,5),e.next=14,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 14:return e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 16:e.next=20;break;case 18:e.prev=18,e.t1=e['catch'](9);case 20:case'end':return e.stop();}},e,this,[[1,7],[9,18]])}));return function a(){return e.apply(this,arguments)}}(),removeRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:o=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,o.splice(a,1),e.next=13,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 13:return r=$(t).closest('ons-list-item'),e.next=16,kendo.fx(r).expand('vertical').duration(300).reverse();case 16:return e.next=18,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e['catch'](9);case 22:case'end':return e.stop();}},e,this,[[1,7],[9,20]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),recentSearchesItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:t=e.sent.products,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:t[a]}}),e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](0);case 9:case'end':return e.stop();}},e,this,[[0,7]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),enterButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.which===kendo.keys.ENTER&&(a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),Keyboard.hide(),t=$('#search-page #search-page-input').get(0).ej2_instances[0],t.value=$('#search-page #search-page-input').val(),t._allowRemoteSearch=!0,t.dataBind(),t.change());case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a.page||1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:a.per_page||3;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.page=o,a.per_page=r,t=[],navigator.connection.type===Connection.NONE?t.push(Promise.reject('no internet connection')):t.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:a})).then(function(a){0<a.length&&(utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray=a),e(a)}).catch(function(e){t(e)})})),e.abrupt('return',Promise.all(t));case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(e){var t='';if(0>=a.length)$('#search-page-search-input-popover #search-input-popover-list').html('<ons-list-item modifier="nodivider" lock-on-drag="true">\n                                <div class="center">\n                                    <div style="text-align: center; width: 100%;">\n                                        No Results Found\n                                    </div>\n                                </div>\n                            </ons-list-item>'),e(a.length);else{for(var o=0;o<a.length;o++)t+='<ons-list-item modifier="nodivider" tappable lock-on-drag="true" \n                              onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                              searchAutocompletePopOverItemClicked('+o+')">\n                                <div class="left">\n                                    <div class="search-result-image" style="background-image: url(\''+a[o].images[0].src+'\'); \n                                                            width: 2em; height: 2em"></div>\n                                </div>\n                                <div class="center">\n                                    <div style="text-align: center;">\n                                        '+a[o].name+'\n                                    </div>\n                                </div>\n                            </ons-list-item>';t+='<ons-list-item modifier="nodivider" tappable lock-on-drag="true" \n                          onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.findMoreClicked();">\n                                <div class="center">\n                                    <div style="text-align: center; width: 100%; font-weight: bold;">\n                                        Find More...\n                                    </div>\n                                </div>\n                            </ons-list-item>',$('#search-page-search-input-popover #search-input-popover-list').html(t),e(a.length)}}),e.abrupt('return',t);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),searchAutocompletePopOverItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray[a],window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:t}});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.saveRecentSearchItem(t);case 5:$('#search-page #search-page-input').val(t.name),e.next=10;break;case 8:e.prev=8,e.t0=e['catch'](0);case 10:case'end':return e.stop();}},e,this,[[0,8]])})),0);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),findMoreClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,search:$('#search-page #search-page-input').get(0).ej2_instances[0].value.trim()});case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',t.dataBind(),t.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},accountPageViewModel:{pageInit:function o(e){var a=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){t.next=3;break}return setTimeout(a,500),t.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.accountPageViewModel.backButtonClicked;try{o=new ej.navigations.Accordion({expandMode:'Single'}),o.appendTo('#account-personal-accordion'),o.expandItem(!0,0)}catch(e){}case 5:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('Account'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan')},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(2)}},loginPageViewModel:{loginFormValidator:null,signupFormValidator:null,pageInit:function o(e){var a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(a,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked,t.on('postchange','#login-carousel',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange),t.on('postchange','#login-carousel',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator=$('#login-page #login-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator=$('#login-page #signup-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error',function(e){var a=$('#login-page #login-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];a.content=e.getErrorsMessages()[0],a.dataBind(),a.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success',function(e){var a=$('#login-page #login-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];a.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error',function(e){var a=$('#login-page #signup-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];a.content=e.getErrorsMessages()[0],a.dataBind(),a.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success',function(e){var a=$('#login-page #signup-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];a.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated),$('#login-page .login-page-form-container').on('scroll',function(){window.setTimeout(function(){switch($('#login-page #login-carousel').get(0).getActiveIndex()){case 0:$('#login-page #login-form ons-input').each(function(e,a){document.getElementById('login-form').ej2_instances[e].refresh(a)});break;case 1:$('#login-page #signup-form ons-input').each(function(e,a){document.getElementById('signup-form').ej2_instances[e].refresh(a)});break;case 2:}},0)});try{$('#login-form ons-input',t).each(function(e,a){a._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo($('#login-page #login-form').get(0))}),$('#signup-form ons-input',t).each(function(e,a){a._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo($('#login-page #signup-form').get(0))}),new ej.buttons.Button({isToggle:!0,cssClass:'e-flat e-small e-round',iconCss:'zmdi zmdi-eye',iconPosition:'Left'}).appendTo($('#signup-password-view-button',t).get(0))}catch(e){}case 16:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){window.SoftInputMode.set('adjustPan'),window.addEventListener('keyboardDidShow',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener('keyboardDidShow',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView),$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.close()}),$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset();case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},segmentButtonClicked:function a(e){$('#login-page #login-carousel').get(0).setActiveIndex(e)},passwordVisibilityButtonClicked:function t(e,a){if(!$(e).hasClass('e-active')){$(document.getElementById(a)).attr('type','text');var o=e.ej2_instances[0];o.iconCss='zmdi zmdi-eye-off',o.dataBind()}else{$(document.getElementById(a)).attr('type','password');var r=e.ej2_instances[0];r.iconCss='zmdi zmdi-eye',r.dataBind()}},changeScreenCarouselPostChange:function a(e){switch(e.originalEvent.activeIndex){case 0:$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input').prop('checked',!0),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-segment button input').prop('checked',!1),$('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);break;case 1:$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input').prop('checked',!0),$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-segment button input').prop('checked',!1),$('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);break;case 2:$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input').prop('checked',!0),$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input').prop('checked',!1),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input').prop('checked',!0),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);}},hideTooltipsCarouselPostChange:function a(e){switch(e.originalEvent.lastActiveIndex){case 0:$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.close()});break;case 1:$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.close()});break;case 2:}},keyboardShownAdjustView:function o(e){var a=Math.floor,t=Math.ceil(e.keyboardHeight)+6e3;switch($('#login-page #login-carousel').get(0).getActiveIndex()){case 0:$('#login-page ons-carousel-item.first .login-page-form-container').css({"padding-bottom":t+'px'}),$('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(a($(document.activeElement).closest('ons-input').position().top-30));break;case 1:$('#login-page ons-carousel-item.second .login-page-form-container').css({"padding-bottom":t+'px'}),$('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(a($(document.activeElement).closest('ons-input').position().top-30));break;case 2:}},signinButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),signupButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),loginFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),signupFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},productsPageViewModel:{currentPage:0,pageSize:20,viewContentHeight:0,lastActiveNavTab:0,currentQueryParam:{},pageInit:function r(e){var a=Math.floor,t=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){r.next=3;break}return setTimeout(t,500),r.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.backButtonClicked,e.target.onInfiniteScroll=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageInfiniteScroll,$('#products-page-pull-hook',o).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pagePullHookAction,$('#products-page-pull-hook',o).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight=a($('#products-page .page__content').height()),$('#products-page .page__content').on('scroll',function(){window.setTimeout(function(){var e=a($('#products-page .page__content').scrollTop()),t=100*(e/utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight);50<=t?$('#products-page #products-page-scroll-top-fab').css({transform:'scale(1)',display:'inline-block'}):$('#products-page #products-page-scroll-top-fab').css({transform:'scale(0)'})},0)}),$('#app-main-tabbar').on('prechange',function(e){4===e.originalEvent.index||(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab=e.originalEvent.index)}),o.on('click','.e-card',function(e){utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.productItemClicked(window.parseInt($(e.currentTarget).attr('data-product')),window.parseInt($(e.currentTarget).attr('data-page')))});try{}catch(e){}case 12:case'end':return r.stop();}},r,this)}));return function(){return r.apply(this,arguments)}}(),o=$(e.target);t()},pageShow:function a(e){$('#app-main-page ons-toolbar div.title-bar').html('Products'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),!1!==$('#app-main-navigator').get(0)._resetPageDisplay&&(e.target._allowInfinitePageScroll=!1,$('#products-page .page-preloader').css('display','block'),$('#products-page #products-contents-container').html(''),$('#products-page #products-page-scroll-top-fab').css({display:'none'})),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.target._allowInfinitePageScroll=!1,delete $('#app-main-navigator').get(0)._resetPageDisplay,document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener,!1),$('#products-page .page__content .infinite-load-container').remove();case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab)},deviceOfflineListener:function a(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see updated products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#products-page #products-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam,1);case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:e.next=17;break;case 10:e.prev=10,e.t0=e['catch'](2),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred. Refresh to try again',t.dataBind(),t.show();case 17:return e.prev=17,$('#products-page .page-preloader').css('display','none'),$('#products-page #products-page-pull-hook').removeAttr('disabled'),o(),e.finish(17);case 22:case'end':return e.stop();}},e,this,[[2,10,17,22]])}));return function a(){return e.apply(this,arguments)}}(),pageInfiniteScroll:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==$('#products-page').get(0)._allowInfinitePageScroll){e.next=3;break}return o(),e.abrupt('return');case 3:return $('#products-page .page__content').append('<div class="infinite-load-container" style="text-align: center">\n                        <ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>\n                    </div>'),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=[],e.prev=6,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+1);case 9:return a=e.sent,e.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0],!0,!1);case 12:e.next=21;break;case 14:e.prev=14,e.t0=e['catch'](6),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred. Refresh to try again',t.dataBind(),t.show();case 21:return e.prev=21,a&&0<a[0].length?$('#products-page .page__content .infinite-load-container').remove():$('#products-page .page__content .infinite-load-container').css({visibility:'hidden'}),o(),e.finish(21);case 25:case'end':return e.stop();}},e,this,[[6,14,21,25]])}));return function a(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t,o,r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a.page||utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+1,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:a.per_page||utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageSize;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.page=r,a.per_page=s,t=[],navigator.connection.type===Connection.NONE?(o=$('.page-toast').get(0).ej2_instances[0],o.hide('All'),o.cssClass='default-ej2-toast',o.content='No Internet connection. Pull down to refresh and see updated products',o.dataBind(),o.show(),t.push(new Promise(function(e,a){var t=(''+r).padStart(7,'0')+'products';Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(t,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(a){e(a.products)}).catch(function(e){a(e)})}))):t.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:a})).then(function(t){if(0<t.length){var o=(''+r).padStart(7,'0')+'products';utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:o,docType:'PRODUCTS',products:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage=a.page,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam=a}e(t)}).catch(function(e){t(e)})})),e.abrupt('return',Promise.all(t));case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=Math.floor,a=Math.ceil,t=Math.abs,o=_asyncToGenerator(regeneratorRuntime.mark(function o(r){var s,p,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(s=0;4>s;s++)r.push.apply(r,_toConsumableArray(r));return p=new Promise(function(o){var s='';if(0>=r.length)o(r.length);else{for(var p=0;p<r.length;p++)r[p].regular_price&&''!=r[p].regular_price||(r[p].regular_price='0.00'),s+='<div class="col-xs-4" ',s+=0==(p+1)%3?'style="border-bottom: 1px lightgray solid">':'style="border-right: 1px lightgray solid; border-bottom: 1px lightgray solid">',s+='\n                        <ons-ripple background="rgba(63, 81, 181, 0.3)"></ons-ripple>\n                        <div class="e-card" \n                        data-product="'+p+'" \n                        data-page="'+utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+'">\n                            <div class="e-card-image" style="min-height: 100px; \n                            background-image: url(\''+r[p].images[0].src+'\');">\n                            '+(!0===r[p].on_sale?'\n                            <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+a(100*(t(kendo.parseFloat(r[p].price)-kendo.parseFloat(r[p].regular_price))/kendo.parseFloat('0.00'===r[p].regular_price?r[p].price:r[p].regular_price)))+'% OFF\n                             </span>':'')+'\n                            </div>\n                            <div class="e-card-header">\n                                <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                                    <div class="e-card-sub-title" style="color: #000000; font-size: 14px; text-align: center; text-transform: capitalize">\n                                        '+r[p].name+'\n                                    </div>\n                        <div style="color: gold; font-size: 0.6em !important; white-space: nowrap !important; \n                        text-overflow: ellipsis; overflow: hidden;">\n                        '+(0<e(kendo.parseFloat(r[p].average_rating))?'<ons-icon icon="md-star" fixed-width></ons-icon>'.repeat(e(kendo.parseFloat(r[p].average_rating))):'<ons-icon icon="md-star-outline" style="color: lightgray" fixed-width></ons-icon>'.repeat(5))+'\n                            <span style="display: inline-block; color: gray;">\n                            '+(0<e(kendo.parseFloat(r[p].average_rating))?'('+r[p].rating_count+')':'')+'\n                           </span>\n                        </div>\n                        <div class="e-card-sub-title" style="text-align: left;">&#x20a6;'+kendo.toString(kendo.parseFloat(r[p].price),'n2')+'</div>\n                        <div class="e-card-sub-title" style="text-align: left; text-decoration: line-through; \n                        '+(!0===r[p].on_sale?'visibility: visible':'visibility: hidden')+'">&#x20a6;'+kendo.toString(kendo.parseFloat(r[p].regular_price),'n2')+'</div>\n                        </div>\n                        </div>\n                        </div>\n                        </div>';!0===i?$('#products-page #products-contents-container').html(s):!0===n?$('#products-page #products-contents-container').append(s):$('#products-page #products-contents-container').prepend(s),$('#products-page').get(0)._allowInfinitePageScroll=!0,o(r.length)}}),o.abrupt('return',p);case 3:case'end':return o.stop();}},o,this)}));return function e(){return o.apply(this,arguments)}}(),scrollPageToTop:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#products-page .page__content').animate({scrollTop:0},400)},0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),productItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData((''+t).padStart(7,'0')+'products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:o=e.sent.products,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:o[a]}}),e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](0);case 9:case'end':return e.stop();}},e,this,[[0,7]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},productDetailsPageViewModel:{currentProductDetails:null,currentProductVariationIndex:-1,productVariationsArray:[],pageInit:function o(e){var a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(a,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked,$('#product-details-page-pull-hook',t).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.pagePullHookAction,$('#product-details-page-pull-hook',t).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),e.prev=6,new ej.inputs.NumericTextBox({cssClass:'product-details-quantity-class',currency:null,decimals:0,floatLabelType:'Auto',format:'n',showSpinButton:!1,min:1,max:10,placeholder:'Pick Quantity',step:1,strictMode:!0,value:1}).appendTo('#product-details-quantity'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#product-details-add-to-cart'),new ej.buttons.Button({}).appendTo('#product-details-customise-product'),new ej.buttons.Button({cssClass:'e-flat e-small',iconCss:'zmdi zmdi-star-outline',iconPosition:'Left'}).appendTo('#product-details-review'),new ej.buttons.Button({cssClass:'e-flat e-small',iconCss:'zmdi zmdi-share',iconPosition:'Left'}).appendTo('#product-details-share'),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProductVariations(),e.next=15,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProduct();case 15:return o=e.sent,e.next=18,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.displayProductDetails(o[0]);case 18:$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),e.next=29;break;case 21:e.prev=21,e.t0=e['catch'](6),$('.page-toast').get(0).ej2_instances[0].hide('All'),r=$('.page-toast').get(0).ej2_instances[0],r.cssClass='error-ej2-toast',r.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',r.dataBind(),r.show();case 29:return e.prev=29,$('#product-details-page .page-preloader').css('display','none'),e.finish(29);case 32:case'end':return e.stop();}},e,this,[[6,21,29,32]])}));return function(){return e.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){$('#product-details-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize')},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=null,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex=-1,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray=[],$('#product-details-quantity').get(0).ej2_instances[0].destroy(),$('#product-details-review').get(0).ej2_instances[0].destroy(),$('#product-details-share').get(0).ej2_instances[0].destroy(),$('#product-details-add-to-cart').get(0).ej2_instances[0].destroy(),$('#product-details-customise-product').get(0).ej2_instances[0].destroy(),$('#product-details-page .product-details-variation-option').each(function(e,a){a.ej2_instances[0].destroy()})},backButtonClicked:function a(){var e=$('#app-main-navigator').get(0).pages;if(1<e.length){var t=$(e[e.length-2]).get(0);switch(t.id){case'app-main-page':4===$('#app-main-tabbar').get(0).getActiveTabIndex()?($('#app-main-navigator').get(0)._resetPageDisplay=!1,$('#products-page').get(0)._allowInfinitePageScroll=!0,$('#app-main-navigator').get(0).popPage()):$('#app-main-navigator').get(0).popPage();break;default:$('#app-main-navigator').get(0).popPage();}}else;},shareButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={},a.message='check out this #ShopOakExclusive product',a.chooserTitle='share product with...',window.setTimeout(function(){if(-1!==utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex){var e=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,t=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[e];a.url=t.permalink,a.files=[t.image&&''!==t.image?t.image.src:utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.images[0].src]}else a.url=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.permalink,a.files=[utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.images[0].src];cordova.plugins.clipboard.copy(a.message+' | '+a.url,function(){window.plugins.toast.showWithOptions({message:'shared message copied to clipboard',duration:3e3,position:'center',styling:{cornerRadius:0,opacity:1,backgroundColor:'#3F51B5',textColor:'#FFFFFF',textSize:14}})},function(){}),window.plugins.socialsharing.shareWithOptions(a,function(){},function(){})},0);case 4:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#product-details-page #product-details-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('#product-details-page #product-details-add-to-cart').attr('disabled',!0),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop(),e.prev=6,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProductVariations(),e.next=10,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProduct();case 10:return a=e.sent,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.displayProductDetails(a[0]);case 13:e.next=22;break;case 15:e.prev=15,e.t0=e['catch'](6),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred. Refresh to try again',t.dataBind(),t.show();case 22:return e.prev=22,$('#product-details-page #product-details-page-pull-hook').removeAttr('disabled'),$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),o(),e.finish(22);case 27:case'end':return e.stop();}},e,this,[[6,15,22,27]])}));return function a(){return e.apply(this,arguments)}}(),loadProduct:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],navigator.connection.type===Connection.NONE&&($('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='default-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to see updated product details',t.dataBind(),t.show()),$('#app-main-navigator').get(0).topPage.data.product?(o=$('#app-main-navigator').get(0).topPage.data.product,(!o.regular_price||''==o.regular_price)&&(o.regular_price='0.00'),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=o,a.push(Promise.resolve(o))):a.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/products/'+jQuery('#app-main-navigator').get(0).topPage.data.productId),type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0})).then(function(a){a.regular_price&&''!=a.regular_price||(a.regular_price='0.00'),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=a,e(a)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(a));case 4:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),loadProductVariations:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=null,t=$('#app-main-navigator').get(0).topPage.data.product?$('#app-main-navigator').get(0).topPage.data.product.id:jQuery('#app-main-navigator').get(0).topPage.data.productId,a.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/products/'+t+'/variations'),type:'get',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{page:1,per_page:99,status:'publish'}})).then(function(a){a=a.map(function(e){return e._variationValue=e.attributes.map(function(e){return e.option}).join(''),e}),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray=a,e(a)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(a));case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),displayProductDetails:function(){var e=Math.floor,a=Math.ceil,t=Math.abs,o=_asyncToGenerator(regeneratorRuntime.mark(function o(r){var s,p;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for($('#product-details-page .e-card-image').css('background-image','url("'+r.images[0].src+'")'),!0===r.on_sale&&$('#product-details-page .e-card-image').html('\n                <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+a(100*(t(kendo.parseFloat(r.price)-kendo.parseFloat(r.regular_price))/kendo.parseFloat('0.00'===r.regular_price?r.price:r.regular_price)))+'% OFF\n                 </span>'),$('#product-details-page .e-card-title').html(''+r.name),$('#product-details-page .product-details-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(r.price),'n2')),!0===r.on_sale?($('#product-details-page .product-details-regular-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(r.regular_price),'n2')),$('#product-details-page .product-details-regular-price').css('visibility','visible'),$('#product-details-quantity').get(0).ej2_instances[0].cssClass='product-details-quantity-class sales',$('#product-details-quantity').get(0).ej2_instances[0].dataBind()):($('#product-details-page .product-details-regular-price').css('visibility','collapse'),$('#product-details-quantity').get(0).ej2_instances[0].cssClass='product-details-quantity-class',$('#product-details-quantity').get(0).ej2_instances[0].dataBind()),$('#product-details-quantity').get(0).ej2_instances[0].value=1,$('#product-details-quantity').get(0).ej2_instances[0].dataBind(),$('#product-details-page .product-details-description').html(''+r.short_description),$('#product-details-page .product-details-variation-option').each(function(e,a){a.ej2_instances[0].destroy()}),$('#product-details-page .product-details-variations').removeClass('expandable-content'),s='',p=0;p<r.attributes.length;p++)s+='<div class="col-xs-4" style="padding-right: 5px; padding-left: 5px;">\n                    <select name="'+r.attributes[p].name+'" class="product-details-variation-option">\n                        '+r.attributes[p].options.map(function(e){return'<option value="'+e+'">'+e+'</option>'}).join('')+'\n                    </select>\n                </div>';$('#product-details-page .product-details-variations').html(s),$('#product-details-page .product-details-variation-option').each(function(e,a){0<r.default_attributes.length&&$('option[value="'+r.default_attributes[e].option+'"]',a).attr('selected',!0),new ej.dropdowns.DropDownList({cssClass:'product-details-variation-class',placeholder:r.attributes[e].name,floatLabelType:'Always',change:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function a(){var t,o,r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t='',$('#product-details-page .product-details-variation-option').each(function(e,a){t+=a.ej2_instances[0].value}),o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray.findIndex(function(e){return t===e._variationValue}),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex=o,-1!==utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex&&(r=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[o],r.image&&''!==r.image&&$('#product-details-page .e-card-image').css('background-image','url("'+r.image.src+'")'),r.price&&''!==r.price&&$('#product-details-page .product-details-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(r.price),'n2'))),e();case 6:case'end':return a.stop();}},a,this)})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()}).appendTo(a)}),$('#product-details-page .product-details-variations').addClass('expandable-content'),$('#product-details-page .product-details-rating').html('\n            '+(0<e(kendo.parseFloat(r.average_rating))?'<ons-icon icon="md-star" fixed-width></ons-icon>'.repeat(e(kendo.parseFloat(r.average_rating))):'<ons-icon icon="md-star-outline" style="color: lightgray" fixed-width></ons-icon>'.repeat(5))+'\n                <span style="display: inline-block; color: gray;">\n                '+(0<e(kendo.parseFloat(r.average_rating))?'('+r.rating_count+')':'')+'\n                </span>\n            '),$('#product-details-page .product-details-more-description').html('\n            '+r.description),$('#product-details-page .product-details-dimensions').html('\n            <span class="list-item__subtitle" style="display: block">length - '+(r.dimensions.length&&''!=r.dimensions.length?''+r.dimensions.length:'(Not Available)')+'</span>\n            <span class="list-item__subtitle" style="display: block">width - '+(r.dimensions.width&&''!=r.dimensions.width?''+r.dimensions.width:'(Not Available)')+'</span>\n            <span class="list-item__subtitle" style="display: block">height - '+(r.dimensions.height&&''!=r.dimensions.height?''+r.dimensions.height:'(Not Available)')+'</span>'),$('#product-details-page .product-details-weight').html(''+(r.weight&&''!=r.weight?''+r.weight:'(Not Available)'));case 19:case'end':return o.stop();}},o,this)}));return function e(){return o.apply(this,arguments)}}(),customiseButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3500,a.content='Please connect to the Internet to customise product',a.dataBind(),a.show(),e.abrupt('return');case 10:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a='',-1===utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex?a=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.permalink:(t=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[t],a=o.permalink),e.next=4,$('#app-main-navigator').get(0).pushPage('customise-product-page.html');case 4:return e.next=6,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.loadProductCustomisation(a);case 6:case'end':return e.stop();}},e,this)})),0);case 11:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),addToCartButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#product-details-page #product-details-add-to-cart').attr('disabled',!0),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].start(),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o,r,s,p,n,i,c,l,d,u,g,m,h,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t={cartData:{}},e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 5:a=e.sent.cart,e.next=10;break;case 8:e.prev=8,e.t0=e['catch'](2);case 10:if(-1===utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex){e.next=36;break}for(o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,r=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[o],t.cartData.variation_id=r.id,s=new URLSearchParams(r.permalink.split('?')[1]),t.cartData.variation={},p=!0,n=!1,i=void 0,e.prev=19,c=s[Symbol.iterator]();!(p=(l=c.next()).done);p=!0)d=l.value,u=_slicedToArray(d,2),g=u[0],m=u[1],t.cartData.variation[g]=m;e.next=27;break;case 23:e.prev=23,e.t1=e['catch'](19),n=!0,i=e.t1;case 27:e.prev=27,e.prev=28,!p&&c.return&&c.return();case 30:if(e.prev=30,!n){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(27);case 35:t.productVariation=r;case 36:return t.cartData.product_id=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.id,t.cartData.quantity=$('#product-details-quantity').get(0).ej2_instances[0].value,t.product=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails,t.uid=Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine),e.prev=40,a.push(t),e.next=44,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 44:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),h=$('.timed-page-toast').get(0).ej2_instances[0],h.cssClass='success-ej2-toast',h.timeOut=2e3,h.content='Product has been added to your cart',h.dataBind(),h.show(),console.log('USER CART OBJECT',t),e.next=66;break;case 55:e.prev=55,e.t2=e['catch'](40),console.log('PRODUCT DETAILS ERROR',e.t2),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),_=$('.timed-page-toast').get(0).ej2_instances[0],_.cssClass='error-ej2-toast',_.timeOut=3500,_.content='Error adding product to your cart. Try again',_.dataBind(),_.show();case 66:return e.prev=66,$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop(),e.finish(66);case 72:case'end':return e.stop();}},e,this,[[2,8],[19,23,27,35],[28,,30,34],[40,55,66,72]])})),0);case 5:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},customiseProductPageViewModel:{currentCustomisationUrl:'',customisationPageLoadCount:0,cartsQueue:[],pageInit:function o(e){var a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(a,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.backButtonClicked,$('#customise-product-page-pull-hook',t).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.pagePullHookAction,window.addEventListener('message',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.receiveMessageListener,!1),$('#customise-product-page-pull-hook',t).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}});try{new ej.buttons.Button({}).appendTo('#customise-product-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#customise-product-add-to-cart')}catch(e){console.log('CUSTOMISATION ERROR',e)}finally{}case 8:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#customise-product-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl='',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount=0,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue=[],window.removeEventListener('message',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.receiveMessageListener,!1)},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},deviceOfflineListener:function a(){$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All');var e=$('.page-toast').get(0).ej2_instances[0];e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to customise product',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},receiveMessageListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if('https://shopoakexclusive.com'===a.origin){e.next=2;break}return e.abrupt('return');case 2:if('page ready'!==a.data){e.next=8;break}return utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount+=1,$('#customise-product-page .page-preloader').css('display','none'),e.abrupt('return');case 8:t=JSON.parse(a.data),Array.isArray(t)?utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.push({}):utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.push(t),2<utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.length&&utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.shift(),window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.saveCustomisedProductToCart,0),$('#customise-product-page #customise-product-add-to-cart').removeAttr('disabled'),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();case 16:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#customise-product-page .page-preloader').css('display','block'),$('#customise-product-page #customise-product-add-to-cart').attr('disabled',!0),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop(),$('#customise-product-page #customise-product-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=7,e.next=10,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.loadProductCustomisation();case 10:e.next=19;break;case 12:e.prev=12,e.t0=e['catch'](7),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 19:return e.prev=19,window.setTimeout(function(){$('#customise-product-page #customise-product-page-pull-hook').removeAttr('disabled'),t()},2e3),e.finish(19);case 22:case'end':return e.stop();}},e,this,[[7,12,19,22]])}));return function a(){return e.apply(this,arguments)}}(),loadProductCustomisation:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='default-ej2-toast',a.timeOut=3500,a.content='Please connect to the Internet to customise product and Pull Down to refresh',a.dataBind(),a.show(),e.abrupt('return');case 10:return $('#customise-product-page #customise-product-page-iframe').attr('src',t),utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl=t,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount=0,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue=[],e.abrupt('return',!0);case 15:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),saveCustomisedProductToCart:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t,o,r,s,p,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue[0],t=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue[1],e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=54;break}if(o=e.t1.value,a[o]){e.next=52;break}return r=t[o],s=[],p={cartData:{}},e.prev=9,e.next=12,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 12:s=e.sent.cart,e.next=17;break;case 15:e.prev=15,e.t2=e['catch'](9);case 17:return p.cartData.product_id=r.product_id,p.cartData.quantity=r.quantity,p.cartData.variation_id=r.variation_id,p.cartData.variation=r.variation,p.cartData.cart_item_data={fpd_data:r.fpd_data},p.anon_cart_key=r.key,p.product_name=r.product_name,p.customisationUrl=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl,p.uid=Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine),e.prev=26,s.push(p),e.next=30,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:s},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 30:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='success-ej2-toast',n.timeOut=2e3,n.content='Customised product has been added to your cart',n.dataBind(),n.show(),e.next=51;break;case 40:e.prev=40,e.t3=e['catch'](26),console.log('CUSTOMISE PRODUCT ERROR',e.t3),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Error adding customised product to your cart. Try again',i.dataBind(),i.show();case 51:return e.abrupt('break',54);case 52:e.next=3;break;case 54:case'end':return e.stop();}},e,this,[[9,15],[26,40]])}));return function a(){return e.apply(this,arguments)}}(),addToCartButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='default-ej2-toast',a.timeOut=3500,a.content='Please connect to the Internet to add customised product to cart',a.dataBind(),a.show(),e.abrupt('return');case 10:$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].start(),$('#customise-product-page #customise-product-page-iframe').get(0).contentWindow.utopiasoftware_addUsage();case 14:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}()},viewCartPageViewModel:{pageInit:function o(e){var a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(a,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.backButtonClicked,$('#view-cart-page-pull-hook',t).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.pagePullHookAction,$('#view-cart-page-pull-hook',t).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}});try{new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#view-cart-checkout')}catch(e){console.log('VIEW-CART PAGE',e),$('.page-toast').get(0).ej2_instances[0].hide('All'),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Pull down to refresh',o.dataBind(),o.show()}case 7:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=$(e.target);a()},pageShow:function e(){$('#view-cart-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize')},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),pageDestroy:function e(){},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#view-cart-page #view-cart-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('#view-cart-page #view-cart-checkout').attr('disabled',!0),$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].dataBind(),$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].stop(),e.prev=6,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();case 9:e.next=18;break;case 11:e.prev=11,e.t0=e['catch'](6),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 18:return e.prev=18,$('#view-cart-page #view-cart-page-pull-hook').removeAttr('disabled'),$('#view-cart-page #view-cart-checkout').removeAttr('disabled'),$('#view-cart-page .page-preloader').css('display','none'),t(),e.finish(18);case 24:case'end':return e.stop();}},e,this,[[6,11,18,24]])}));return function a(){return e.apply(this,arguments)}}(),displayUserCart:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t='',e.prev=1,e.prev=2,e.t0=a,e.t0){e.next=8;break}return e.next=7,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 7:e.t0=e.sent.cart;case 8:a=e.t0,e.next=14;break;case 11:e.prev=11,e.t1=e['catch'](2),a=[];case 14:if(0!==a.length){e.next=24;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Your cart is empty. Go order some products!',o.dataBind(),o.show(),e.abrupt('return');case 24:for($('#view-cart-page .view-cart-edit-button').each(function(e,a){a.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-remove-button').each(function(e,a){a.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-quantity-input').each(function(e,a){a.ej2_instances[0].destroy()}),r=0;r<a.length;r++)t+='<div class="col-xs-12" style="border-bottom: 1px lightgray solid">\n                        <div class="e-card e-card-horizontal">',a[r].anon_cart_key?t+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: url(\''+a[r].cartData.cart_item_data.fpd_data.fpd_product_thumbnail+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+a[r].product_name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(a[r].cartData.quantity*kendo.parseFloat(a[r].cartData.cart_item_data.fpd_data.fpd_product_price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">\n                                <button type="button" class="view-cart-edit-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;"></button>\n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" value="'+a[r].cartData.quantity+'">\n                            </div>\n                            </div>\n                            </div>':a[r].productVariation?t+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: \n                            url(\''+(a[r].productVariation.image&&''!==a[r].productVariation.image?a[r].productVariation.image.src:a[r].product.images[0].src)+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+a[r].product.name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(a[r].cartData.quantity*kendo.parseFloat(a[r].productVariation.price&&''!==a[r].productVariation.price?a[r].productVariation.price:a[r].product.price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">\n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" value="'+a[r].cartData.quantity+'">\n                            </div>\n                            </div>\n                            </div>':!a[r].productVariation&&(t+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: url(\''+a[r].product.images[0].src+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+a[r].product.name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(a[r].cartData.quantity*kendo.parseFloat(a[r].product.price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">                          \n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" value="'+a[r].cartData.quantity+'">\n                            </div>\n                            </div>\n                            </div>'),t+='</div>\n                         </div>';$('#view-cart-page #view-cart-contents-container').html(t),$('#view-cart-page .view-cart-edit-button').each(function(e,a){new ej.buttons.Button({cssClass:'e-flat e-round',iconCss:'zmdi zmdi-edit utopiasoftware-icon-zoom-one-point-two',iconPosition:'Left'}).appendTo(a)}),$('#view-cart-page .view-cart-remove-button').each(function(e,a){new ej.buttons.Button({cssClass:'e-flat e-round',iconCss:'zmdi zmdi-delete utopiasoftware-icon-zoom-one-point-two'}).appendTo(a)}),$('#view-cart-page .view-cart-quantity-input').each(function(e,a){new ej.inputs.NumericTextBox(_defineProperty({value:a.value,cssClass:'view-cart-quantity-input-class',currency:null,decimals:0,floatLabelType:'Auto',format:'n',showSpinButton:!0,min:1,max:10,placeholder:' ',step:1,strictMode:!0,width:'60%'},'value',1)).appendTo(a)}),$('#view-cart-page #view-cart-total-price').html('&#x20a6;'+utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.calculateCartTotalPrice(a));case 33:return e.prev=33,e.finish(33);case 35:case'end':return e.stop();}},e,this,[[1,,33,35],[2,11]])}));return function a(){return e.apply(this,arguments)}}(),saveRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:t=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,t.unshift(a),t=t.slice(0,5),e.next=14,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 14:return e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 16:e.next=20;break;case 18:e.prev=18,e.t1=e['catch'](9);case 20:case'end':return e.stop();}},e,this,[[1,7],[9,18]])}));return function a(){return e.apply(this,arguments)}}(),removeRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:o=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,o.splice(a,1),e.next=13,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 13:return r=$(t).closest('ons-list-item'),e.next=16,kendo.fx(r).expand('vertical').duration(300).reverse();case 16:return e.next=18,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e['catch'](9);case 22:case'end':return e.stop();}},e,this,[[1,7],[9,20]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function a(){return e.apply(this,arguments)}}(),viewCartPage:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-navigator').get(0).bringPageTop('view-cart-page.html');case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();case 5:$('#view-cart-page #view-cart-checkout').removeAttr('disabled'),e.next=17;break;case 8:e.prev=8,e.t0=e['catch'](0),console.log('VIEW-CART PAGE',e.t0),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Pull down to refresh',a.dataBind(),a.show();case 17:return e.prev=17,$('#view-cart-page .page-preloader').css('display','none'),e.finish(17);case 20:case'end':return e.stop();}},e,this,[[0,8,17,20]])}));return function a(){return e.apply(this,arguments)}}(),calculateCartTotalPrice:function a(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return 0===e.length?0:void e.reduce(function(e,a){if(a.anon_cart_key)return e+a.cartData.quantity*kendo.parseFloat(a.cartData.cart_item_data.fpd_data.fpd_product_price);return a.productVariation?e+a.cartData.quantity*kendo.parseFloat(a.productVariation.price&&''!==a.productVariation.price?a.productVariation.price:a.product.price):a.productVariation?void 0:e+a.cartData.quantity*kendo.parseFloat(a.product.price)},0)}}};

//# sourceMappingURL=controller-compiled.js.map