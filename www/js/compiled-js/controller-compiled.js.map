{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 18/11/2018.\r\n */\r\n\r\n/**\r\n* file defines all View-Models, Controllers and Event Listeners used by the app\r\n*\r\n* The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n* The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n* also used interchangeably\r\n*/\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n    /**\r\n     * method contains the startup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // disable the default back button handler for the 'search-page-search-input-popover'\r\n            $('#search-page-search-input-popover').get(0).onDeviceBackButton.disable();\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // create the ej2 bottom toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 0,\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.page-toast').get(0));\r\n\r\n            // create the ej2 \"timed\" bottom toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 4000, // default 4 sec\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.timed-page-toast').get(0));\r\n\r\n            if(true){ // there is a previous logged in user\r\n                // load the app main page\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n\r\n            }\r\n            else{ // there is no previously logged in user\r\n                // load the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n\r\n                // create the pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase = new PouchDB('PrintServiceEcommerce.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // create the encrypted pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase =\r\n                    new PouchDB('PrintServiceEcommerceEncrypted.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // generate a password for encrypting the app database (if it does NOT already exist)\r\n                let secureKey = null;\r\n                try {\r\n                    // get secure key, if it exists\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.getItem(\"utopiasoftware-oak-print-service-secure-key\",resolve, reject);\r\n                    });\r\n                }\r\n                catch(err){ // secure key does not exist\r\n                    // create the secure key\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.setItem(\"utopiasoftware-oak-print-service-secure-key\",\r\n                            {password: Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},\r\n                            resolve, reject);\r\n                    });\r\n                }\r\n                // enable the db encryption using the generated password\r\n                await new Promise(function(resolve, reject){\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.\r\n                    crypto(secureKey.password, {\r\n                        ignore: ['_attachments', '_deleted'],\r\n                        cb: function(err, key){\r\n                            if(err){ // there is an error\r\n                                reject(err); // reject Promise\r\n                            }\r\n                            else{ // no error\r\n                                resolve(key); // resolve Promise\r\n                            }\r\n                        }});\r\n                });\r\n\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n                // set status bar color\r\n                StatusBar.backgroundColorByHexString(\"#363E7C\");\r\n                navigator.splashscreen.hide(); // hide the splashscreen\r\n                utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fully loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Home page\r\n     */\r\n    homePageViewModel: {\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"New Products\"/ Banner Ads\r\n         */\r\n        newProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Featured / Popular Products\"\r\n         */\r\n        featuredProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Sales Products\"\r\n         */\r\n        salesProductsCarousel: null,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"New Products\" carousel\r\n                    let newProductsCarousel = new Flickity($('#home-page #home-latest-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        // adaptiveHeight: true,\r\n                        imagesLoaded: true,\r\n                        cellSelector: '.col-xs-12',\r\n                        autoPlay: 5000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'left',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    newProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(newProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(newProductsCarousel._utopiasoftware_scrollTimer);\r\n                            newProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        newProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            newProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    newProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        //  $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"New Product\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel =\r\n                        newProductsCarousel;\r\n\r\n                    // create the \"Featured Products\" carousel\r\n                    let featuredProductsCarousel = new Flickity($('#home-page #home-featured-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    featuredProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(featuredProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(featuredProductsCarousel._utopiasoftware_scrollTimer);\r\n                            featuredProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        featuredProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            featuredProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    featuredProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // do nothing\r\n                            return;\r\n                        }\r\n\r\n                        // call the method to load the product details page based on the product item clicked\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        productItemClicked(window.parseInt($(cellElement).attr('data-product')),\r\n                            $(cellElement).attr('data-segment'));\r\n                    });\r\n                    // assign the \"Featured Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel =\r\n                        featuredProductsCarousel;\r\n\r\n                    let salesProductsCarousel = new Flickity($('#home-page #home-sales-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4500,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    salesProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(salesProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(salesProductsCarousel._utopiasoftware_scrollTimer);\r\n                            salesProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        salesProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            salesProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    salesProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // do nothing\r\n                            return;\r\n                        }\r\n                        // call the method to load the product details page based on the product item clicked\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        productItemClicked(window.parseInt($(cellElement).attr('data-product')),\r\n                            $(cellElement).attr('data-segment'));\r\n                    });\r\n                    // assign the \"Sales Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel =\r\n                        salesProductsCarousel;\r\n\r\n                    $('#loader-modal').get(0).hide(); // show loader\r\n\r\n                    // display page preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"block\");\r\n\r\n                    // start loading the page content\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n\r\n                    // hide the preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n                catch(err){\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"OAK\");\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n\r\n\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.reloadCells();\r\n            }\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.reloadCells();\r\n            }\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.reloadCells();\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the carousels\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n            newProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                newProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            ons.notification.confirm('Do you want to close the app?',\r\n                {title: '<img src=\"css/app-images/oak-design-logo.png\" style=\"height: 1.5em; width: auto; margin-right: 0.5em\">Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see live products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#home-page #home-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n                // hide the preloader\r\n                $('#home-page .page-preloader').css(\"display\", \"none\");\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#home-page #home-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load all products to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(){\r\n            var productTypesPromisesArray = []; // holds the array for all the promises of the product types to be loaded\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load banner products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"private\",\r\n                            \"type\": \"external\", \"page\": 1, \"per_page\": 5}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"banner-products\", docType: \"BANNER_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"${productsArray[index].images[0].src}\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"featured\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"popular-products\", docType: \"POPULAR_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                 data-product=\"${index}\" data-segment=\"featured\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"on_sale\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"sales-products\", docType: \"SALES_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                    data-product=\"${index}\" data-segment=\"sales\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ? \r\n                                         productsArray[index].price : productsArray[index].regular_price)) \r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see live products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load banner products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"banner-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).\r\n                    then(function(productsArray){\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"css/app-images/blank-img.png\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"popular-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                    data-product=\"${index}\" data-segment=\"featured\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"sales-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                  data-product=\"${index}\" data-segment=\"sales\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                        productsArray[index].price : productsArray[index].regular_price))\r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productTypesPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreFeaturedProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"featured\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreSalesProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"on_sale\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks any product item from the Feature/Popular OR\r\n         * Sales segments\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the 'appropriate' cached array of product items\r\n         *\r\n         * @param segmentType {String} specifies which segment the clicked product item belongs to.\r\n         * Possible options are: 'featured', 'sales'\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async productItemClicked(productIndex, segmentType){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n                var productItemsArray = []; // holds the array of 'appropriate' product items\r\n\r\n                try{\r\n                    // find out what segment type the clicked product belongs to\r\n                    switch (segmentType) {\r\n                        case \"featured\": // Featured/popular product\r\n                            // get the 'appropriate' product items collection\r\n                            productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                            loadData(\"popular-products\",\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                            break;\r\n\r\n                        case \"sales\": // Sales product\r\n                            // get the 'appropriate' product items collection\r\n                            productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                            loadData(\"sales-products\",\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                            break;\r\n                    }\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : productItemsArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Categories page\r\n     */\r\n    categoriesPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 100,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight =\r\n                    Math.floor($('#categories-page .page__content').height());\r\n\r\n                // listen for the scroll event on the page\r\n                $('#categories-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#categories-page .page__content').scrollTop());\r\n\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                categoriesPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when a category card is clicked\r\n                $thisPage.on(\"click\", \".e-card\", function(clickEvent){\r\n                    // load the products page in a separate event queue\r\n                    window.setTimeout(async function(){\r\n                        try{\r\n                            // navigate to the products page\r\n                            await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                            // request for products from the category that was clicked\r\n                            let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                            loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20,\r\n                                \"category\": $(clickEvent.currentTarget).attr(\"data-category-id\")});\r\n                            await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                        }\r\n                        catch(err){\r\n\r\n                            // hide all previously displayed ej2 toast\r\n                            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                            // display toast to show that an error\r\n                            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                            toast.cssClass = 'error-ej2-toast';\r\n                            toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                            toast.dataBind();\r\n                            toast.show();\r\n                        }\r\n                        finally{\r\n                            // hide the preloader for the products page\r\n                            $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                try{\r\n                    // start loading the page content\r\n                    let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide the preloader\r\n                    $('#categories-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // update the title of the page\r\n            // hide the page scroll fab\r\n            $('#categories-page #categories-page-scroll-top-fab').css({\"display\": \"none\"});\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#categories-page #categories-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                categoriesPageViewModel.loadCategories(1, utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.categoriesPageViewModel.pageSize);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#categories-page #categories-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products categories to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadCategories(pageToAccess = utopiasoftware[utopiasoftware_app_namespace].\r\n                                            controller.categoriesPageViewModel.currentPage + 1,\r\n                             pageSize = utopiasoftware[utopiasoftware_app_namespace].\r\n                                        controller.categoriesPageViewModel.pageSize){\r\n            var categoryPromisesArray = []; // holds the array for the promises used to load the product categories\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested categories list from the server\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products/categories\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"asc\", \"orderby\": \"name\", \"hide_empty\": true,\r\n                                \"page\": pageToAccess, \"per_page\": pageSize}\r\n                        }\r\n                    )).then(function(categoriesArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(categoriesArray.length > 0){ // there is data to cache\r\n                            // remove the 'uncategorized' category\r\n                            categoriesArray = categoriesArray.filter(function(element){\r\n                                return element.slug !== 'uncategorized';\r\n                            });\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCT_CATEGORIES\", categories: categoriesArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.categoriesPageViewModel.currentPage = pageToAccess;\r\n                        }\r\n                        resolve(categoriesArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading product categories with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested product categories from cached data\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedCategoriesData){\r\n                        resolve(cachedCategoriesData.categories); // resolve the parent promise with the cached categories data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(categoryPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products categories on the app screen\r\n         *\r\n         * @param categoriesArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(categoriesArray, appendContent = true, overwriteContent = true){\r\n\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let categoriesContent = \"\"; // holds the contents for the categories\r\n\r\n                // check if the categoriesArray is empty or not\r\n                if(categoriesArray.length <= 0){ // there are no new content to display\r\n                    resolve(categoriesArray.length); // resolve promise with the length of the categories array\r\n                }\r\n                else{ // there are some categories to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < categoriesArray.length; index++){\r\n                        categoriesContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            categoriesContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            categoriesContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        categoriesContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\" data-category-id=\"${categoriesArray[index].id}\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${categoriesArray[index].image.src}');\">\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${categoriesArray[index].name}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                      </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#categories-page #categories-contents-container').html(categoriesContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#categories-page #categories-contents-container').append(categoriesContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#categories-page #categories-contents-container').prepend(categoriesContent);\r\n                        }\r\n                    }\r\n\r\n                    resolve(categoriesArray.length); // resolve the promise with length of the categoriesArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#categories-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Search page\r\n     */\r\n    searchPageViewModel: {\r\n\r\n        /**\r\n         * holds the array of products for the search result that was just run by the user\r\n         */\r\n        currentSearchResultsArray: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n\r\n                    //instantiate the autocomplete widget for the search input\r\n                    let searchAutoComplete = new ej.dropdowns.AutoComplete({\r\n                        floatLabelType: \"Never\",\r\n                        placeholder: \"Search Products\",\r\n                        allowCustom: true,\r\n                        filterType: \"Contains\",\r\n                        minLength: 1000, // minimum number of characters that will automatically trigger autocomplete search\r\n                        suggestionCount: 20, // specified how many items will be in the popup\r\n                        dataSource: [],\r\n                        noRecordsTemplate: `Tap 'Search' key to begin search`,\r\n                        blur: function(){ // track when the component has lost focus\r\n                            this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                            // hide the popover\r\n                            $('#search-page-search-input-popover').get(0).hide();\r\n\r\n                        },\r\n                        change: function(){ // track when the component's value has changed\r\n\r\n                            let searchValue = \"\"; // holds the term to be searched for\r\n\r\n                            // check if the search component can perform a remote search\r\n                            if(this._allowRemoteSearch !== true){  // remote search is NOT allowed\r\n                                this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                                return; // exit function\r\n                            }\r\n\r\n                            // check that there is actually a search term entered in the search component\r\n                            if(!this.value || this.value.trim() === \"\"){ // no search term\r\n                                this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                                return; // exit function\r\n                            }\r\n\r\n                            // update the search term value\r\n                            searchValue = this.value.trim();\r\n\r\n                            // inform user that search is ongoing\r\n                            $('#search-page-search-input-popover #search-input-popover-list').\r\n                            html(`\r\n                            <ons-list-item modifier=\"nodivider\" lock-on-drag=\"true\">\r\n                                <div class=\"left\">\r\n                                    <ons-progress-circular indeterminate modifier=\"pull-hook\" \r\n                                    style=\"transform: scale(0.6)\"></ons-progress-circular>\r\n                                </div>\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center;\">\r\n                                        Searching for products\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`);\r\n                            // display the popover\r\n                            $('#search-page-search-input-popover').get(0).\r\n                            show(document.getElementById('search-page-input'));\r\n\r\n                            // run the actual search in a different event queue\r\n                            window.setTimeout(async function() {\r\n                                var searchResultsArray = [];\r\n                                try{\r\n                                    searchResultsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 3,\r\n                                        \"search\": searchValue});\r\n                                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    displayPageContent(searchResultsArray[0]);\r\n                                }\r\n                                catch(err){\r\n\r\n                                    // remove the focus from the search autocomplete component\r\n                                    $('#search-page #search-page-input').get(0).ej2_instances[0].focusOut();\r\n                                    // hide all previously displayed ej2 toast\r\n                                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    // display toast to show that an error\r\n                                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                                    toast.cssClass = 'error-ej2-toast';\r\n                                    toast.timeOut = 3000;\r\n                                    toast.content = `Sorry, a search error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"}`;\r\n                                    toast.dataBind();\r\n                                    toast.show();\r\n                                }\r\n                            }, 0);\r\n\r\n                        }\r\n                    }).appendTo('#search-page-input');\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Search\"); // update the title of the page\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener, false);\r\n\r\n            // load the recent searches list\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener, false);\r\n            // destroy the current search result array\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the search input autocomplete component\r\n            $('#search-page #search-page-input').get(0).ej2_instances[0].destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // hide the search-input popover\r\n            $('#search-page-search-input-popover').get(0).hide();\r\n            // go to the \"Categories\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(1);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see search results\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is used to display the \"Recent Searches\" list on the Search page.\r\n         * Recent Searches are gotten from the cached collection\r\n         */\r\n        async displayRecentSearches(){\r\n            try{\r\n                // load the recent search from the device database cache\r\n                let recentSearchData = await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                let displayContent = \"<ons-list-title>Recent Searches</ons-list-title>\"; // holds the content of the list to be created\r\n                // create the Recent Searches list\r\n                for(let index = 0; index < recentSearchData.products.length; index++){\r\n                    displayContent += `\r\n                    <ons-list-item modifier=\"longdivider\" tappable lock-on-drag=\"true\">\r\n                        <div class=\"center\">\r\n                            <div style=\"width: 100%;\" \r\n                            onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                              recentSearchesItemClicked(${index})\">\r\n                                <span class=\"list-item__subtitle\">${recentSearchData.products[index].name}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right\" prevent-tap \r\n                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    removeRecentSearchItem(${index}, this);\">\r\n                            <ons-icon icon=\"md-close-circle\" style=\"color: lavender; font-size: 18px;\"></ons-icon>\r\n                        </div>\r\n                    </ons-list-item>`;\r\n                }\r\n                // attach the displayContent to the list\r\n                $('#search-page #search-list').html(displayContent);\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to save a search item i.e. a product to the cached \"Recent Searches\"\r\n         *\r\n         * @param product {Object} the product to include to the \"Recent Searches\" cache\r\n         * @returns {Promise<void>}\r\n         */\r\n        async saveRecentSearchItem(product){\r\n            var recentSearchesResultArray = []; // holds the recent searches array\r\n\r\n            try{\r\n                // get the recent searches collection\r\n                recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n            }\r\n            catch(err){}\r\n\r\n            try{\r\n                // add the received 'product' parameter to the top of the recent searches array\r\n                recentSearchesResultArray.unshift(product);\r\n                // ensure the array is NOT greater than 5 items in length\r\n                recentSearchesResultArray = recentSearchesResultArray.slice(0, 5);\r\n                // save the updated recent searches array  to the cached data collection of \"Recent Searches\"\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"recent-searches\", docType: \"RECENT_SEARCHES\", products: recentSearchesResultArray},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                // display the updated recent searches to the user\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to remove a search item i.e. a product from the cached \"Recent Searches\"\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array of cached recent searches\r\n         *\r\n         * @param clickedElement {Element} the element that was clicked in order to trigger the product removal\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async removeRecentSearchItem(productIndex, clickedElement){\r\n\r\n            // execute the method is a different event queue\r\n            window.setTimeout(async function(){\r\n                var recentSearchesResultArray = []; // holds the recent searches array\r\n\r\n                try{\r\n                    // get the recent searches collection\r\n                    recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                }\r\n                catch(err){}\r\n\r\n                try{\r\n                    // remove the received 'product' parameter index from the recent searches array\r\n                    recentSearchesResultArray.splice(productIndex, 1);\r\n                    // save the updated recent searches array  to the cached data collection of \"Recent Searches\"\r\n                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                        {_id: \"recent-searches\", docType: \"RECENT_SEARCHES\", products: recentSearchesResultArray},\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                    // hide the list-item belonging to the clicked element from the displayed list\r\n                    let $listItem = $(clickedElement).closest('ons-list-item');\r\n                    await kendo.fx($listItem).expand(\"vertical\").duration(300).reverse();\r\n                    // display the updated recent searches to the user\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0)\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks an item from the Recent Searches List\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array returned of recent searches\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async recentSearchesItemClicked(productIndex){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // get the recent searches collection\r\n                    let recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : recentSearchesResultArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the enter button is clicked on the device keyboard\r\n         *\r\n         * @param keyEvent\r\n         * @returns {Promise<void>}\r\n         */\r\n        async enterButtonClicked(keyEvent){\r\n            // check which key was pressed\r\n            if(keyEvent.which === kendo.keys.ENTER) // if the enter key was pressed\r\n            {\r\n                // prevent the default action from occurring\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopImmediatePropagation();\r\n                keyEvent.stopPropagation();\r\n                // hide the device keyboard\r\n                Keyboard.hide();\r\n\r\n                // get the search autocomplete component\r\n                let searchAutoComplete = $('#search-page #search-page-input').get(0).ej2_instances[0];\r\n                // update the value of the retrieved component\r\n                searchAutoComplete.value = $('#search-page #search-page-input').val();\r\n                searchAutoComplete._allowRemoteSearch = true; // flag the remote search can occur\r\n                searchAutoComplete.dataBind(); // bind new value to the component\r\n                searchAutoComplete.change(); // trigger the change method\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @param queryParam {Object} holds the objects that contains the query\r\n         * params for the type of products to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(queryParam, pageToAccess = queryParam.page || 1,\r\n                           pageSize = queryParam.per_page || 3){\r\n            queryParam.page = pageToAccess;\r\n            queryParam.per_page = pageSize;\r\n\r\n            var productPromisesArray = []; // holds the array for the promises used to load the products\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: queryParam\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // check if the productsArray contains products\r\n                        if(productsArray.length > 0){ // there are products\r\n                            // update the current search results array with the productsArray\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                currentSearchResultsArray = productsArray;\r\n                        }\r\n\r\n                        resolve(productsArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                productPromisesArray.push(Promise.reject(\"no internet connection\"));\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products on the search popover\r\n         *\r\n         * @param productsArray\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(productsArray){\r\n\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let productsContent = \"\"; // holds the contents for the products\r\n\r\n                // check if the productsArray is empty or not\r\n                if(productsArray.length <= 0){ // there are no new content to display\r\n                    // inform the user that no result for the search was founc'\r\n                    $('#search-page-search-input-popover #search-input-popover-list').\r\n                    html(`<ons-list-item modifier=\"nodivider\" lock-on-drag=\"true\">\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center; width: 100%;\">\r\n                                        No Results Found\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`);\r\n                    resolve(productsArray.length); // resolve promise with the length of the products array\r\n                }\r\n                else{ // there are some products to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < productsArray.length; index++){\r\n\r\n                        productsContent +=\r\n                            `<ons-list-item modifier=\"nodivider\" tappable lock-on-drag=\"true\" \r\n                              onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                              searchAutocompletePopOverItemClicked(${index})\">\r\n                                <div class=\"left\">\r\n                                    <div class=\"search-result-image\" style=\"background-image: url('${productsArray[index].images[0].src}'); \r\n                                                            width: 2em; height: 2em\"></div>\r\n                                </div>\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center;\">\r\n                                        ${productsArray[index].name}\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`;\r\n                    }\r\n\r\n                    // append the \"Load More\" search item\r\n                    productsContent +=\r\n                        `<ons-list-item modifier=\"nodivider\" tappable lock-on-drag=\"true\" \r\n                          onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.findMoreClicked();\">\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center; width: 100%; font-weight: bold;\">\r\n                                        Find More...\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`;\r\n                    // attach the new search results to the search popover\r\n                    $('#search-page-search-input-popover #search-input-popover-list').html(productsContent);\r\n\r\n                    resolve(productsArray.length); // resolve the promise with length of the productsArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks an item from the search autocomplete popover\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array returned by the product search\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async searchAutocompletePopOverItemClicked(productIndex){\r\n            // get the product the user clicked on from the search autocomplete popover\r\n            var selectedProduct = utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                currentSearchResultsArray[productIndex];\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // display the products details page using the selected product\r\n                    await $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : selectedProduct}});\r\n\r\n                    // save the selected product in recent products app cache\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                    saveRecentSearchItem(selectedProduct);\r\n\r\n                    // update the value of the search autocomplete input to that which the user clicked on from the popover\r\n                    $('#search-page #search-page-input').val(selectedProduct.name);\r\n\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Find More\" option is\r\n         * tapped within the search input popover\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async findMoreClicked(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products using the user's search term\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"search\":\r\n                            $('#search-page #search-page-input').get(0).ej2_instances[0].value.trim()});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Account page\r\n     */\r\n    accountPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for when the device back button is tapped\r\n                event.target.onDeviceBackButton = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    accountPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n                    let accordion = new ej.navigations.Accordion({\r\n                        expandMode: 'Single'\r\n                    });\r\n                    accordion.appendTo('#account-personal-accordion');\r\n                    accordion.expandItem(true, 0);\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Account\"); // update the title of the page\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(2);\r\n        },\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Login page\r\n     */\r\n    loginPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the login page\r\n         */\r\n        loginFormValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the signup page\r\n         */\r\n        signupFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked;\r\n\r\n                // listen for when the login-carousel has changed/slide used to change screen from login to signup etc\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange);\r\n\r\n                // listen for when the login-carousel has changed/slide used to hide the tooltips for the previous displayed screen\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange);\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator =\r\n                    $('#login-page #login-form').parsley();\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator =\r\n                    $('#login-page #signup-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated);\r\n\r\n                // listen for signup form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for sign up form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated);\r\n\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#login-page .login-page-form-container',).on(\"scroll\", function(){\r\n\r\n                    // place function execution in the event queue to be executed ASAP\r\n                    window.setTimeout(function(){\r\n\r\n                            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                                case 0: // first carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #login-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('login-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 1: // second carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #signup-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('signup-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 2:\r\n\r\n                                    break;\r\n                            }\r\n                        }, 0);\r\n                });\r\n\r\n                try{\r\n                    // create the tooltip objects for the signin form\r\n                    $('#login-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #login-form').get(0));\r\n                    });\r\n\r\n                    // create the tooltip objects for the signup form\r\n                    $('#signup-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #signup-form').get(0));\r\n                    });\r\n\r\n                    // create the button for showing password visibility on the signup page\r\n                    new ej.buttons.Button({\r\n                        isToggle: true,\r\n                        cssClass: 'e-flat e-small e-round',\r\n                        iconCss: \"zmdi zmdi-eye\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo($('#signup-password-view-button', $thisPage).get(0));\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device keyboard is shown\r\n            window.addEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device keyboard is shown\r\n            window.removeEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n\r\n            // hide the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // hide the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Sign In / Sign Up segment buttons are clicked\r\n         *\r\n         * @param itemIndex {Integer} zero-based index representing the carousel item to\r\n         * display ewhen the button is clicked\r\n         */\r\n        segmentButtonClicked(itemIndex){\r\n            // move to the slide item specify by the provided parameter\r\n            $('#login-page #login-carousel').get(0).setActiveIndex(itemIndex);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Password Visibility button is clicked\r\n         *\r\n         * @param buttonElement {HTMLElement} button element being clicked\r\n         *\r\n         * @param inputId {String} the id for the input whose content visibility is being changed\r\n         */\r\n        passwordVisibilityButtonClicked(buttonElement, inputId){\r\n\r\n            // check the state of the button is it 'active' or not\r\n            if(! $(buttonElement).hasClass('e-active')){ // button is not active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"text\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye-off';\r\n                ej2Button.dataBind();\r\n            }\r\n            else{ // button is active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"password\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye';\r\n                ej2Button.dataBind();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * displaying the various screens i.e. login or signup etc\r\n         *\r\n         * @param event\r\n         */\r\n        changeScreenCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel is being shown\r\n            switch(event.originalEvent.activeIndex){ // get the index of the active carousel item\r\n                case 0:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);\r\n\r\n                    break;\r\n\r\n                case 1:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);\r\n                    break;\r\n\r\n                case 2:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * hiding the tooltips on the previously displayed slide\r\n         *\r\n         * @param event\r\n         */\r\n        hideTooltipsCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel item was PREVIOUSLY shown\r\n            switch(event.originalEvent.lastActiveIndex){ // get the index of the LAST active carousel item\r\n                case 0:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 1:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n        /**\r\n         * method is triggered when the keyboard is shown.\r\n         * It is used to adjust the display height\r\n         *\r\n         * @param event\r\n         */\r\n        keyboardShownAdjustView(event){\r\n            // get the height of the keyboard and add 6000px to it\r\n            let adjustedKeyboardHeight = Math.ceil(event.keyboardHeight) + 6000;\r\n\r\n            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                case 0:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 1:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign In\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signinButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign Up\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the login form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loginFormValidated(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign up form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupFormValidated(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Products page\r\n     */\r\n    productsPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 20,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * property holds the index position of the last active\r\n         * navigation tab before user landed on this page\r\n         */\r\n        lastActiveNavTab: 0,\r\n\r\n        /**\r\n         * property holds the current query parameter used to display the products on screen\r\n         */\r\n        currentQueryParam: {},\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle page-infinite-scroll\r\n                event.target.onInfiniteScroll =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageInfiniteScroll;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight =\r\n                    Math.floor($('#products-page .page__content').height());\r\n\r\n\r\n                // listen for the scroll event on the page\r\n                $('#products-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#products-page .page__content').scrollTop());\r\n\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            productsPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                    \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when the navigation tab has changed and update the lastActiveNavTab\r\n                $('#app-main-tabbar').on(\"prechange\", function(event){\r\n                    if(event.originalEvent.index === 4){ // if the tab index is this page, don't update the lastActiveNavTab\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productsPageViewModel.lastActiveNavTab = event.originalEvent.index;\r\n\r\n                });\r\n\r\n                // LISTEN FOR WHEN A PRODUCT CARD IS CLICKED\r\n                $thisPage.on(\"click\", \".e-card\", function(event){\r\n                    // call the method to load the product details page based on the product item clicked\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    productItemClicked(window.parseInt($(event.currentTarget).attr('data-product')),\r\n                        window.parseInt($(event.currentTarget).attr('data-page')));\r\n                });\r\n\r\n                try{\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(event){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // change the title of the screen\r\n            // check if the page content should be reset\r\n            if($('#app-main-navigator').get(0)._resetPageDisplay !== false){ // page content can be refreshed\r\n                // flag that page infinite scroll should NOT be allowed\r\n                event.target._allowInfinitePageScroll = false;\r\n                // show the preloader\r\n                $('#products-page .page-preloader').css(\"display\", \"block\");\r\n                // empty the content of the page\r\n                $('#products-page #products-contents-container').html('');\r\n                // hide the page scroll fab\r\n                $('#products-page #products-page-scroll-top-fab').css({\"display\": \"none\"});\r\n            }\r\n\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(event){\r\n            // flag that page infinite scroll should NOT be allowed\r\n            event.target._allowInfinitePageScroll = false;\r\n            delete $('#app-main-navigator').get(0)._resetPageDisplay;\r\n\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n\r\n            // remove all the infinite load indicator from the bottom of the page (if any exist)\r\n            $('#products-page .page__content .infinite-load-container').remove();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the last active page (tab)\r\n            $('#app-main-tabbar').get(0).\r\n            setActiveTab(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#products-page #products-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam, 1);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // hide the page preloader\r\n                $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#products-page #products-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pageInfiniteScroll(doneCallBack = function(){}){\r\n            // check of page infinite scroll is allowed or not\r\n            if($('#products-page').get(0)._allowInfinitePageScroll === false){ // page infinite scroll is NOT allowed\r\n                doneCallBack();\r\n                return;\r\n            }\r\n\r\n            // append an infinite load indicator to the bottom of the page\r\n            $('#products-page .page__content').\r\n            append(`<div class=\"infinite-load-container\" style=\"text-align: center\">\r\n                        <ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>\r\n                    </div>`);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            let productArray = []; // holds the array of products retrieved for display\r\n\r\n            try{\r\n                // start loading the NEXT page content\r\n                productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam,\r\n                    utopiasoftware[utopiasoftware_app_namespace].\r\n                        controller.productsPageViewModel.currentPage + 1);\r\n                // append the new content to the previous contents\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                displayPageContent(productArray[0], true, false);\r\n\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // check if any new products were retrieved\r\n                if(productArray && productArray[0].length > 0){ // products were retrieve\r\n                    // remove the infinite load indicator from the bottom of the page\r\n                    $('#products-page .page__content .infinite-load-container').remove();\r\n                }\r\n                else{ // no products were retrieved\r\n\r\n                    $('#products-page .page__content .infinite-load-container').css({\"visibility\": \"hidden\"});\r\n                }\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @param queryParam {Object} holds the objects that contains the query\r\n         * params for the type of products to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(queryParam, pageToAccess = queryParam.page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.currentPage + 1,\r\n                             pageSize = queryParam.per_page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.pageSize){\r\n            queryParam.page = pageToAccess;\r\n            queryParam.per_page = pageSize;\r\n\r\n            var productPromisesArray = []; // holds the array for the promises used to load the products\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: queryParam\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(productsArray.length > 0){ // there is data to cache\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentPage = queryParam.page;\r\n                            // update the current query parameter for the page\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentQueryParam = queryParam;\r\n                        }\r\n                        resolve(productsArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested products from cached data\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        resolve(cachedProductsData.products); // resolve the parent promise with the cached products data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products on the app screen\r\n         *\r\n         * @param productsArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(productsArray, appendContent = true, overwriteContent = true){\r\n            for(let index = 0; index < 4; index++){ // REMOVE THIS LATER JUST FOR TEST TODO\r\n                productsArray.push(...productsArray);\r\n            }\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let productsContent = \"\"; // holds the contents for the products\r\n\r\n                // check if the productsArray is empty or not\r\n                if(productsArray.length <= 0){ // there are no new content to display\r\n                    resolve(productsArray.length); // resolve promise with the length of the products array\r\n                }\r\n                else{ // there are some products to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < productsArray.length; index++){\r\n                        if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                            productsArray[index].regular_price = \"0.00\";\r\n                        }\r\n\r\n                        productsContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            productsContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            productsContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        productsContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\" \r\n                        data-product=\"${index}\" \r\n                        data-page=\"${utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage}\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${productsArray[index].images[0].src}');\">\r\n                            ${productsArray[index].on_sale === true ? `\r\n                            <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                            kendo.parseFloat(productsArray[index].regular_price)) /\r\n                            kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                productsArray[index].price : productsArray[index].regular_price))\r\n                            * 100)}% OFF\r\n                             </span>` : \"\"}\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"color: #000000; font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${productsArray[index].name}\r\n                                    </div>\r\n                        <div style=\"color: gold; font-size: 0.6em !important; white-space: nowrap !important; \r\n                        text-overflow: ellipsis; overflow: hidden;\">\r\n                        ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                            `<ons-icon icon=\"md-star\" fixed-width></ons-icon>`.\r\n                        repeat(Math.floor(kendo.parseFloat(productsArray[index].average_rating))):\r\n                            `<ons-icon icon=\"md-star-outline\" style=\"color: lightgray\" fixed-width></ons-icon>`.repeat(5)}\r\n                            <span style=\"display: inline-block; color: gray;\">\r\n                            ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                        `(${productsArray[index].rating_count})` : \"\"}\r\n                           </span>\r\n                        </div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left;\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left; text-decoration: line-through; \r\n                        ${productsArray[index].on_sale === true ? \"visibility: visible\": \"visibility: hidden\"}\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}</div>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                        </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#products-page #products-contents-container').html(productsContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#products-page #products-contents-container').append(productsContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#products-page #products-contents-container').prepend(productsContent);\r\n                        }\r\n                    }\r\n\r\n                    // allow infinite page scroll to be triggered\r\n                    $('#products-page').get(0)._allowInfinitePageScroll = true;\r\n                    resolve(productsArray.length); // resolve the promise with length of the productsArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#products-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks any product item from the products collection\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the 'appropriate' cached array of product items\r\n         *\r\n         * @param productPage {Integer} specifies which query page/collection from the cached products\r\n         * the clicked product item belongs to.\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async productItemClicked(productIndex, productPage){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n\r\n                try{\r\n                    // get the product items collection\r\n                    let productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData((\"\" + productPage).padStart(7, \"0\") + \"products\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : productItemsArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Product Details page\r\n     */\r\n    productDetailsPageViewModel: {\r\n\r\n        /**\r\n         * holds the object which contains the current product and its details\r\n         */\r\n        currentProductDetails: null,\r\n\r\n        /**\r\n         * holds the index position (within the productVaritionsArray) of the\r\n         * current product variation selected by the user\r\n         */\r\n        currentProductVariationIndex: -1,\r\n\r\n        /**\r\n         * holds the product variations array\r\n         */\r\n        productVariationsArray: [],\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#product-details-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#product-details-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"Pick Quantity\" button\r\n                    new ej.inputs.NumericTextBox({\r\n                        cssClass: 'product-details-quantity-class',\r\n                        currency: null,\r\n                        decimals: 0,\r\n                        floatLabelType: 'Auto',\r\n                        format: 'n',\r\n                        showSpinButton: false,\r\n                        min: 1,\r\n                        max: 10,\r\n                        placeholder: 'Pick Quantity',\r\n                        step: 1,\r\n                        strictMode: true,\r\n                        // sets value to the NumericTextBox\r\n                        value: 1\r\n                    }).appendTo('#product-details-quantity');\r\n\r\n                    // create the \"Add To Cart\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#product-details-add-to-cart');\r\n\r\n                    // create the \"Customise\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-brush utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-customise-product');\r\n\r\n                    // create the \"Review\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-small',\r\n                        iconCss: \"zmdi zmdi-star-outline\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-review');\r\n\r\n                    // create the \"Share\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-small',\r\n                        iconCss: \"zmdi zmdi-share\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-share');\r\n\r\n                    // load product variations asynchronously without waiting for the response\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.loadProductVariations();\r\n                    // load product details\r\n                    let productDetailsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.loadProduct();\r\n                    // display the loaded product details\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.displayProductDetails(productDetailsArray[0]);\r\n                    // enable the \"Add To Cart\" button\r\n                    $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide the preloader\r\n                    $('#product-details-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy properties\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.currentProductDetails = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.currentProductVariationIndex = -1;\r\n            // reset the product variations array\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.productVariationsArray = [];\r\n\r\n            // destroy the ej2 components on the page\r\n            $('#product-details-quantity').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-review').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-share').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-customise-product').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy any product variation dropdown list\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                element.ej2_instances[0].destroy(); // destroy the dropdown list component\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get the pages stack from the app main navigator\r\n            var pagesStackArray = $('#app-main-navigator').get(0).pages;\r\n\r\n            // check that there is more than 1 page in the stack\r\n            if(pagesStackArray.length > 1){ // there is more than 1 page in the page stack\r\n                // get the previous Page in stack before this one\r\n                let previousPage = $(pagesStackArray[pagesStackArray.length - 2]).get(0);\r\n\r\n                // check which page has is being displayed AFTER a page was popped\r\n                switch(previousPage.id){\r\n                    case \"app-main-page\": // the page that is being displayed is the \"App-Main\" page\r\n                        // check which page on the app-main tab is visible\r\n                        if($('#app-main-tabbar').get(0).getActiveTabIndex() === 4){ // the \"Products\" page is visible\r\n                            // get back to the previous page on the app-main navigator stack\r\n                            // and set the 'resetPageDisplay' to false\r\n                            $('#app-main-navigator').get(0)._resetPageDisplay = false;\r\n                            // allow infinite page scroll to be triggered on the \"Products\" page\r\n                            $('#products-page').get(0)._allowInfinitePageScroll = true;\r\n                            $('#app-main-navigator').get(0).popPage();\r\n                        }\r\n                        else{\r\n                            // get back to the previous page on the app-main navigator stack\r\n                            $('#app-main-navigator').get(0).popPage();\r\n                        }\r\n                        break;\r\n                    default:\r\n                        // get back to the previous page on the app-main navigator stack\r\n                        $('#app-main-navigator').get(0).popPage();\r\n                        break\r\n                }\r\n            }\r\n            else{ // there is only 1 page in the stack\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Share\" button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async shareButtonClicked(){\r\n            var shareOptions = {}; // holds the options for sharing\r\n            shareOptions.message = \"check out this #ShopOakExclusive product\";\r\n            shareOptions.chooserTitle = \"share product with...\";\r\n\r\n            // handle the task in a separate event block\r\n            window.setTimeout(function(){\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the index of the currently selected variation\r\n                    let productVariationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductVariationIndex;\r\n                    // get the currently selected product variation using the selected index\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        productVariationsArray[productVariationIndex];\r\n                    // update the url for the product\r\n                    shareOptions.url = productVariation.permalink;\r\n                    // update the file/image of the product to be share\r\n                    shareOptions.files = [productVariation.image && productVariation.image !== \"\"? productVariation.image.src :\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                            currentProductDetails.images[0].src];\r\n                }\r\n                else{ // no product variation was selected, so use the default product details\r\n                    shareOptions.url = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductDetails.permalink;\r\n                    // update the file/image of the product to be share\r\n                    shareOptions.files = [utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductDetails.images[0].src];\r\n                }\r\n\r\n                // also copy the text to clipboard\r\n                cordova.plugins.clipboard.copy(`${shareOptions.message} | ${shareOptions.url}`,\r\n                    function(){\r\n                        // inform the user that message has been copied to clipboard\r\n                        window.plugins.toast.showWithOptions({\r\n                            message: \"shared message copied to clipboard\",\r\n                            duration: 3000,\r\n                            position: \"center\",\r\n                            styling: {\r\n                                cornerRadius: 0,\r\n                                opacity: 1,\r\n                                backgroundColor: '#3F51B5',\r\n                                textColor: '#FFFFFF',\r\n                                textSize: 14\r\n                            }\r\n                        });\r\n                    }, function(){});\r\n                // open the device share dialog\r\n                window.plugins.socialsharing.shareWithOptions(shareOptions, function(){}, function(){});\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#product-details-page #product-details-page-pull-hook').attr(\"disabled\", true);\r\n\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            // disable the \"Add To Cart\" button\r\n            $('#product-details-page #product-details-add-to-cart').attr(\"disabled\", true);\r\n            // remove the spinner from the 'Add To Cart'\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop();\r\n\r\n            try{\r\n                // load product variations asynchronously without waiting for the response\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.loadProductVariations();\r\n                // load product details\r\n                let productDetailsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.loadProduct();\r\n                // display the loaded product details\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.displayProductDetails(productDetailsArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#product-details-page #product-details-page-pull-hook').removeAttr(\"disabled\");\r\n                // enable the \"Add To Cart\" button\r\n                $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product detail.\r\n         *\r\n         * The product to be loaded can be directly passed to the page for loading OR\r\n         * the id of the product can be provided to the page, so that the product is\r\n         * retrieved from the remote server\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProduct(){\r\n            var productPromisesArray = []; // holds the array for the promises used to load the product\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to see updated product details`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            // check if all the product details were provided to the page\r\n            if($('#app-main-navigator').get(0).topPage.data.product){ // all product details were provided\r\n                let aProduct = $('#app-main-navigator').get(0).topPage.data.product; // get the product details\r\n\r\n                if(!aProduct.regular_price || aProduct.regular_price == \"\"){ // regular price was NOT set, so set it\r\n                    aProduct.regular_price = \"0.00\";\r\n                }\r\n\r\n                // set the current product to that which was provided to the page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductDetails = aProduct;\r\n\r\n                productPromisesArray.push(Promise.resolve(aProduct)); // resolve the promise with the product details\r\n            }\r\n            else{ // at least the product id was provided\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/products/${jQuery('#app-main-navigator').get(0).topPage.data.productId}`,\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true\r\n                        }\r\n                    )).then(function(product){\r\n                        if(!product.regular_price || product.regular_price == \"\"){ // regular price was NOT set, so set it\r\n                            product.regular_price = \"0.00\";\r\n                        }\r\n                        // set the current product to that which was retrieved from the server\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                            currentProductDetails = product;\r\n                        resolve(product); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a Promise which resolves when all promises resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product variations.\r\n         *\r\n         * The product variations to be loaded is gotten from the product directly passed to the page OR\r\n         * the prduct id passed to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProductVariations(){\r\n            var productPromisesArray = []; // holds the array for the promises used to load the product\r\n            var productId = null; // holds the product id\r\n\r\n            // check if all the product details were provided to the page\r\n            if($('#app-main-navigator').get(0).topPage.data.product){ // all product details were provided\r\n                // save the product id\r\n                productId = $('#app-main-navigator').get(0).topPage.data.product.id;\r\n\r\n            }\r\n            else{ // at least the product id was provided\r\n                // save the product id\r\n                productId = jQuery('#app-main-navigator').get(0).topPage.data.productId;\r\n            }\r\n\r\n            // load the requested products variations from the server\r\n            productPromisesArray.push(new Promise(function(resolve, reject){\r\n                Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/products/${productId}/variations`,\r\n                        type: \"get\",\r\n                        //contentType: \"application/x-www-form-urlencoded\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: true,\r\n                        data: {page: 1, per_page: 99, status: 'publish'}\r\n                    }\r\n                )).then(function(productVariations){\r\n                    // map the retrieved variations and save the unique value for the variation.\r\n                    // The unique value is used to uniquely identify the variation\r\n                    productVariations = productVariations.map(function(currentElement, index){\r\n                        // join all options from the variation attributes to create a unique value\r\n                        currentElement._variationValue = currentElement.attributes.map(function(attribute){\r\n                            return attribute.option;\r\n                        }).join(\"\");\r\n\r\n                        return currentElement;\r\n                    });\r\n\r\n                    // save the retrieved production variations\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.productVariationsArray = productVariations;\r\n\r\n                    resolve(productVariations); // resolve the parent promise with the data gotten from the server\r\n\r\n                }).catch(function(err){ // an error occurred\r\n\r\n                    reject(err); // reject the parent promise with the error\r\n                });\r\n            }));\r\n\r\n            return Promise.all(productPromisesArray); // return a Promise which resolves when all promises resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the product details on the page\r\n         *\r\n         * @param productDetails {Object} the product object to be displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayProductDetails(productDetails){\r\n            // update the product details image\r\n            $('#product-details-page .e-card-image').css(\"background-image\", `url(\"${productDetails.images[0].src}\")`);\r\n\r\n            // check if the product is on-sale\r\n            if(productDetails.on_sale === true){ // product is on-sale\r\n                $('#product-details-page .e-card-image').\r\n                html(`\r\n                <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productDetails.price) -\r\n                    kendo.parseFloat(productDetails.regular_price)) /\r\n                    kendo.parseFloat(productDetails.regular_price === \"0.00\" ?\r\n                        productDetails.price : productDetails.regular_price))\r\n                    * 100)}% OFF\r\n                 </span>`);\r\n            }\r\n\r\n            // update the product title/name\r\n            $('#product-details-page .e-card-title').html(`${productDetails.name}`);\r\n            // update product price\r\n            $('#product-details-page .product-details-price').\r\n            html(`&#x20a6;${kendo.toString(kendo.parseFloat(productDetails.price), \"n2\")}`);\r\n\r\n            // check if product is on-sale\r\n            if(productDetails.on_sale === true){ // product is on-sale\r\n                // update the regular price\r\n                $('#product-details-page .product-details-regular-price').\r\n                html(`&#x20a6;${kendo.toString(kendo.parseFloat(productDetails.regular_price), \"n2\")}`);\r\n                // make the regular price visible\r\n                $('#product-details-page .product-details-regular-price').css(\"visibility\", \"visible\");\r\n                // add 'sales' class to the quantity component\r\n                $('#product-details-quantity').get(0).ej2_instances[0].cssClass = \"product-details-quantity-class sales\";\r\n                $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n            }\r\n            else{ // product is NOT on-sale\r\n                // make the regular price invisible\r\n                $('#product-details-page .product-details-regular-price').css(\"visibility\", \"collapse\");\r\n                // remove 'sales' class from the quantity component\r\n                $('#product-details-quantity').get(0).ej2_instances[0].cssClass = \"product-details-quantity-class\";\r\n                $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n            }\r\n\r\n            // reset the product details quantity numeric input field\r\n            $('#product-details-quantity').get(0).ej2_instances[0].value = 1;\r\n            $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n\r\n            // update the product details description\r\n            $('#product-details-page .product-details-description').html(`${productDetails.short_description}`);\r\n\r\n            // destroy any previous product variation dropdown list that may previously exist before creating the new ones\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                element.ej2_instances[0].destroy(); // destroy the dropdown list component\r\n            });\r\n\r\n            // add/update product details variation\r\n            // expand the variations content\r\n            $('#product-details-page .product-details-variations').removeClass('expandable-content');\r\n            let variationContent = ''; // holds the product details variation content\r\n            for(let index = 0; index < productDetails.attributes.length; index++){\r\n                // create the product details variations\r\n                variationContent += `<div class=\"col-xs-4\" style=\"padding-right: 5px; padding-left: 5px;\">\r\n                    <select name=\"${productDetails.attributes[index].name}\" class=\"product-details-variation-option\">\r\n                        ${productDetails.attributes[index].options.map(function(arrayElem){\r\n                            return `<option value=\"${arrayElem}\">${arrayElem}</option>`;\r\n                }).join(\"\")}\r\n                    </select>\r\n                </div>`;\r\n            }\r\n            // insert the created Select inputs to the page\r\n            $('#product-details-page .product-details-variations').html(variationContent);\r\n\r\n            // create the dropdown list from each of the select input\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                // check if this product details has default attributes set\r\n                if(productDetails.default_attributes.length > 0){ // there are default attributes\r\n                    // set those default attributes for the variations\r\n                    $(`option[value=\"${productDetails.default_attributes[index].option}\"]`, element).attr(\"selected\", true);\r\n                }\r\n                // create the dropdown list from the select input\r\n                new ej.dropdowns.DropDownList(\r\n                    {\r\n                        cssClass: \"product-details-variation-class\",\r\n                        placeholder: productDetails.attributes[index].name,\r\n                        floatLabelType: 'Always',\r\n                        change: async function () { // listen for when dropdown list value changes\r\n                            // return a Promise which resolves when the change is completed\r\n                            return new Promise(function(resolve2, reject2){\r\n\r\n                                // handle the change in a separate event block\r\n                                window.setTimeout(async function(){\r\n                                    let concatenatedVarationValue = \"\"; // holds the concatenated variation values\r\n                                    // get the value from all the variation select-input/dropdown and concatenate them\r\n                                    $('#product-details-page .product-details-variation-option').each(function(index2, element2){\r\n                                        concatenatedVarationValue += element2.ej2_instances[0].value;\r\n                                    });\r\n\r\n                                    // since the concatenated variation value, is also what is used to uniquely identify each varition,\r\n                                    // check if there is any variation with the same unique value has the concatenated variation value.\r\n                                    // Also, assign the index position of the 'found' variation (if anty) to the current variation index property\r\n                                    let variationIndexPosition =\r\n                                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        productDetailsPageViewModel.productVariationsArray.findIndex(function(element3){\r\n                                            return concatenatedVarationValue === element3._variationValue;\r\n                                        });\r\n                                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                                        currentProductVariationIndex = variationIndexPosition;\r\n\r\n                                    // check if there is a product variation that matches the user's selection\r\n                                    if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                                        currentProductVariationIndex !== -1){ // there is a product variation\r\n                                        // get the product variation\r\n                                        let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                            productDetailsPageViewModel.productVariationsArray[variationIndexPosition];\r\n                                        // update the product details display image and price to that of the selected variation (if any)\r\n                                        if(productVariation.image && productVariation.image !== \"\"){\r\n                                            // update the product details image\r\n                                            $('#product-details-page .e-card-image').css(\"background-image\",\r\n                                                `url(\"${productVariation.image.src}\")`);\r\n                                        }\r\n                                        if(productVariation.price && productVariation.price !== \"\"){\r\n                                            // update product price\r\n                                            $('#product-details-page .product-details-price').\r\n                                            html(`&#x20a6;${kendo.toString(kendo.parseFloat(productVariation.price), \"n2\")}`);\r\n                                        }\r\n                                    }\r\n\r\n                                    // resolve the parent Promise object to signified that change is completed\r\n                                    resolve2();\r\n\r\n                                }, 0);\r\n                            });\r\n                        }\r\n                    }).appendTo(element);\r\n            });\r\n\r\n            // collapse the variations content\r\n            $('#product-details-page .product-details-variations').addClass('expandable-content');\r\n\r\n            // update the rating for the product details\r\n            $('#product-details-page .product-details-rating').\r\n            html(`\r\n            ${Math.floor(kendo.parseFloat(productDetails.average_rating)) > 0 ?\r\n                '<ons-icon icon=\"md-star\" fixed-width></ons-icon>'.\r\n                repeat(Math.floor(kendo.parseFloat(productDetails.average_rating))) :\r\n                '<ons-icon icon=\"md-star-outline\" style=\"color: lightgray\" fixed-width></ons-icon>'.repeat(5)}\r\n                <span style=\"display: inline-block; color: gray;\">\r\n                ${Math.floor(kendo.parseFloat(productDetails.average_rating)) > 0 ? \r\n                `(${productDetails.rating_count})` : \"\"}\r\n                </span>\r\n            `);\r\n\r\n            // update the extra/more details for the product\r\n            $('#product-details-page .product-details-more-description').html(`\r\n            ${productDetails.description}`);\r\n\r\n            // update the dimensions for the product details\r\n            $('#product-details-page .product-details-dimensions').html(`\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">length - ${!productDetails.dimensions.length ||\r\n            productDetails.dimensions.length == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.length}`}</span>\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">width - ${!productDetails.dimensions.width ||\r\n            productDetails.dimensions.width == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.width}`}</span>\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">height - ${!productDetails.dimensions.height ||\r\n            productDetails.dimensions.height == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.height}`}</span>`);\r\n\r\n            // update the weight for the product\r\n            $('#product-details-page .product-details-weight').html(`${!productDetails.weight ||\r\n            productDetails.weight == \"\" ? \"(Not Available)\" : `${productDetails.weight}`}`);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the customise button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async customiseButtonClicked(){\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to customise product`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // perform the method task in a separate event block\r\n            window.setTimeout(async function(){\r\n                var productUrl = \"\"; // holds the url for the product being customised\r\n\r\n                // check if the user has selected a product variation or if the default product is being customised\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the index position of the selected variation\r\n                    let variationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductVariationIndex;\r\n                    // get the production variation object\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        productVariationsArray[variationIndex];\r\n                    productUrl = productVariation.permalink; // set the product url\r\n                }\r\n                else{ // no product variation was selected, so use the default product details\r\n                    productUrl = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductDetails.permalink; // set the product url\r\n                }\r\n\r\n                // load the \"Customise Product\" page to the app-main-navigator\r\n                await $('#app-main-navigator').get(0).pushPage(\"customise-product-page.html\");\r\n                // load the product customisation url\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    customiseProductPageViewModel.loadProductCustomisation(productUrl);\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Add To Cart\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async addToCartButtonClicked(){\r\n\r\n            // disable the \"Add To Cart\" button\r\n            $('#product-details-page #product-details-add-to-cart').attr(\"disabled\", true);\r\n            // add the spinner from the 'Add To Cart'\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = '';\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].start();\r\n\r\n            // perform the task of including the product into the local cart in a separate event block\r\n            window.setTimeout(async function(){\r\n                let localCart = []; // holds the local cart collection\r\n                let utopiasoftwareCartObject = {cartData: {}}; // holds the object whose properties make up the cart item\r\n\r\n                // get the cached user cart\r\n                try{\r\n                    localCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(\"user-cart\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n                }\r\n                catch(err){}\r\n\r\n                // check if a product variation was selected\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the selected product variation index position and the accompanying variation object\r\n                    let variationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductVariationIndex;\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.productVariationsArray[variationIndex];\r\n\r\n                    utopiasoftwareCartObject.cartData.variation_id = productVariation.id;\r\n\r\n                    // get the search parameters object from the product variation url\r\n                    let searchParams = new URLSearchParams(productVariation.permalink.split(\"?\")[1]);\r\n                    // get the variation attributes from searchParams object and assign them in cartData object\r\n                    utopiasoftwareCartObject.cartData.variation = {};\r\n                    for(let [key, value] of searchParams){\r\n                        utopiasoftwareCartObject.cartData.variation[key] = value;\r\n                    }\r\n\r\n                    // store the product variation object as additional data just for the mobile app\r\n                    utopiasoftwareCartObject.productVariation = productVariation;\r\n                }\r\n                // set the other properties of the cart data\r\n                utopiasoftwareCartObject.cartData.product_id = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductDetails.id;\r\n                utopiasoftwareCartObject.cartData.quantity = $('#product-details-quantity').get(0).ej2_instances[0].value;\r\n\r\n                // store the product object as additional data just for the mobile app\r\n                utopiasoftwareCartObject.product = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductDetails;\r\n\r\n                try{\r\n                    // add the created 'utopiasoftwareCartObject' to the user cart collection\r\n                    localCart.push(utopiasoftwareCartObject);\r\n                    // save the updated cached user cart\r\n                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                        {_id: \"user-cart\", docType: \"USER_CART\", cart: localCart},\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                    // inform the user that the product has been added to cart\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'success-ej2-toast';\r\n                    toast.timeOut = 2000;\r\n                    toast.content = `Product added to cart`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n\r\n                    console.log(\"USER CART OBJECT\", utopiasoftwareCartObject);\r\n                }\r\n                catch(err){\r\n                    console.log(\"PRODUCT DETAILS ERROR\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.timeOut = 3500;\r\n                    toast.content = `Error adding product to cart. Try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // enable the \"Add To Cart\" button\r\n                    $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n                    // hide the spinner from the 'Add To Cart'\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop();\r\n                }\r\n\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Customise Product page\r\n     */\r\n    customiseProductPageViewModel: {\r\n\r\n        /**\r\n         * holds the current customisation url that has been loaded\r\n         */\r\n        currentCustomisationUrl : \"\",\r\n\r\n        /**\r\n         * holds the number of times the customisation page has been loaded from the parent server\r\n         */\r\n        customisationPageLoadCount: 0,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#customise-product-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for listening to messages from the parent site\r\n                window.addEventListener(\"message\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    customiseProductPageViewModel.receiveMessageListener, false);\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#customise-product-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#customise-product-cancel');\r\n\r\n                    // create the \"Add To Cart\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#customise-product-add-to-cart');\r\n\r\n\r\n                }\r\n                catch(err){\r\n                    console.log(\"CUSTOMISATION ERROR\", err);\r\n                }\r\n                finally {\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // reset the current customisation url\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.currentCustomisationUrl = \"\";\r\n\r\n            // remove listener for listening to messages from the parent site\r\n            window.removeEventListener(\"message\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.receiveMessageListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n            $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to customise product\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to handle the receipt of messages from the parent website\r\n         *\r\n         * @param receiveEvent {Event} this is the event object of the \"Message\" event\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async receiveMessageListener(receiveEvent){\r\n            // check where the message originated from\r\n            if(receiveEvent.origin !== \"https://shopoakexclusive.com\"){ // message is not from the parent website\r\n                return; // exit\r\n            }\r\n\r\n            // check the data that was sent\r\n            if(receiveEvent.data === \"page ready\"){ // parent site is ready to work together\r\n                // update the customisation page load count by 1\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                    customisationPageLoadCount += 1;\r\n\r\n                // remove the page preloader\r\n                $('#customise-product-page .page-preloader').css(\"display\", \"none\");\r\n                // enable the \"Add To Cart\" button\r\n                $('#customise-product-page #customise-product-add-to-cart').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Add To Cart'\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();\r\n                return;\r\n            }\r\n\r\n            let userCartData = JSON.parse(receiveEvent.data);\r\n            console.log(\"USER CART\", userCartData);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // show the page preloader\r\n            $('#customise-product-page .page-preloader').css(\"display\", \"block\");\r\n            // disable the \"Add To Cart\" button\r\n            $('#customise-product-page #customise-product-add-to-cart').attr(\"disabled\", true);\r\n            // remove the spinner from the 'Add To Cart'\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();\r\n\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#customise-product-page #customise-product-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // reload the current product customisation url into the iframe\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n               customiseProductPageViewModel.loadProductCustomisation();\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                window.setTimeout(function(){ // wait for 2 sec before declaring loading done\r\n                    // enable pull-to-refresh widget till loading is done\r\n                    $('#customise-product-page #customise-product-page-pull-hook').removeAttr(\"disabled\");\r\n                    // signal that loading is done\r\n                    doneCallBack();\r\n                }, 2000);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product/product variation customisation.\r\n         *\r\n         * @param customisationUrl {String} holds the url for the product to be customised\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProductCustomisation(customisationUrl = utopiasoftware[utopiasoftware_app_namespace].\r\n            controller.customiseProductPageViewModel.currentCustomisationUrl){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to customise product and Pull Down to refresh`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // load the specified url into the customisation iframe\r\n            $('#customise-product-page #customise-product-page-iframe').attr(\"src\", customisationUrl);\r\n\r\n            // update the current customisation url\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                currentCustomisationUrl = customisationUrl;\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Add To Cart\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async addToCartButtonClicked(){\r\n\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to add customised product to cart`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // show the spinner on the 'Add To Cart' button to indicate process is ongoing\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = '';\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].start();\r\n\r\n            // call the method to submit the product customisation form located in the iframe window\r\n            $('#customise-product-page #customise-product-page-iframe').get(0).contentWindow.utopiasoftware_addUsage();\r\n        }\r\n    }\r\n};"]}