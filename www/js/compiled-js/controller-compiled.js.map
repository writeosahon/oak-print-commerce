{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 18/11/2018.\r\n */\r\n\r\n/**\r\n* file defines all View-Models, Controllers and Event Listeners used by the app\r\n*\r\n* The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n* The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n* also used interchangeably\r\n*/\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n    /**\r\n     * method contains the startup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // create the ej2 toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 0,\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.page-toast').get(0));\r\n\r\n            if(true){ // there is a previous logged in user\r\n                // load the app main page\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n\r\n            }\r\n            else{ // there is no previously logged in user\r\n                // load the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n\r\n                // create the pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase = new PouchDB('PrintServiceEcommerce.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // create the encrypted pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase =\r\n                    new PouchDB('PrintServiceEcommerceEncrypted.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // generate a password for encrypting the app database (if it does NOT already exist)\r\n                let secureKey = null;\r\n                try {\r\n                    // get secure key, if it exists\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.getItem(\"utopiasoftware-oak-print-service-secure-key\",resolve, reject);\r\n                    });\r\n                }\r\n                catch(err){ // secure key does not exist\r\n                    // create the secure key\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.setItem(\"utopiasoftware-oak-print-service-secure-key\",\r\n                            {password: Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},\r\n                            resolve, reject);\r\n                    });\r\n                }\r\n                // enable the db encryption using the generated password\r\n                await new Promise(function(resolve, reject){\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.\r\n                    crypto(secureKey.password, {\r\n                        ignore: ['_attachments', '_deleted'],\r\n                        cb: function(err, key){\r\n                            if(err){ // there is an error\r\n                                reject(err); // reject Promise\r\n                            }\r\n                            else{ // no error\r\n                                resolve(key); // resolve Promise\r\n                            }\r\n                        }});\r\n                });\r\n\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n                // set status bar color\r\n                StatusBar.backgroundColorByHexString(\"#363E7C\");\r\n                navigator.splashscreen.hide(); // hide the splashscreen\r\n                utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fully loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Home page\r\n     */\r\n    homePageViewModel: {\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"New Products\"\r\n         */\r\n        newProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Featured Products\"\r\n         */\r\n        featuredProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Sales Products\"\r\n         */\r\n        salesProductsCarousel: null,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"New Products\" carousel\r\n                    let newProductsCarousel = new Flickity($('#home-page #home-latest-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        // adaptiveHeight: true,\r\n                        imagesLoaded: true,\r\n                        cellSelector: '.col-xs-12',\r\n                        autoPlay: 5000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'left',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    newProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(newProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(newProductsCarousel._utopiasoftware_scrollTimer);\r\n                            newProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        newProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            newProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    newProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"New Product\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel =\r\n                        newProductsCarousel;\r\n\r\n                    // create the \"Featured Products\" carousel\r\n                    let featuredProductsCarousel = new Flickity($('#home-page #home-featured-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-5',\r\n                        autoPlay: 4000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    featuredProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(featuredProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(featuredProductsCarousel._utopiasoftware_scrollTimer);\r\n                            featuredProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        featuredProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            featuredProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    featuredProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"Featured Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel =\r\n                        featuredProductsCarousel;\r\n\r\n                    let salesProductsCarousel = new Flickity($('#home-page #home-sales-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-5',\r\n                        autoPlay: 4500,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    salesProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(salesProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(salesProductsCarousel._utopiasoftware_scrollTimer);\r\n                            salesProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        salesProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            salesProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    salesProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"Sales Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel =\r\n                        salesProductsCarousel;\r\n\r\n                    $('#loader-modal').get(0).hide(); // show loader\r\n\r\n                    // display page preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"block\");\r\n\r\n                    // start loading the page content\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n\r\n                    // hide the preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n                catch(err){\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the carousels\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n            newProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                newProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            ons.notification.confirm('Do you want to close the app?',\r\n                {title: '<img src=\"css/app-images/oak-design-logo.png\" style=\"height: 1.5em; width: auto; margin-right: 0.5em\">Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see live products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#home-page #home-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#home-page #home-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n            /**\r\n         * method is used to load all products to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(){\r\n            var productTypesPromisesArray = []; // holds the array for all the promises of the product types to be loaded\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load latest products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                            \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"latest-products\", docType: \"LATEST_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-5').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"css/app-images/test-ad-1.jpg\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"featured\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // save the retrieved data to app database as cache\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: \"featured-products\", docType: \"FEATURED_PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-5').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-5\" style=\"padding-left: 0.5em; padding-right: 0.5em;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"on_sale\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // save the retrieved data to app database as cache\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: \"sales-products\", docType: \"SALES_PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-5').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-5\" style=\"padding-left: 0.5em; padding-right: 0.5em;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.8em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see live products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load latest products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"latest-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).\r\n                    then(function(productsArray){\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-5').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-5\" style=\"padding-left: 0.5em; padding-right: 0.5em;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"featured-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-5').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-5\" style=\"padding-left: 0.5em; padding-right: 0.5em;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"sales-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-5').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-5\" style=\"padding-left: 0.5em; padding-right: 0.5em;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                            <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.8em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) * 100)}% OFF\r\n                                            </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>                                         \r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productTypesPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Categories page\r\n     */\r\n    categoriesPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 20,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n\r\n                    // start loading the page content\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();\r\n\r\n                    // hide the preloader\r\n                    $('#categories-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n                catch(err){\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated categories\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#categories-page #categories-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#categories-page #categories-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products categories to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadCategories(pageToAccess = utopiasoftware[utopiasoftware_app_namespace].\r\n                                            controller.categoriesPageViewModel.currentPage + 1,\r\n                             pageSize = utopiasoftware[utopiasoftware_app_namespace].\r\n                                        controller.categoriesPageViewModel.pageSize){\r\n            var categoryPromisesArray = []; // holds the array for the promises used to load the product categories\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested categories list from the server\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products/categories\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"asc\", \"orderby\": \"name\", \"hide_empty\": \"true\",\r\n                                \"page\": pageToAccess, \"per_page\": pageSize}\r\n                        }\r\n                    )).then(function(categoriesArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(categoriesArray.length > 0){ // there is data to cache\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\");\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCT_CATEGORIES\", categories: categoriesArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                        }\r\n                        resolve(categoriesArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD CATEGORY\", err);\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading product categories with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated categories\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested product categories from cached data\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\");\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedCategoriesData){\r\n                        resolve(cachedCategoriesData.categories); // resolve the parent promise with the cached categories data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD CATEGORY\", err);\r\n                        reject(); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(categoryPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Account page\r\n     */\r\n    accountPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                try{\r\n                    let accordion = new ej.navigations.Accordion({\r\n                        expandMode: 'Single'\r\n                    });\r\n                    accordion.appendTo('#account-personal-accordion');\r\n                    accordion.expandItem(true, 0);\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Login page\r\n     */\r\n    loginPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the login page\r\n         */\r\n        loginFormValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the signup page\r\n         */\r\n        signupFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked;\r\n\r\n                // listen for when the login-carousel has changed/slide used to change screen from login to signup etc\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange);\r\n\r\n                // listen for when the login-carousel has changed/slide used to hide the tooltips for the previous displayed screen\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange);\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator =\r\n                    $('#login-page #login-form').parsley();\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator =\r\n                    $('#login-page #signup-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated);\r\n\r\n                // listen for signup form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for sign up form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated);\r\n\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#login-page .login-page-form-container',).on(\"scroll\", function(){\r\n\r\n                    // place function execution in the event queue to be executed ASAP\r\n                    window.setTimeout(function(){\r\n                        console.log(\"CAROUSEL SCROLL\");\r\n                            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                                case 0: // first carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #login-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('login-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 1: // second carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #signup-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('signup-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 2:\r\n\r\n                                    break;\r\n                            }\r\n                        }, 0);\r\n                });\r\n\r\n                try{\r\n                    // create the tooltip objects for the signin form\r\n                    $('#login-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #login-form').get(0));\r\n                    });\r\n\r\n                    // create the tooltip objects for the signup form\r\n                    $('#signup-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #signup-form').get(0));\r\n                    });\r\n\r\n                    // create the button for showing password visibility on the signup page\r\n                    new ej.buttons.Button({\r\n                        isToggle: true,\r\n                        cssClass: 'e-flat e-small e-round',\r\n                        iconCss: \"zmdi zmdi-eye\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo($('#signup-password-view-button', $thisPage).get(0));\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device keyboard is shown\r\n            window.addEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device keyboard is shown\r\n            window.removeEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n\r\n            // hide the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // hide the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Sign In / Sign Up segment buttons are clicked\r\n         *\r\n         * @param itemIndex {Integer} zero-based index representing the carousel item to\r\n         * display ewhen the button is clicked\r\n         */\r\n        segmentButtonClicked(itemIndex){\r\n            // move to the slide item specify by the provided parameter\r\n            $('#login-page #login-carousel').get(0).setActiveIndex(itemIndex);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Password Visibility button is clicked\r\n         *\r\n         * @param buttonElement {HTMLElement} button element being clicked\r\n         *\r\n         * @param inputId {String} the id for the input whose content visibility is being changed\r\n         */\r\n        passwordVisibilityButtonClicked(buttonElement, inputId){\r\n\r\n            // check the state of the button is it 'active' or not\r\n            if(! $(buttonElement).hasClass('e-active')){ // button is not active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"text\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye-off';\r\n                ej2Button.dataBind();\r\n            }\r\n            else{ // button is active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"password\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye';\r\n                ej2Button.dataBind();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * displaying the various screens i.e. login or signup etc\r\n         *\r\n         * @param event\r\n         */\r\n        changeScreenCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel is being shown\r\n            switch(event.originalEvent.activeIndex){ // get the index of the active carousel item\r\n                case 0:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);\r\n\r\n                    break;\r\n\r\n                case 1:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);\r\n                    break;\r\n\r\n                case 2:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * hiding the tooltips on the previously displayed slide\r\n         *\r\n         * @param event\r\n         */\r\n        hideTooltipsCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel item was PREVIOUSLY shown\r\n            switch(event.originalEvent.lastActiveIndex){ // get the index of the LAST active carousel item\r\n                case 0:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 1:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n        /**\r\n         * method is triggered when the keyboard is shown.\r\n         * It is used to adjust the display height\r\n         *\r\n         * @param event\r\n         */\r\n        keyboardShownAdjustView(event){\r\n            // get the height of the keyboard and add 6000px to it\r\n            let adjustedKeyboardHeight = Math.ceil(event.keyboardHeight) + 6000;\r\n\r\n            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                case 0:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 1:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign In\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signinButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign Up\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the login form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loginFormValidated(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign up form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupFormValidated(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Products page\r\n     */\r\n    productsPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for when the \"product-layout\" segment is clicked\r\n                $('#products-page #products-layout-segment').on(\"postchange\", function(postChangeEvent){\r\n                    \r\n                    // check which tab was clicked and act accordingly\r\n                    switch (postChangeEvent.originalEvent.index) {\r\n                        case 0:\r\n                            // user selected to display items in 2-column\r\n                            $('#products-page .col-xs-12').removeClass('col-xs-12').addClass('col-xs-6');\r\n                            break;\r\n\r\n                        case 1:\r\n                            // user selected to display items in 1-column\r\n                            $('#products-page .col-xs-6').removeClass('col-xs-6').addClass('col-xs-12');\r\n                            break;\r\n                    }\r\n\r\n                    // scroll to the top of the page\r\n                    $('#products-page .page__content').scrollTop(0);\r\n                });\r\n\r\n\r\n                // listen for when a product card is clicked\r\n                $thisPage.on(\"click\", \".e-card > *:not(.e-card-actions)\", function(){\r\n                    // load the product-details page\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                });\r\n\r\n                try{\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Product Details page\r\n     */\r\n    productDetailsPageViewModel: {\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n                    let addToCartButton = new ej.buttons.Button({\r\n                        iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    addToCartButton.appendTo('#product-details-add-to-cart');\r\n\r\n                    let customiseProductButton = new ej.buttons.Button({\r\n                        iconCss: \"zmdi zmdi-brush utopiasoftware-icon-zoom-one-point-two\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    customiseProductButton.appendTo('#product-details-customise-product');\r\n\r\n                    let wishListButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-favorite-outline\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    wishListButton.appendTo('#product-details-wish-list');\r\n\r\n                    let compareButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-utopiasoftware-icon-scale-balance\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    compareButton.appendTo('#product-details-compare');\r\n\r\n                    let reviewButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-star-outline\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    reviewButton.appendTo('#product-details-review');\r\n\r\n                    let shareButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-share\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    shareButton.appendTo('#product-details-share');\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        }\r\n    }\r\n};"]}