{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 18/11/2018.\r\n */\r\n\r\n/**\r\n* file defines all View-Models, Controllers and Event Listeners used by the app\r\n*\r\n* The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n* The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n* also used interchangeably\r\n*/\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n    /**\r\n     * method contains the startup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // disable the default back button handler for the 'search-page-search-input-popover'\r\n            $('#search-page-search-input-popover').get(0).onDeviceBackButton.disable();\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // create the ej2 bottom toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 0,\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.page-toast').get(0));\r\n\r\n            // create the ej2 \"timed\" bottom toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 4000, // default 4 sec\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.timed-page-toast').get(0));\r\n\r\n            // create the \"Yes\" button on the the Delete Cart Item action sheet\r\n            new ej.buttons.Button({\r\n                cssClass: 'e-flat e-small',\r\n                iconPosition: \"Left\"\r\n            }).appendTo('#view-cart-page-delete-cart-item-yes');\r\n\r\n            // create the \"No\" button on the the Delete Cart Item action sheet\r\n            new ej.buttons.Button({\r\n                cssClass: 'e-flat e-small',\r\n                iconPosition: \"Left\"\r\n            }).appendTo('#view-cart-page-delete-cart-item-no');\r\n\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n\r\n                // create the pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase = new PouchDB('PrintServiceEcommerce.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // create the encrypted pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase =\r\n                    new PouchDB('PrintServiceEcommerceEncrypted.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // generate a password for encrypting the app database (if it does NOT already exist)\r\n                let secureKey = null;\r\n                try {\r\n                    // get secure key, if it exists\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.getItem(\"utopiasoftware-oak-print-service-secure-key\",resolve, reject);\r\n                    });\r\n                }\r\n                catch(err){ // secure key does not exist\r\n                    // create the secure key\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.setItem(\"utopiasoftware-oak-print-service-secure-key\",\r\n                            {password: Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},\r\n                            resolve, reject);\r\n                    });\r\n                }\r\n                // enable the db encryption using the generated password\r\n                await new Promise(function(resolve, reject){\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.\r\n                    crypto(secureKey.password, {\r\n                        ignore: ['_attachments', '_deleted', 'docType'],\r\n                        cb: function(err, key){\r\n                            if(err){ // there is an error\r\n                                reject(err); // reject Promise\r\n                            }\r\n                            else{ // no error\r\n                                resolve(key); // resolve Promise\r\n                            }\r\n                        }});\r\n                });\r\n\r\n                // load/set the initial number of items in the user's cart\r\n                try{\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.cartCount =\r\n                        (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(\"user-cart\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart.length;\r\n                }\r\n                catch(err){}\r\n\r\n                //register the listener for app database changes\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.appDatabaseChangesListenerViewModel.\r\n                    changesEventEmitter = utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.\r\n                                                changes({\r\n                    live: true,\r\n                    include_docs: true,\r\n                    since: 'now',\r\n                    doc_ids: ['user-cart']\r\n                }).on(\"change\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    appDatabaseChangesListenerViewModel.userCartChanged);\r\n\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n\r\n                // load the initial content of the app\r\n                if(true){ // there is a previous logged in user\r\n                    // load the app main page\r\n                    $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n                }\r\n                else{ // there is no previously logged in user\r\n                    // load the login page\r\n                    $('ons-splitter').get(0).content.load(\"login-template\");\r\n                }\r\n\r\n                // set status bar color\r\n                StatusBar.backgroundColorByHexString(\"#363E7C\");\r\n                navigator.splashscreen.hide(); // hide the splashscreen\r\n                utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fully loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n    /**\r\n     * this view-model is used to house the listeners and data/properties which listen for\r\n     * changes in the app database\r\n     */\r\n    appDatabaseChangesListenerViewModel : {\r\n\r\n        /**\r\n         * property holds the Event Emitter object for the changes taking\r\n         * place in the database. This object can be used to cancel event listening at\r\n         * any time\r\n         */\r\n        changesEventEmitter: null,\r\n\r\n        /**\r\n         * methosd is used to listen for changes to the\r\n         * user-cart document i.e. when the local cached user cart is updated/modified\r\n         *\r\n         * @param changesInfo {Object} holds the object containing the changes made to the user cart\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async userCartChanged(changesInfo){\r\n            if(changesInfo.deleted === true){ // the user local cart was deleted\r\n                // reset the cartCount app model property to zero\r\n                utopiasoftware[utopiasoftware_app_namespace].model.cartCount = 0;\r\n            }\r\n            else{ // the user local cart was modified/updated\r\n                // update the cartCount app model property to indicate the number of items in cart (using the updated cart length)\r\n                utopiasoftware[utopiasoftware_app_namespace].model.cartCount =\r\n                    changesInfo.doc.cart.length;\r\n            }\r\n\r\n            // update the cart count being displayed on all current pages\r\n            $('.cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Home page\r\n     */\r\n    homePageViewModel: {\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"New Products\"/ Banner Ads\r\n         */\r\n        newProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Featured / Popular Products\"\r\n         */\r\n        featuredProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Sales Products\"\r\n         */\r\n        salesProductsCarousel: null,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"New Products\" carousel\r\n                    let newProductsCarousel = new Flickity($('#home-page #home-latest-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        // adaptiveHeight: true,\r\n                        imagesLoaded: true,\r\n                        cellSelector: '.col-xs-12',\r\n                        autoPlay: 5000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'left',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    newProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(newProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(newProductsCarousel._utopiasoftware_scrollTimer);\r\n                            newProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        newProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            newProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    newProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n\r\n                    });\r\n                    // assign the \"New Product\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel =\r\n                        newProductsCarousel;\r\n\r\n                    // create the \"Featured Products\" carousel\r\n                    let featuredProductsCarousel = new Flickity($('#home-page #home-featured-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    featuredProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(featuredProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(featuredProductsCarousel._utopiasoftware_scrollTimer);\r\n                            featuredProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        featuredProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            featuredProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    featuredProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // do nothing\r\n                            return;\r\n                        }\r\n\r\n                        // call the method to load the product details page based on the product item clicked\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        productItemClicked(window.parseInt($(cellElement).attr('data-product')),\r\n                            $(cellElement).attr('data-segment'));\r\n                    });\r\n                    // assign the \"Featured Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel =\r\n                        featuredProductsCarousel;\r\n\r\n                    let salesProductsCarousel = new Flickity($('#home-page #home-sales-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4500,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    salesProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(salesProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(salesProductsCarousel._utopiasoftware_scrollTimer);\r\n                            salesProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        salesProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            salesProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    salesProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // do nothing\r\n                            return;\r\n                        }\r\n                        // call the method to load the product details page based on the product item clicked\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        productItemClicked(window.parseInt($(cellElement).attr('data-product')),\r\n                            $(cellElement).attr('data-segment'));\r\n                    });\r\n                    // assign the \"Sales Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel =\r\n                        salesProductsCarousel;\r\n\r\n                    $('#loader-modal').get(0).hide(); // show loader\r\n\r\n                    // display page preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"block\");\r\n\r\n                    // start loading the page content\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n\r\n                    // hide the preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n                catch(err){\r\n                    console.log(\"HOME PAGE ERROR\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // update page title\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"OAK\");\r\n            // update cart count\r\n            $('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n\r\n\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.reloadCells();\r\n            }\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.reloadCells();\r\n            }\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel){\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.reloadCells();\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the carousels\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n            newProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                newProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            ons.notification.confirm('Do you want to close the app?',\r\n                {title: '<img src=\"css/app-images/oak-design-logo.png\" style=\"height: 1.5em; width: auto; margin-right: 0.5em\">Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see live products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#home-page #home-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n                // hide the preloader\r\n                $('#home-page .page-preloader').css(\"display\", \"none\");\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#home-page #home-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load all products to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(){\r\n            var productTypesPromisesArray = []; // holds the array for all the promises of the product types to be loaded\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load banner products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"private\",\r\n                            \"type\": \"external\", \"page\": 1, \"per_page\": 5}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"banner-products\", docType: \"BANNER_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-latest-design-block').css({\"opacity\": \"1\", \"display\": \"block\"}); // show the \"Products\" segment\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.\r\n                            remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-latest-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"${productsArray[index].images[0].src}\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"featured\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"popular-products\", docType: \"POPULAR_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                 data-product=\"${index}\" data-segment=\"featured\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"on_sale\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"sales-products\", docType: \"SALES_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                    data-product=\"${index}\" data-segment=\"sales\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ? \r\n                                         productsArray[index].price : productsArray[index].regular_price)) \r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see live products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load banner products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"banner-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).\r\n                    then(function(productsArray){\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"css/app-images/blank-img.png\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        // $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        $('#home-page #home-latest-design-block').css({\"opacity\": \"0\", \"display\": \"none\"}); // hide the segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        // $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        $('#home-page #home-latest-design-block').css({\"opacity\": \"0\", \"display\": \"none\"}); // hide the segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"popular-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                    data-product=\"${index}\" data-segment=\"featured\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"sales-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\" \r\n                                  data-product=\"${index}\" data-segment=\"sales\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                        productsArray[index].price : productsArray[index].regular_price))\r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productTypesPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreFeaturedProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"featured\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreSalesProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"on_sale\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks any product item from the Feature/Popular OR\r\n         * Sales segments\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the 'appropriate' cached array of product items\r\n         *\r\n         * @param segmentType {String} specifies which segment the clicked product item belongs to.\r\n         * Possible options are: 'featured', 'sales'\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async productItemClicked(productIndex, segmentType){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n                var productItemsArray = []; // holds the array of 'appropriate' product items\r\n\r\n                try{\r\n                    // find out what segment type the clicked product belongs to\r\n                    switch (segmentType) {\r\n                        case \"featured\": // Featured/popular product\r\n                            // get the 'appropriate' product items collection\r\n                            productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                            loadData(\"popular-products\",\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                            break;\r\n\r\n                        case \"sales\": // Sales product\r\n                            // get the 'appropriate' product items collection\r\n                            productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                            loadData(\"sales-products\",\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                            break;\r\n                    }\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : productItemsArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Categories page\r\n     */\r\n    categoriesPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 100,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight =\r\n                    Math.floor($('#categories-page .page__content').height());\r\n\r\n                // listen for the scroll event on the page\r\n                $('#categories-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#categories-page .page__content').scrollTop());\r\n\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                categoriesPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when a category card is clicked\r\n                $thisPage.on(\"click\", \".e-card\", function(clickEvent){\r\n                    // load the products page in a separate event queue\r\n                    window.setTimeout(async function(){\r\n                        try{\r\n                            // navigate to the products page\r\n                            await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                            // request for products from the category that was clicked\r\n                            let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                            loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20,\r\n                                \"category\": $(clickEvent.currentTarget).attr(\"data-category-id\")});\r\n                            await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                        }\r\n                        catch(err){\r\n\r\n                            // hide all previously displayed ej2 toast\r\n                            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                            // display toast to show that an error\r\n                            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                            toast.cssClass = 'error-ej2-toast';\r\n                            toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                            toast.dataBind();\r\n                            toast.show();\r\n                        }\r\n                        finally{\r\n                            // hide the preloader for the products page\r\n                            $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                try{\r\n                    // start loading the page content\r\n                    let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    console.log(\"CATEGORY PAGE ERROR\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide the preloader\r\n                    $('#categories-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // update the title of the page\r\n            // update cart count\r\n            $('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n            // hide the page scroll fab\r\n            $('#categories-page #categories-page-scroll-top-fab').css({\"display\": \"none\"});\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#categories-page #categories-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                categoriesPageViewModel.loadCategories(1, utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.categoriesPageViewModel.pageSize);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#categories-page #categories-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products categories to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadCategories(pageToAccess = utopiasoftware[utopiasoftware_app_namespace].\r\n                                            controller.categoriesPageViewModel.currentPage + 1,\r\n                             pageSize = utopiasoftware[utopiasoftware_app_namespace].\r\n                                        controller.categoriesPageViewModel.pageSize){\r\n            var categoryPromisesArray = []; // holds the array for the promises used to load the product categories\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested categories list from the server\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products/categories\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"asc\", \"orderby\": \"name\", \"hide_empty\": true,\r\n                                \"page\": pageToAccess, \"per_page\": pageSize}\r\n                        }\r\n                    )).then(function(categoriesArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(categoriesArray.length > 0){ // there is data to cache\r\n                            // remove the 'uncategorized' category\r\n                            categoriesArray = categoriesArray.filter(function(element){\r\n                                return element.slug !== 'uncategorized';\r\n                            });\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCT_CATEGORIES\", categories: categoriesArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.categoriesPageViewModel.currentPage = pageToAccess;\r\n                        }\r\n                        resolve(categoriesArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading product categories with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested product categories from cached data\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedCategoriesData){\r\n                        resolve(cachedCategoriesData.categories); // resolve the parent promise with the cached categories data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(categoryPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products categories on the app screen\r\n         *\r\n         * @param categoriesArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(categoriesArray, appendContent = true, overwriteContent = true){\r\n\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let categoriesContent = \"\"; // holds the contents for the categories\r\n\r\n                // check if the categoriesArray is empty or not\r\n                if(categoriesArray.length <= 0){ // there are no new content to display\r\n                    resolve(categoriesArray.length); // resolve promise with the length of the categories array\r\n                }\r\n                else{ // there are some categories to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < categoriesArray.length; index++){\r\n                        categoriesContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            categoriesContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            categoriesContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        categoriesContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\" data-category-id=\"${categoriesArray[index].id}\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${categoriesArray[index].image.src}');\">\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${categoriesArray[index].name}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                      </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#categories-page #categories-contents-container').html(categoriesContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#categories-page #categories-contents-container').append(categoriesContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#categories-page #categories-contents-container').prepend(categoriesContent);\r\n                        }\r\n                    }\r\n\r\n                    resolve(categoriesArray.length); // resolve the promise with length of the categoriesArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#categories-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Search page\r\n     */\r\n    searchPageViewModel: {\r\n\r\n        /**\r\n         * holds the array of products for the search result that was just run by the user\r\n         */\r\n        currentSearchResultsArray: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n\r\n                    //instantiate the autocomplete widget for the search input\r\n                    let searchAutoComplete = new ej.dropdowns.AutoComplete({\r\n                        floatLabelType: \"Never\",\r\n                        placeholder: \"Search Products\",\r\n                        allowCustom: true,\r\n                        filterType: \"Contains\",\r\n                        minLength: 1000, // minimum number of characters that will automatically trigger autocomplete search\r\n                        suggestionCount: 20, // specified how many items will be in the popup\r\n                        dataSource: [],\r\n                        noRecordsTemplate: `Tap 'Search' key to begin search`,\r\n                        blur: function(){ // track when the component has lost focus\r\n                            this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                            // hide the popover\r\n                            $('#search-page-search-input-popover').get(0).hide();\r\n\r\n                        },\r\n                        change: function(){ // track when the component's value has changed\r\n\r\n                            let searchValue = \"\"; // holds the term to be searched for\r\n\r\n                            // check if the search component can perform a remote search\r\n                            if(this._allowRemoteSearch !== true){  // remote search is NOT allowed\r\n                                this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                                return; // exit function\r\n                            }\r\n\r\n                            // check that there is actually a search term entered in the search component\r\n                            if(!this.value || this.value.trim() === \"\"){ // no search term\r\n                                this._allowRemoteSearch = false; // set that remote search is NOT allowed\r\n                                return; // exit function\r\n                            }\r\n\r\n                            // update the search term value\r\n                            searchValue = this.value.trim();\r\n\r\n                            // inform user that search is ongoing\r\n                            $('#search-page-search-input-popover #search-input-popover-list').\r\n                            html(`\r\n                            <ons-list-item modifier=\"nodivider\" lock-on-drag=\"true\">\r\n                                <div class=\"left\">\r\n                                    <ons-progress-circular indeterminate modifier=\"pull-hook\" \r\n                                    style=\"transform: scale(0.6)\"></ons-progress-circular>\r\n                                </div>\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center;\">\r\n                                        Searching for products\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`);\r\n                            // display the popover\r\n                            $('#search-page-search-input-popover').get(0).\r\n                            show(document.getElementById('search-page-input'));\r\n\r\n                            // run the actual search in a different event queue\r\n                            window.setTimeout(async function() {\r\n                                var searchResultsArray = [];\r\n                                try{\r\n                                    searchResultsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 3,\r\n                                        \"search\": searchValue});\r\n                                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    displayPageContent(searchResultsArray[0]);\r\n                                }\r\n                                catch(err){\r\n\r\n                                    // remove the focus from the search autocomplete component\r\n                                    $('#search-page #search-page-input').get(0).ej2_instances[0].focusOut();\r\n                                    // hide all previously displayed ej2 toast\r\n                                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    // display toast to show that an error\r\n                                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                                    toast.cssClass = 'error-ej2-toast';\r\n                                    toast.timeOut = 3000;\r\n                                    toast.content = `Sorry, a search error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"}`;\r\n                                    toast.dataBind();\r\n                                    toast.show();\r\n                                }\r\n                            }, 0);\r\n\r\n                        }\r\n                    }).appendTo('#search-page-input');\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Search\"); // update the title of the page\r\n            // update cart count\r\n            $('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener, false);\r\n\r\n            // load the recent searches list\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener, false);\r\n            // destroy the current search result array\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the search input autocomplete component\r\n            $('#search-page #search-page-input').get(0).ej2_instances[0].destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // hide the search-input popover\r\n            $('#search-page-search-input-popover').get(0).hide();\r\n            // go to the \"Categories\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(1);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see search results\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is used to display the \"Recent Searches\" list on the Search page.\r\n         * Recent Searches are gotten from the cached collection\r\n         */\r\n        async displayRecentSearches(){\r\n            try{\r\n                // load the recent search from the device database cache\r\n                let recentSearchData = await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                let displayContent = \"<ons-list-title>Recent Searches</ons-list-title>\"; // holds the content of the list to be created\r\n                // create the Recent Searches list\r\n                for(let index = 0; index < recentSearchData.products.length; index++){\r\n                    displayContent += `\r\n                    <ons-list-item modifier=\"longdivider\" tappable lock-on-drag=\"true\">\r\n                        <div class=\"center\">\r\n                            <div style=\"width: 100%;\" \r\n                            onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                              recentSearchesItemClicked(${index})\">\r\n                                <span class=\"list-item__subtitle\">${recentSearchData.products[index].name}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right\" prevent-tap \r\n                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                    removeRecentSearchItem(${index}, this);\">\r\n                            <ons-icon icon=\"md-close-circle\" style=\"color: lavender; font-size: 18px;\"></ons-icon>\r\n                        </div>\r\n                    </ons-list-item>`;\r\n                }\r\n                // attach the displayContent to the list\r\n                $('#search-page #search-list').html(displayContent);\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to save a search item i.e. a product to the cached \"Recent Searches\"\r\n         *\r\n         * @param product {Object} the product to include to the \"Recent Searches\" cache\r\n         * @returns {Promise<void>}\r\n         */\r\n        async saveRecentSearchItem(product){\r\n            var recentSearchesResultArray = []; // holds the recent searches array\r\n\r\n            try{\r\n                // get the recent searches collection\r\n                recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n            }\r\n            catch(err){}\r\n\r\n            try{\r\n                // add the received 'product' parameter to the top of the recent searches array\r\n                recentSearchesResultArray.unshift(product);\r\n                // ensure the array is NOT greater than 5 items in length\r\n                recentSearchesResultArray = recentSearchesResultArray.slice(0, 5);\r\n                // save the updated recent searches array  to the cached data collection of \"Recent Searches\"\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"recent-searches\", docType: \"RECENT_SEARCHES\", products: recentSearchesResultArray},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                // display the updated recent searches to the user\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to remove a search item i.e. a product from the cached \"Recent Searches\"\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array of cached recent searches\r\n         *\r\n         * @param clickedElement {Element} the element that was clicked in order to trigger the product removal\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async removeRecentSearchItem(productIndex, clickedElement){\r\n\r\n            // execute the method is a different event queue\r\n            window.setTimeout(async function(){\r\n                var recentSearchesResultArray = []; // holds the recent searches array\r\n\r\n                try{\r\n                    // get the recent searches collection\r\n                    recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n                }\r\n                catch(err){}\r\n\r\n                try{\r\n                    // remove the received 'product' parameter index from the recent searches array\r\n                    recentSearchesResultArray.splice(productIndex, 1);\r\n                    // save the updated recent searches array  to the cached data collection of \"Recent Searches\"\r\n                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                        {_id: \"recent-searches\", docType: \"RECENT_SEARCHES\", products: recentSearchesResultArray},\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                    // hide the list-item belonging to the clicked element from the displayed list\r\n                    let $listItem = $(clickedElement).closest('ons-list-item');\r\n                    await kendo.fx($listItem).expand(\"vertical\").duration(300).reverse();\r\n                    // display the updated recent searches to the user\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0)\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks an item from the Recent Searches List\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array returned of recent searches\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async recentSearchesItemClicked(productIndex){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // get the recent searches collection\r\n                    let recentSearchesResultArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"recent-searches\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : recentSearchesResultArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the enter button is clicked on the device keyboard\r\n         *\r\n         * @param keyEvent\r\n         * @returns {Promise<void>}\r\n         */\r\n        async enterButtonClicked(keyEvent){\r\n            // check which key was pressed\r\n            if(keyEvent.which === kendo.keys.ENTER) // if the enter key was pressed\r\n            {\r\n                // prevent the default action from occurring\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopImmediatePropagation();\r\n                keyEvent.stopPropagation();\r\n                // hide the device keyboard\r\n                Keyboard.hide();\r\n\r\n                // get the search autocomplete component\r\n                let searchAutoComplete = $('#search-page #search-page-input').get(0).ej2_instances[0];\r\n                // update the value of the retrieved component\r\n                searchAutoComplete.value = $('#search-page #search-page-input').val();\r\n                searchAutoComplete._allowRemoteSearch = true; // flag the remote search can occur\r\n                searchAutoComplete.dataBind(); // bind new value to the component\r\n                searchAutoComplete.change(); // trigger the change method\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @param queryParam {Object} holds the objects that contains the query\r\n         * params for the type of products to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(queryParam, pageToAccess = queryParam.page || 1,\r\n                           pageSize = queryParam.per_page || 3){\r\n            queryParam.page = pageToAccess;\r\n            queryParam.per_page = pageSize;\r\n\r\n            var productPromisesArray = []; // holds the array for the promises used to load the products\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: queryParam\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // check if the productsArray contains products\r\n                        if(productsArray.length > 0){ // there are products\r\n                            // update the current search results array with the productsArray\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                                currentSearchResultsArray = productsArray;\r\n                        }\r\n\r\n                        resolve(productsArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                productPromisesArray.push(Promise.reject(\"no internet connection\"));\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products on the search popover\r\n         *\r\n         * @param productsArray\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(productsArray){\r\n\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let productsContent = \"\"; // holds the contents for the products\r\n\r\n                // check if the productsArray is empty or not\r\n                if(productsArray.length <= 0){ // there are no new content to display\r\n                    // inform the user that no result for the search was founc'\r\n                    $('#search-page-search-input-popover #search-input-popover-list').\r\n                    html(`<ons-list-item modifier=\"nodivider\" lock-on-drag=\"true\">\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center; width: 100%;\">\r\n                                        No Results Found\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`);\r\n                    resolve(productsArray.length); // resolve promise with the length of the products array\r\n                }\r\n                else{ // there are some products to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < productsArray.length; index++){\r\n\r\n                        productsContent +=\r\n                            `<ons-list-item modifier=\"nodivider\" tappable lock-on-drag=\"true\" \r\n                              onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                              searchAutocompletePopOverItemClicked(${index})\">\r\n                                <div class=\"left\">\r\n                                    <div class=\"search-result-image\" style=\"background-image: url('${productsArray[index].images[0].src}'); \r\n                                                            width: 2em; height: 2em\"></div>\r\n                                </div>\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center;\">\r\n                                        ${productsArray[index].name}\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`;\r\n                    }\r\n\r\n                    // append the \"Load More\" search item\r\n                    productsContent +=\r\n                        `<ons-list-item modifier=\"nodivider\" tappable lock-on-drag=\"true\" \r\n                          onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.findMoreClicked();\">\r\n                                <div class=\"center\">\r\n                                    <div style=\"text-align: center; width: 100%; font-weight: bold;\">\r\n                                        Find More...\r\n                                    </div>\r\n                                </div>\r\n                            </ons-list-item>`;\r\n                    // attach the new search results to the search popover\r\n                    $('#search-page-search-input-popover #search-input-popover-list').html(productsContent);\r\n\r\n                    resolve(productsArray.length); // resolve the promise with length of the productsArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks an item from the search autocomplete popover\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the array returned by the product search\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async searchAutocompletePopOverItemClicked(productIndex){\r\n            // get the product the user clicked on from the search autocomplete popover\r\n            var selectedProduct = utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                currentSearchResultsArray[productIndex];\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // display the products details page using the selected product\r\n                    await $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : selectedProduct}});\r\n\r\n                    // save the selected product in recent products app cache\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\r\n                    saveRecentSearchItem(selectedProduct);\r\n\r\n                    // update the value of the search autocomplete input to that which the user clicked on from the popover\r\n                    $('#search-page #search-page-input').val(selectedProduct.name);\r\n\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Find More\" option is\r\n         * tapped within the search input popover\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async findMoreClicked(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products using the user's search term\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"search\":\r\n                            $('#search-page #search-page-input').get(0).ej2_instances[0].value.trim()});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Account page\r\n     */\r\n    accountPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for when the device back button is tapped\r\n                event.target.onDeviceBackButton = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    accountPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n                    // create the accorodion ej2 component used on the \"Account\" page\r\n                    let accordion = new ej.navigations.Accordion({\r\n                        expandMode: 'Single'\r\n                    });\r\n                    accordion.appendTo('#account-accordion');\r\n                    // expand the first item of the accordion\r\n                    accordion.expandItem(true, 0);\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: async function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Account\"); // update the title of the page\r\n            // update cart count\r\n            $('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // handle the user sign-in check inside a promise\r\n            return new Promise(function(resolve, reject){\r\n                window.setTimeout(async function(){\r\n                    try{\r\n                        // check if user has been signed in\r\n                        let hasUserDetails = await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                        loadData(\"user-details\", utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                        // since user is signed in, hide some list items and show some list items on the page.\r\n\r\n                        // all items that are interested in have their display altered MUST have the\r\n                        // class 'utopiasoftware-can-hide-list-item'.\r\n                        // items that want to be displayed when a user is signed in and hidden when a user is signed out, MUST ALSO\r\n                        // have the class 'utopiasoftware-user-sign-in-show' in addition to 'utopiasoftware-can-hide-list-item'.\r\n\r\n                        // alter the list item display because a user is signed in\r\n                        $('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css(\"display\", \"flex\");\r\n                        $('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)')\r\n                            .css(\"display\", \"none\");\r\n\r\n                        resolve(); // resolve the promise\r\n                    }\r\n                    catch(err){\r\n                        // alter the list item display because NO user is signed in\r\n                        $('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css(\"display\", \"none\");\r\n                        $('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)')\r\n                            .css(\"display\", \"flex\");\r\n\r\n                        // resolve the promise\r\n                        resolve(); // resolve the promise\r\n                    }\r\n                }, 0);\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the \"Account\" accordion\r\n            $('#account-page #account-accordion').get(0).ej2_instances[0].destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(2);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks on the \"Sign Out\" list item\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signOutListItemClicked(){\r\n\r\n            // inform the user that the sign out process is on\r\n            $('#loader-modal-message').html(\"Signing user out...\");\r\n            await $('#loader-modal').get(0).show(); // show loader\r\n\r\n            try{\r\n                // delete all user related data\r\n                await Promise.all([utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                removeData(\"user-details\", utopiasoftware[utopiasoftware_app_namespace].model.\r\n                    encryptedAppDatabase),\r\n                    utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    removeData(\"user-cart\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)]);\r\n            }\r\n            catch(err){\r\n                console.log(\"USER SIGN OUT\", err);\r\n            }\r\n\r\n            // check if user can sign out from the remote app serve via an iframe\r\n            if($('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow &&\r\n                $('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow.utopiasoftware_removeUsage){\r\n                // call the method to remotely sign out\r\n                $('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow.utopiasoftware_removeUsage();\r\n            }\r\n\r\n            // refresh the display of the app Account page\r\n            await utopiasoftware[utopiasoftware_app_namespace].controller.accountPageViewModel.pageShow();\r\n\r\n            // alter the list item displayed on the Account page because NO user is signed in\r\n            $('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css(\"display\", \"none\");\r\n            $('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)')\r\n                .css(\"display\", \"flex\");\r\n\r\n            // hide loader modal\r\n            await $('#loader-modal').get(0).hide();\r\n\r\n            // inform user that they have been signed out\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n            $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n            // display toast message\r\n            let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n            toast.cssClass = 'success-ej2-toast';\r\n            toast.timeOut = 3000;\r\n            toast.content = `User signed out`;\r\n            toast.dataBind();\r\n            toast.show();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks on the \"Profile\" list item\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async profileListItemClicked(){\r\n\r\n            // handle the user sign-in check inside a promise\r\n            return new Promise(function(resolve, reject){\r\n                window.setTimeout(async function(){\r\n                    try{\r\n                        // check if user has been signed in\r\n                        let hasUserDetails = await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                        loadData(\"user-details\", utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                        // user has been signed in, so display the user profile page\r\n                        await $('#app-main-navigator').get(0).pushPage('profile-page.html');\r\n\r\n                        resolve(); // resolve the promise\r\n                    }\r\n                    catch(err){\r\n                        // inform user they need to sign in before viewing the profile page\r\n                        // hide all previously displayed ej2 toast\r\n                        $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                        $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                        // display toast message\r\n                        let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                        toast.cssClass = 'default-ej2-toast';\r\n                        toast.timeOut = 3000;\r\n                        toast.content = `Sign in to view your profile`;\r\n                        toast.dataBind();\r\n                        toast.show();\r\n\r\n                        // resolve the promise\r\n                        resolve(); // resolve the promise\r\n                    }\r\n                }, 0);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Login page\r\n     */\r\n    loginPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the login page\r\n         */\r\n        loginFormValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the signup page\r\n         */\r\n        signupFormValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley form validator object for the forgot password page\r\n         */\r\n        forgotPasswordFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked;\r\n\r\n                // listen for when the login-carousel has changed/slide used to change screen from login to signup etc\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange);\r\n\r\n                // listen for when the login-carousel has changed/slide used to hide the tooltips for the previous displayed screen\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange);\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator =\r\n                    $('#login-page #login-form').parsley();\r\n\r\n                // initialise the signup form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator =\r\n                    $('#login-page #signup-form').parsley();\r\n\r\n                // initialise the forgot password form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator =\r\n                    $('#login-page #forgot-password-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated);\r\n\r\n                // listen for signup form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for sign up form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for signup form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated);\r\n\r\n                // listen for forgot password form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #forgot-password-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for forgot password form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #forgot-password-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for forgot password form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidated);\r\n\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#login-page .login-page-form-container').on(\"scroll\", function(){\r\n\r\n                    // place function execution in the event queue to be executed ASAP\r\n                    window.setTimeout(function(){\r\n\r\n                            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                                case 0: // first carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #login-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('login-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 1: // second carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #signup-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('signup-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 2: // third carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #forgot-password-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('forgot-password-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n\r\n                                    break;\r\n                            }\r\n                        }, 0);\r\n                });\r\n\r\n                try{\r\n                    // create the tooltip objects for the signin form\r\n                    $('#login-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #login-form').get(0));\r\n                    });\r\n\r\n                    // create the tooltip objects for the signup form\r\n                    $('#signup-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #signup-form').get(0));\r\n                    });\r\n\r\n                    // create the tooltip objects for the forgot password form\r\n                    $('#forgot-password-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #forgot-password-form').get(0));\r\n                    });\r\n\r\n                    // create the button for showing password visibility on the signup page\r\n                    new ej.buttons.Button({\r\n                        isToggle: true,\r\n                        cssClass: 'e-flat e-small e-round',\r\n                        iconCss: \"zmdi zmdi-eye\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo($('#signup-password-view-button', $thisPage).get(0));\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device keyboard is shown\r\n            window.addEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device keyboard is shown\r\n            window.removeEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n\r\n            // hide the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // hide the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // hide the tooltips on the forgot password form\r\n            $('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.reset();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the tooltips on the forgot password form\r\n            $('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the password visibility button\r\n            $('#login-page #signup-password-view-button').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        async backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            return $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Sign In / Sign Up segment buttons are clicked\r\n         *\r\n         * @param itemIndex {Integer} zero-based index representing the carousel item to\r\n         * display ewhen the button is clicked\r\n         */\r\n        segmentButtonClicked(itemIndex){\r\n            // move to the slide item specify by the provided parameter\r\n            $('#login-page #login-carousel').get(0).setActiveIndex(itemIndex);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Password Visibility button is clicked\r\n         *\r\n         * @param buttonElement {HTMLElement} button element being clicked\r\n         *\r\n         * @param inputId {String} the id for the input whose content visibility is being changed\r\n         */\r\n        passwordVisibilityButtonClicked(buttonElement, inputId){\r\n\r\n            // check the state of the button is it 'active' or not\r\n            if(! $(buttonElement).hasClass('e-active')){ // button is not active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"text\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye-off';\r\n                ej2Button.dataBind();\r\n            }\r\n            else{ // button is active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"password\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye';\r\n                ej2Button.dataBind();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * displaying the various screens i.e. login or signup etc\r\n         *\r\n         * @param event\r\n         */\r\n        changeScreenCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel is being shown\r\n            switch(event.originalEvent.activeIndex){ // get the index of the active carousel item\r\n                case 0:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);\r\n\r\n                    break;\r\n\r\n                case 1:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);\r\n                    break;\r\n\r\n                case 2:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * hiding the tooltips on the previously displayed slide\r\n         *\r\n         * @param event\r\n         */\r\n        hideTooltipsCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel item was PREVIOUSLY shown\r\n            switch(event.originalEvent.lastActiveIndex){ // get the index of the LAST active carousel item\r\n                case 0:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 1:\r\n\r\n                    // hide the tooltips on the signup form\r\n                    $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    // hide the tooltips on the forgot password form\r\n                    $('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(tooltipArrayElem) {\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the keyboard is shown.\r\n         * It is used to adjust the display height\r\n         *\r\n         * @param event\r\n         */\r\n        keyboardShownAdjustView(event){\r\n            // get the height of the keyboard and add 6000px to it\r\n            let adjustedKeyboardHeight = Math.ceil(event.keyboardHeight) + 6000;\r\n\r\n            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                case 0:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 1:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 2:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.third .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.third .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign In\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signinButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign Up\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Forgot Password\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async forgotPasswordButtonClicked() {\r\n\r\n            // open inapp browser for user to reset password\r\n            cordova.InAppBrowser.open(window.encodeURI('https://shopoakexclusive.com/my-account/lost-password/'), '_blank',\r\n                'location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=yes,zoom=no,toolbarcolor=#3f51b5');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Reset Password\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async resetPasswordButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the login form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loginFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to sign in`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // display modal to user that signin is being completed\r\n            $('#loader-modal-message').html(\"Completing Signin...\");\r\n            await $('#loader-modal').get(0).show(); // show loader\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete user signin\r\n            var userEmail = $('#login-page #login-form #login-email').val().trim(); // holds user email from the login form\r\n            var userPassword = $('#login-page #login-form #login-password').val().trim(); // holds the user password\r\n\r\n\r\n            // make the request to authenticate user login credentials\r\n            promisesArray.push(Promise.resolve($.ajax(\r\n                {\r\n                    url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json\",\r\n                    type: \"get\",\r\n                    // contentType: \"application/json\",\r\n                    beforeSend: function(jqxhr) {\r\n                        jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                            Base64.encode(`${userEmail}:${userPassword}`));\r\n                    },\r\n                    dataType: \"json\",\r\n                    timeout: 240000, // wait for 4 minutes before timeout of request\r\n                    processData: false\r\n                }\r\n            )));\r\n\r\n            // make the request to retrieve a user with the specified login email\r\n            promisesArray.push(Promise.resolve($.ajax(\r\n                {\r\n                    url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/customers\",\r\n                    type: \"get\",\r\n                    //contentType: \"application/json\",\r\n                    beforeSend: function(jqxhr) {\r\n                        jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                            utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                    },\r\n                    dataType: \"json\",\r\n                    timeout: 240000, // wait for 4 minutes before timeout of request\r\n                    processData: true,\r\n                    data: {email: userEmail}\r\n                }\r\n            )));\r\n\r\n            // get the promise created from the promisesArray\r\n            let promisesArrayPromise = Promise.all(promisesArray);\r\n\r\n            // listen for when the promisesArrayPromise resolves\r\n            promisesArrayPromise.then(async function(resultsArray){\r\n                // add the user's password to the user details retrieved from the server\r\n                resultsArray[1][0].password = userPassword;\r\n\r\n                // save the created user details data to ENCRYPTED app database as cached data\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails: resultsArray[1][0]},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                // hide loader\r\n                await $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                // leave the signup page and go back to the previous page in the app main navigator. Call the backbuttonClicked() method\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'success-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User signin completed`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            }).catch(async function(err){ // an error occurred\r\n                console.log(\"SIGN IN ERROR\", err);\r\n\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide loader\r\n                await $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Invalid user email or password. User signin failed `;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            });\r\n\r\n            return promisesArrayPromise; // return the resolved promisesArray\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign up form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to sign up`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // display modal to user that signup is being completed\r\n            $('#loader-modal-message').html(\"Completing Signup...\");\r\n            await $('#loader-modal').get(0).show(); // show loader\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete user signup\r\n\r\n            // make the request to create the new user account\r\n            promisesArray.push(new Promise(function(resolve, reject){\r\n                Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/customers\",\r\n                        type: \"post\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify({email: $('#login-page #signup-form #signup-email').val().trim(),\r\n                        username: $('#login-page #signup-form #signup-email').val().trim(),\r\n                        password: $('#login-page #signup-form #signup-password').val().trim()})\r\n                    }\r\n                )).then(async function(userDetails){\r\n                    // add the user's password to the user details retrieved from the server\r\n                    userDetails.password = $('#login-page #signup-form #signup-password').val().trim();\r\n\r\n                    // save the created user details data to ENCRYPTED app database as cached data\r\n                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                        {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails},\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                    // hide loader\r\n                    await $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                    // leave the signup page and go back to the previous page in the app main navigator. Call the backbuttonClicked() method\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast message\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'success-ej2-toast';\r\n                    toast.timeOut = 3000;\r\n                    toast.content = `User signup completed`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n\r\n                    resolve(userDetails); // resolve the parent promise with the data gotten from the server\r\n\r\n                }).catch(async function(err){ // an error occurred\r\n                    console.log(\"SIGN UP ERROR\", err);\r\n\r\n                    err = JSON.parse(err.responseText);\r\n\r\n                    // hide loader\r\n                    await $('#loader-modal').get(0).hide(); // hide loader\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast message\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.timeOut = 3000;\r\n                    toast.content = `Error. ${err.message || \"User signup failed\"}`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n\r\n                    reject(err); // reject the parent promise with the error\r\n                });\r\n            }));\r\n\r\n            return Promise.all(promisesArray); // return the resolved promisesArray\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the forgot password form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async forgotPasswordFormValidated(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Products page\r\n     */\r\n    productsPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 20,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * property holds the index position of the last active\r\n         * navigation tab before user landed on this page\r\n         */\r\n        lastActiveNavTab: 0,\r\n\r\n        /**\r\n         * property holds the current query parameter used to display the products on screen\r\n         */\r\n        currentQueryParam: {\r\n            status: \"publish\"\r\n        },\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle page-infinite-scroll\r\n                event.target.onInfiniteScroll =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageInfiniteScroll;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight =\r\n                    Math.floor($('#products-page .page__content').height());\r\n\r\n\r\n                // listen for the scroll event on the page\r\n                $('#products-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#products-page .page__content').scrollTop());\r\n\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            productsPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                    \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when the navigation tab has changed and update the lastActiveNavTab\r\n                $('#app-main-tabbar').on(\"prechange\", function(event){\r\n                    if(event.originalEvent.index === 4){ // if the tab index is this page, don't update the lastActiveNavTab\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productsPageViewModel.lastActiveNavTab = event.originalEvent.index;\r\n\r\n                });\r\n\r\n                // LISTEN FOR WHEN A PRODUCT CARD IS CLICKED\r\n                $thisPage.on(\"click\", \".e-card\", function(event){\r\n                    // call the method to load the product details page based on the product item clicked\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    productItemClicked(window.parseInt($(event.currentTarget).attr('data-product')),\r\n                        window.parseInt($(event.currentTarget).attr('data-page')));\r\n                });\r\n\r\n                try{\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(event){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // change the title of the screen\r\n            // update cart count\r\n            $('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n            // check if the page content should be reset\r\n            if($('#app-main-navigator').get(0)._resetPageDisplay !== false){ // page content can be refreshed\r\n                // flag that page infinite scroll should NOT be allowed\r\n                event.target._allowInfinitePageScroll = false;\r\n                // show the preloader\r\n                $('#products-page .page-preloader').css(\"display\", \"block\");\r\n                // empty the content of the page\r\n                $('#products-page #products-contents-container').html('');\r\n                // hide the page scroll fab\r\n                $('#products-page #products-page-scroll-top-fab').css({\"display\": \"none\"});\r\n            }\r\n\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(event){\r\n            // flag that page infinite scroll should NOT be allowed\r\n            event.target._allowInfinitePageScroll = false;\r\n            delete $('#app-main-navigator').get(0)._resetPageDisplay;\r\n\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n\r\n            // remove all the infinite load indicator from the bottom of the page (if any exist)\r\n            $('#products-page .page__content .infinite-load-container').remove();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the last active page (tab)\r\n            $('#app-main-tabbar').get(0).\r\n            setActiveTab(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#products-page #products-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam, 1);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // hide the page preloader\r\n                $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#products-page #products-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pageInfiniteScroll(doneCallBack = function(){}){\r\n            // check of page infinite scroll is allowed or not\r\n            if($('#products-page').get(0)._allowInfinitePageScroll === false){ // page infinite scroll is NOT allowed\r\n                doneCallBack();\r\n                return;\r\n            }\r\n\r\n            // append an infinite load indicator to the bottom of the page\r\n            $('#products-page .page__content').\r\n            append(`<div class=\"infinite-load-container\" style=\"text-align: center\">\r\n                        <ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>\r\n                    </div>`);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            let productArray = []; // holds the array of products retrieved for display\r\n\r\n            try{\r\n                // start loading the NEXT page content\r\n                productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam,\r\n                    utopiasoftware[utopiasoftware_app_namespace].\r\n                        controller.productsPageViewModel.currentPage + 1);\r\n                // append the new content to the previous contents\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                displayPageContent(productArray[0], true, false);\r\n\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // check if any new products were retrieved\r\n                if(productArray && productArray[0].length > 0){ // products were retrieve\r\n                    // remove the infinite load indicator from the bottom of the page\r\n                    $('#products-page .page__content .infinite-load-container').remove();\r\n                }\r\n                else{ // no products were retrieved\r\n\r\n                    $('#products-page .page__content .infinite-load-container').css({\"visibility\": \"hidden\"});\r\n                }\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @param queryParam {Object} holds the objects that contains the query\r\n         * params for the type of products to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(queryParam, pageToAccess = queryParam.page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.currentPage + 1,\r\n                             pageSize = queryParam.per_page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.pageSize){\r\n            queryParam.page = pageToAccess;\r\n            queryParam.per_page = pageSize;\r\n\r\n            var productPromisesArray = []; // holds the array for the promises used to load the products\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: queryParam\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(productsArray.length > 0){ // there is data to cache\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentPage = queryParam.page;\r\n                            // update the current query parameter for the page\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentQueryParam = queryParam;\r\n                        }\r\n                        resolve(productsArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested products from cached data\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        // update the current page being viewed\r\n                        utopiasoftware[utopiasoftware_app_namespace].\r\n                            controller.productsPageViewModel.currentPage = queryParam.page;\r\n                        resolve(cachedProductsData.products); // resolve the parent promise with the cached products data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products on the app screen\r\n         *\r\n         * @param productsArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(productsArray, appendContent = true, overwriteContent = true){\r\n\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let productsContent = \"\"; // holds the contents for the products\r\n\r\n                // check if the productsArray is empty or not\r\n                if(productsArray.length <= 0){ // there are no new content to display\r\n                    resolve(productsArray.length); // resolve promise with the length of the products array\r\n                }\r\n                else{ // there are some products to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < productsArray.length; index++){\r\n                        if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                            productsArray[index].regular_price = \"0.00\";\r\n                        }\r\n\r\n                        productsContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            productsContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            productsContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        productsContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\" \r\n                        data-product=\"${index}\" \r\n                        data-page=\"${utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage}\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${productsArray[index].images[0].src}');\">\r\n                            ${productsArray[index].on_sale === true ? `\r\n                            <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                            kendo.parseFloat(productsArray[index].regular_price)) /\r\n                            kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                productsArray[index].price : productsArray[index].regular_price))\r\n                            * 100)}% OFF\r\n                             </span>` : \"\"}\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"color: #000000; font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${productsArray[index].name}\r\n                                    </div>\r\n                        <div style=\"color: gold; font-size: 0.6em !important; white-space: nowrap !important; \r\n                        text-overflow: ellipsis; overflow: hidden;\">\r\n                        ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                            `<ons-icon icon=\"md-star\" fixed-width></ons-icon>`.\r\n                        repeat(Math.floor(kendo.parseFloat(productsArray[index].average_rating))):\r\n                            `<ons-icon icon=\"md-star-outline\" style=\"color: lightgray\" fixed-width></ons-icon>`.repeat(5)}\r\n                            <span style=\"display: inline-block; color: gray;\">\r\n                            ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                        `(${productsArray[index].rating_count})` : \"\"}\r\n                           </span>\r\n                        </div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left;\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left; text-decoration: line-through; \r\n                        ${productsArray[index].on_sale === true ? \"visibility: visible\": \"visibility: hidden\"}\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}</div>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                        </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#products-page #products-contents-container').html(productsContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#products-page #products-contents-container').append(productsContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#products-page #products-contents-container').prepend(productsContent);\r\n                        }\r\n                    }\r\n\r\n                    // allow infinite page scroll to be triggered\r\n                    $('#products-page').get(0)._allowInfinitePageScroll = true;\r\n                    resolve(productsArray.length); // resolve the promise with length of the productsArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#products-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks any product item from the products collection\r\n         *\r\n         * @param productIndex {Integer} holds the index position for the product that was clicked.\r\n         * The index position is gotten from the 'appropriate' cached array of product items\r\n         *\r\n         * @param productPage {Integer} specifies which query page/collection from the cached products\r\n         * the clicked product item belongs to.\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async productItemClicked(productIndex, productPage){\r\n            // handle the function task in a different event queue\r\n            window.setTimeout(async function(){\r\n\r\n                try{\r\n                    // get the product items collection\r\n                    let productItemsArray = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData((\"\" + productPage).padStart(7, \"0\") + \"products\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).products;\r\n\r\n                    // display the products details page using the selected product\r\n                    $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\",\r\n                        {animation: \"lift\", data: {product : productItemsArray[productIndex]}});\r\n                }\r\n                catch(err){\r\n\r\n                }\r\n            }, 0);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Product Details page\r\n     */\r\n    productDetailsPageViewModel: {\r\n\r\n        /**\r\n         * holds the object which contains the current product and its details\r\n         */\r\n        currentProductDetails: null,\r\n\r\n        /**\r\n         * holds the index position (within the productVaritionsArray) of the\r\n         * current product variation selected by the user\r\n         */\r\n        currentProductVariationIndex: -1,\r\n\r\n        /**\r\n         * holds the product variations array\r\n         */\r\n        productVariationsArray: [],\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#product-details-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#product-details-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#product-details-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"Pick Quantity\" button\r\n                    new ej.inputs.NumericTextBox({\r\n                        cssClass: 'product-details-quantity-class',\r\n                        currency: null,\r\n                        decimals: 0,\r\n                        floatLabelType: 'Auto',\r\n                        format: 'n',\r\n                        showSpinButton: false,\r\n                        min: 1,\r\n                        max: 10,\r\n                        placeholder: 'Pick Quantity',\r\n                        step: 1,\r\n                        strictMode: true,\r\n                        // sets value to the NumericTextBox\r\n                        value: 1\r\n                    }).appendTo('#product-details-quantity');\r\n\r\n                    // create the \"Add To Cart\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#product-details-add-to-cart');\r\n\r\n                    // create the \"Customise\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-brush utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-customise-product');\r\n\r\n                    // create the \"Review\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-small',\r\n                        iconCss: \"zmdi zmdi-star-outline\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-review');\r\n\r\n                    // create the \"Share\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-small',\r\n                        iconCss: \"zmdi zmdi-share\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo('#product-details-share');\r\n\r\n                    // load product variations asynchronously without waiting for the response\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.loadProductVariations();\r\n                    // load product details\r\n                    let productDetailsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.loadProduct();\r\n                    // display the loaded product details\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.displayProductDetails(productDetailsArray[0]);\r\n                    // enable the \"Add To Cart\" button\r\n                    $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n\r\n                }\r\n                catch(err){\r\n\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide the preloader\r\n                    $('#product-details-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // update cart count\r\n            $('#product-details-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            window.SoftInputMode.set('adjustResize');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy properties\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.currentProductDetails = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.currentProductVariationIndex = -1;\r\n            // reset the product variations array\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.productVariationsArray = [];\r\n\r\n            // destroy the ej2 components on the page\r\n            $('#product-details-quantity').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-review').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-share').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-add-to-cart').get(0).ej2_instances[0].destroy();\r\n            $('#product-details-customise-product').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy any product variation dropdown list\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                element.ej2_instances[0].destroy(); // destroy the dropdown list component\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get the pages stack from the app main navigator\r\n            var pagesStackArray = $('#app-main-navigator').get(0).pages;\r\n\r\n            // check that there is more than 1 page in the stack\r\n            if(pagesStackArray.length > 1){ // there is more than 1 page in the page stack\r\n                // get the previous Page in stack before this one\r\n                let previousPage = $(pagesStackArray[pagesStackArray.length - 2]).get(0);\r\n\r\n                // check which page has is being displayed AFTER a page was popped\r\n                switch(previousPage.id){\r\n                    case \"app-main-page\": // the page that is being displayed is the \"App-Main\" page\r\n                        // check which page on the app-main tab is visible\r\n                        if($('#app-main-tabbar').get(0).getActiveTabIndex() === 4){ // the \"Products\" page is visible\r\n                            // get back to the previous page on the app-main navigator stack\r\n                            // and set the 'resetPageDisplay' to false\r\n                            $('#app-main-navigator').get(0)._resetPageDisplay = false;\r\n                            // allow infinite page scroll to be triggered on the \"Products\" page\r\n                            $('#products-page').get(0)._allowInfinitePageScroll = true;\r\n                            $('#app-main-navigator').get(0).popPage();\r\n                        }\r\n                        else{\r\n                            // get back to the previous page on the app-main navigator stack\r\n                            $('#app-main-navigator').get(0).popPage();\r\n                        }\r\n                        break;\r\n                    default:\r\n                        // get back to the previous page on the app-main navigator stack\r\n                        $('#app-main-navigator').get(0).popPage();\r\n                        break\r\n                }\r\n            }\r\n            else{ // there is only 1 page in the stack\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Share\" button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async shareButtonClicked(){\r\n            var shareOptions = {}; // holds the options for sharing\r\n            shareOptions.message = \"check out this #ShopOakExclusive product\";\r\n            shareOptions.chooserTitle = \"share product with...\";\r\n\r\n            // handle the task in a separate event block\r\n            window.setTimeout(function(){\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the index of the currently selected variation\r\n                    let productVariationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductVariationIndex;\r\n                    // get the currently selected product variation using the selected index\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        productVariationsArray[productVariationIndex];\r\n                    // update the url for the product\r\n                    shareOptions.url = productVariation.permalink;\r\n                    // update the file/image of the product to be share\r\n                    shareOptions.files = [productVariation.image && productVariation.image !== \"\"? productVariation.image.src :\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                            currentProductDetails.images[0].src];\r\n                }\r\n                else{ // no product variation was selected, so use the default product details\r\n                    shareOptions.url = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductDetails.permalink;\r\n                    // update the file/image of the product to be share\r\n                    shareOptions.files = [utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductDetails.images[0].src];\r\n                }\r\n\r\n                // also copy the text to clipboard\r\n                cordova.plugins.clipboard.copy(`${shareOptions.message} | ${shareOptions.url}`,\r\n                    function(){\r\n                        // inform the user that message has been copied to clipboard\r\n                        window.plugins.toast.showWithOptions({\r\n                            message: \"shared message copied to clipboard\",\r\n                            duration: 3000,\r\n                            position: \"center\",\r\n                            styling: {\r\n                                cornerRadius: 0,\r\n                                opacity: 1,\r\n                                backgroundColor: '#3F51B5',\r\n                                textColor: '#FFFFFF',\r\n                                textSize: 14\r\n                            }\r\n                        });\r\n                    }, function(){});\r\n                // open the device share dialog\r\n                window.plugins.socialsharing.shareWithOptions(shareOptions, function(){}, function(){});\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#product-details-page #product-details-page-pull-hook').attr(\"disabled\", true);\r\n\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            // disable the \"Add To Cart\" button\r\n            $('#product-details-page #product-details-add-to-cart').attr(\"disabled\", true);\r\n            // remove the spinner from the 'Add To Cart'\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop();\r\n\r\n            try{\r\n                // load product variations asynchronously without waiting for the response\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.loadProductVariations();\r\n                // load product details\r\n                let productDetailsArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.loadProduct();\r\n                // display the loaded product details\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productDetailsPageViewModel.displayProductDetails(productDetailsArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#product-details-page #product-details-page-pull-hook').removeAttr(\"disabled\");\r\n                // enable the \"Add To Cart\" button\r\n                $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product detail.\r\n         *\r\n         * The product to be loaded can be directly passed to the page for loading OR\r\n         * the id of the product can be provided to the page, so that the product is\r\n         * retrieved from the remote server\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProduct(){\r\n            var productPromisesArray = []; // holds the array for the promises used to load the product\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to see updated product details`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            // check if all the product details were provided to the page\r\n            if($('#app-main-navigator').get(0).topPage.data.product){ // all product details were provided\r\n                let aProduct = $('#app-main-navigator').get(0).topPage.data.product; // get the product details\r\n\r\n                if(!aProduct.regular_price || aProduct.regular_price == \"\"){ // regular price was NOT set, so set it\r\n                    aProduct.regular_price = \"0.00\";\r\n                }\r\n\r\n                // set the current product to that which was provided to the page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductDetails = aProduct;\r\n\r\n                productPromisesArray.push(Promise.resolve(aProduct)); // resolve the promise with the product details\r\n            }\r\n            else{ // at least the product id was provided\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/products/${jQuery('#app-main-navigator').get(0).topPage.data.productId}`,\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true\r\n                        }\r\n                    )).then(function(product){\r\n                        if(!product.regular_price || product.regular_price == \"\"){ // regular price was NOT set, so set it\r\n                            product.regular_price = \"0.00\";\r\n                        }\r\n                        // set the current product to that which was retrieved from the server\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                            currentProductDetails = product;\r\n                        resolve(product); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a Promise which resolves when all promises resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product variations.\r\n         *\r\n         * The product variations to be loaded is gotten from the product directly passed to the page OR\r\n         * the prduct id passed to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProductVariations(){\r\n            var productPromisesArray = []; // holds the array for the promises used to load the product\r\n            var productId = null; // holds the product id\r\n\r\n            // check if all the product details were provided to the page\r\n            if($('#app-main-navigator').get(0).topPage.data.product){ // all product details were provided\r\n                // save the product id\r\n                productId = $('#app-main-navigator').get(0).topPage.data.product.id;\r\n\r\n            }\r\n            else{ // at least the product id was provided\r\n                // save the product id\r\n                productId = jQuery('#app-main-navigator').get(0).topPage.data.productId;\r\n            }\r\n\r\n            // load the requested products variations from the server\r\n            productPromisesArray.push(new Promise(function(resolve, reject){\r\n                Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/products/${productId}/variations`,\r\n                        type: \"get\",\r\n                        //contentType: \"application/x-www-form-urlencoded\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: true,\r\n                        data: {page: 1, per_page: 99, status: 'publish'}\r\n                    }\r\n                )).then(function(productVariations){\r\n                    // map the retrieved variations and save the unique value for the variation.\r\n                    // The unique value is used to uniquely identify the variation\r\n                    productVariations = productVariations.map(function(currentElement, index){\r\n                        // join all options from the variation attributes to create a unique value\r\n                        currentElement._variationValue = currentElement.attributes.map(function(attribute){\r\n                            return attribute.option;\r\n                        }).join(\"\");\r\n\r\n                        return currentElement;\r\n                    });\r\n\r\n                    // save the retrieved production variations\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.productVariationsArray = productVariations;\r\n\r\n                    resolve(productVariations); // resolve the parent promise with the data gotten from the server\r\n\r\n                }).catch(function(err){ // an error occurred\r\n\r\n                    reject(err); // reject the parent promise with the error\r\n                });\r\n            }));\r\n\r\n            return Promise.all(productPromisesArray); // return a Promise which resolves when all promises resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the product details on the page\r\n         *\r\n         * @param productDetails {Object} the product object to be displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayProductDetails(productDetails){\r\n            // update the product details image\r\n            $('#product-details-page .e-card-image').css(\"background-image\", `url(\"${productDetails.images[0].src}\")`);\r\n\r\n            // check if the product is on-sale\r\n            if(productDetails.on_sale === true){ // product is on-sale\r\n                $('#product-details-page .e-card-image').\r\n                html(`\r\n                <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productDetails.price) -\r\n                    kendo.parseFloat(productDetails.regular_price)) /\r\n                    kendo.parseFloat(productDetails.regular_price === \"0.00\" ?\r\n                        productDetails.price : productDetails.regular_price))\r\n                    * 100)}% OFF\r\n                 </span>`);\r\n            }\r\n\r\n            // update the product title/name\r\n            $('#product-details-page .e-card-title').html(`${productDetails.name}`);\r\n            // update product price\r\n            $('#product-details-page .product-details-price').\r\n            html(`&#x20a6;${kendo.toString(kendo.parseFloat(productDetails.price), \"n2\")}`);\r\n\r\n            // check if product is on-sale\r\n            if(productDetails.on_sale === true){ // product is on-sale\r\n                // update the regular price\r\n                $('#product-details-page .product-details-regular-price').\r\n                html(`&#x20a6;${kendo.toString(kendo.parseFloat(productDetails.regular_price), \"n2\")}`);\r\n                // make the regular price visible\r\n                $('#product-details-page .product-details-regular-price').css(\"visibility\", \"visible\");\r\n                // add 'sales' class to the quantity component\r\n                $('#product-details-quantity').get(0).ej2_instances[0].cssClass = \"product-details-quantity-class sales\";\r\n                $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n            }\r\n            else{ // product is NOT on-sale\r\n                // make the regular price invisible\r\n                $('#product-details-page .product-details-regular-price').css(\"visibility\", \"collapse\");\r\n                // remove 'sales' class from the quantity component\r\n                $('#product-details-quantity').get(0).ej2_instances[0].cssClass = \"product-details-quantity-class\";\r\n                $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n            }\r\n\r\n            // reset the product details quantity numeric input field\r\n            $('#product-details-quantity').get(0).ej2_instances[0].value = 1;\r\n            $('#product-details-quantity').get(0).ej2_instances[0].dataBind();\r\n\r\n            // update the product details description\r\n            $('#product-details-page .product-details-description').html(`${productDetails.short_description}`);\r\n\r\n            // destroy any previous product variation dropdown list that may previously exist before creating the new ones\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                element.ej2_instances[0].destroy(); // destroy the dropdown list component\r\n            });\r\n\r\n            // add/update product details variation\r\n            // expand the variations content\r\n            $('#product-details-page .product-details-variations').removeClass('expandable-content');\r\n            let variationContent = ''; // holds the product details variation content\r\n            for(let index = 0; index < productDetails.attributes.length; index++){\r\n                // create the product details variations\r\n                variationContent += `<div class=\"col-xs-4\" style=\"padding-right: 5px; padding-left: 5px;\">\r\n                    <select name=\"${productDetails.attributes[index].name}\" class=\"product-details-variation-option\">\r\n                        ${productDetails.attributes[index].options.map(function(arrayElem){\r\n                            return `<option value=\"${arrayElem}\">${arrayElem}</option>`;\r\n                }).join(\"\")}\r\n                    </select>\r\n                </div>`;\r\n            }\r\n            // insert the created Select inputs to the page\r\n            $('#product-details-page .product-details-variations').html(variationContent);\r\n\r\n            // create the dropdown list from each of the select input\r\n            $('#product-details-page .product-details-variation-option').each(function(index, element){\r\n                // check if this product details has default attributes set\r\n                if(productDetails.default_attributes.length > 0){ // there are default attributes\r\n                    // set those default attributes for the variations\r\n                    $(`option[value=\"${productDetails.default_attributes[index].option}\"]`, element).attr(\"selected\", true);\r\n                }\r\n                // create the dropdown list from the select input\r\n                new ej.dropdowns.DropDownList(\r\n                    {\r\n                        cssClass: \"product-details-variation-class\",\r\n                        placeholder: productDetails.attributes[index].name,\r\n                        floatLabelType: 'Always',\r\n                        change: async function () { // listen for when dropdown list value changes\r\n                            // return a Promise which resolves when the change is completed\r\n                            return new Promise(function(resolve2, reject2){\r\n\r\n                                // handle the change in a separate event block\r\n                                window.setTimeout(async function(){\r\n                                    let concatenatedVarationValue = \"\"; // holds the concatenated variation values\r\n                                    // get the value from all the variation select-input/dropdown and concatenate them\r\n                                    $('#product-details-page .product-details-variation-option').each(function(index2, element2){\r\n                                        concatenatedVarationValue += element2.ej2_instances[0].value;\r\n                                    });\r\n\r\n                                    // since the concatenated variation value, is also what is used to uniquely identify each varition,\r\n                                    // check if there is any variation with the same unique value has the concatenated variation value.\r\n                                    // Also, assign the index position of the 'found' variation (if anty) to the current variation index property\r\n                                    let variationIndexPosition =\r\n                                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        productDetailsPageViewModel.productVariationsArray.findIndex(function(element3){\r\n                                            return concatenatedVarationValue === element3._variationValue;\r\n                                        });\r\n                                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                                        currentProductVariationIndex = variationIndexPosition;\r\n\r\n                                    // check if there is a product variation that matches the user's selection\r\n                                    if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                                        currentProductVariationIndex !== -1){ // there is a product variation\r\n                                        // get the product variation\r\n                                        let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                            productDetailsPageViewModel.productVariationsArray[variationIndexPosition];\r\n                                        // update the product details display image and price to that of the selected variation (if any)\r\n                                        if(productVariation.image && productVariation.image !== \"\"){\r\n                                            // update the product details image\r\n                                            $('#product-details-page .e-card-image').css(\"background-image\",\r\n                                                `url(\"${productVariation.image.src}\")`);\r\n                                        }\r\n                                        if(productVariation.price && productVariation.price !== \"\"){\r\n                                            // update product price\r\n                                            $('#product-details-page .product-details-price').\r\n                                            html(`&#x20a6;${kendo.toString(kendo.parseFloat(productVariation.price), \"n2\")}`);\r\n                                        }\r\n                                    }\r\n\r\n                                    // resolve the parent Promise object to signified that change is completed\r\n                                    resolve2();\r\n\r\n                                }, 0);\r\n                            });\r\n                        }\r\n                    }).appendTo(element);\r\n            });\r\n\r\n            // collapse the variations content\r\n            $('#product-details-page .product-details-variations').addClass('expandable-content');\r\n\r\n            // update the rating for the product details\r\n            $('#product-details-page .product-details-rating').\r\n            html(`\r\n            ${Math.floor(kendo.parseFloat(productDetails.average_rating)) > 0 ?\r\n                '<ons-icon icon=\"md-star\" fixed-width></ons-icon>'.\r\n                repeat(Math.floor(kendo.parseFloat(productDetails.average_rating))) :\r\n                '<ons-icon icon=\"md-star-outline\" style=\"color: lightgray\" fixed-width></ons-icon>'.repeat(5)}\r\n                <span style=\"display: inline-block; color: gray;\">\r\n                ${Math.floor(kendo.parseFloat(productDetails.average_rating)) > 0 ? \r\n                `(${productDetails.rating_count})` : \"\"}\r\n                </span>\r\n            `);\r\n\r\n            // update the extra/more details for the product\r\n            $('#product-details-page .product-details-more-description').html(`\r\n            ${productDetails.description}`);\r\n\r\n            // update the dimensions for the product details\r\n            $('#product-details-page .product-details-dimensions').html(`\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">length - ${!productDetails.dimensions.length ||\r\n            productDetails.dimensions.length == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.length}`}</span>\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">width - ${!productDetails.dimensions.width ||\r\n            productDetails.dimensions.width == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.width}`}</span>\r\n            <span class=\"list-item__subtitle\" style=\"display: block\">height - ${!productDetails.dimensions.height ||\r\n            productDetails.dimensions.height == \"\" ? \"(Not Available)\" : `${productDetails.dimensions.height}`}</span>`);\r\n\r\n            // update the weight for the product\r\n            $('#product-details-page .product-details-weight').html(`${!productDetails.weight ||\r\n            productDetails.weight == \"\" ? \"(Not Available)\" : `${productDetails.weight}`}`);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the customise button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async customiseButtonClicked(){\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to customise product`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // perform the method task in a separate event block\r\n            window.setTimeout(async function(){\r\n                var productUrl = \"\"; // holds the url for the product being customised\r\n\r\n                // check if the user has selected a product variation or if the default product is being customised\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                    currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the index position of the selected variation\r\n                    let variationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        currentProductVariationIndex;\r\n                    // get the production variation object\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.\r\n                        productVariationsArray[variationIndex];\r\n                    productUrl = productVariation.permalink; // set the product url\r\n                }\r\n                else{ // no product variation was selected, so use the default product details\r\n                    productUrl = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductDetails.permalink; // set the product url\r\n                }\r\n\r\n                // load the \"Customise Product\" page to the app-main-navigator\r\n                await $('#app-main-navigator').get(0).pushPage(\"customise-product-page.html\");\r\n                // load the product customisation url\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    customiseProductPageViewModel.loadProductCustomisation(productUrl);\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Add To Cart\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async addToCartButtonClicked(){\r\n\r\n            // disable the \"Add To Cart\" button\r\n            $('#product-details-page #product-details-add-to-cart').attr(\"disabled\", true);\r\n            // add the spinner from the 'Add To Cart'\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = '';\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].start();\r\n\r\n            // perform the task of including the product into the local cart in a separate event block\r\n            window.setTimeout(async function(){\r\n                let localCart = []; // holds the local cart collection\r\n                let utopiasoftwareCartObject = {cartData: {}}; // holds the object whose properties make up the cart item\r\n\r\n                // get the cached user cart\r\n                try{\r\n                    localCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(\"user-cart\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n                }\r\n                catch(err){}\r\n\r\n                // check if a product variation was selected\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductVariationIndex !== -1){ // a product variation was selected\r\n                    // get the selected product variation index position and the accompanying variation object\r\n                    let variationIndex = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.currentProductVariationIndex;\r\n                    let productVariation = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productDetailsPageViewModel.productVariationsArray[variationIndex];\r\n\r\n                    utopiasoftwareCartObject.cartData.variation_id = productVariation.id;\r\n\r\n                    // get the search parameters object from the product variation url\r\n                    let searchParams = new URLSearchParams(productVariation.permalink.split(\"?\")[1]);\r\n                    // get the variation attributes from searchParams object and assign them in cartData object\r\n                    utopiasoftwareCartObject.cartData.variation = {};\r\n                    for(let [key, value] of searchParams){\r\n                        utopiasoftwareCartObject.cartData.variation[key] = value;\r\n                    }\r\n\r\n                    // store the product variation object as additional data just for the mobile app\r\n                    utopiasoftwareCartObject.productVariation = productVariation;\r\n                }\r\n                // set the other properties of the cart data\r\n                utopiasoftwareCartObject.cartData.product_id = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductDetails.id;\r\n                utopiasoftwareCartObject.cartData.quantity = $('#product-details-quantity').get(0).ej2_instances[0].value;\r\n\r\n                // store the product object as additional data just for the mobile app\r\n                utopiasoftwareCartObject.product = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    productDetailsPageViewModel.currentProductDetails;\r\n                // store a unique local-cart uid to identify the product\r\n                utopiasoftwareCartObject.uid = Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine);\r\n\r\n                try{\r\n                    // add the created 'utopiasoftwareCartObject' to the user cart collection\r\n                    localCart.push(utopiasoftwareCartObject);\r\n                    // save the updated cached user cart\r\n                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                        {_id: \"user-cart\", docType: \"USER_CART\", cart: localCart},\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                    // inform the user that the product has been added to cart\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'success-ej2-toast';\r\n                    toast.timeOut = 2000;\r\n                    toast.content = `Product has been added to your cart`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n\r\n                    console.log(\"USER CART OBJECT\", utopiasoftwareCartObject);\r\n                }\r\n                catch(err){\r\n                    console.log(\"PRODUCT DETAILS ERROR\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.timeOut = 3500;\r\n                    toast.content = `Error adding product to your cart. Try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // enable the \"Add To Cart\" button\r\n                    $('#product-details-page #product-details-add-to-cart').removeAttr(\"disabled\");\r\n                    // hide the spinner from the 'Add To Cart'\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n                    $('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop();\r\n                }\r\n\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Customise Product page\r\n     */\r\n    customiseProductPageViewModel: {\r\n\r\n        /**\r\n         * holds the current customisation url that has been loaded\r\n         */\r\n        currentCustomisationUrl : \"\",\r\n\r\n        /**\r\n         * holds the remote/server cart item key for the current customised product\r\n         */\r\n        currentCustomisationCartKey: null,\r\n\r\n        /**\r\n         * holds the number of times the customisation page has been loaded from the parent server\r\n         */\r\n        customisationPageLoadCount: 0,\r\n\r\n        /**\r\n         * holds the fixed-length queue containing the previous cart object and the new/update cart object.\r\n         * The queue can only contain a max of 2 items. older items are pushed out first.\r\n         * The initial cart object is also gotten the first time this app page is loaded or refreshed\r\n         */\r\n        cartsQueue: [],\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#customise-product-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for listening to messages from the parent site\r\n                window.addEventListener(\"message\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    customiseProductPageViewModel.receiveMessageListener, false);\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#customise-product-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#customise-product-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#customise-product-cancel');\r\n\r\n                    // create the \"Add To Cart\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#customise-product-add-to-cart');\r\n\r\n\r\n                }\r\n                catch(err){\r\n                    console.log(\"CUSTOMISATION ERROR\", err);\r\n                }\r\n                finally {\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // update cart count\r\n            $('#customise-product-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // reset the current customisation url\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.currentCustomisationUrl = \"\";\r\n            // reset the current customisation remote cart item key\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.currentCustomisationCartKey = null;\r\n            // reset the customisation page load count\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.customisationPageLoadCount = 0;\r\n            // reset the cartsQueue\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.cartsQueue = [];\r\n\r\n            // remove listener for listening to messages from the parent site\r\n            window.removeEventListener(\"message\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                customiseProductPageViewModel.receiveMessageListener, false);\r\n\r\n            $('#customise-product-cancel').get(0).ej2_instances[0].destroy();\r\n            $('#customise-product-add-to-cart').get(0).ej2_instances[0].destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n            $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to customise product\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is used to handle the receipt of messages from the parent website\r\n         *\r\n         * @param receiveEvent {Event} this is the event object of the \"Message\" event\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async receiveMessageListener(receiveEvent){\r\n            // check where the message originated from\r\n            if(receiveEvent.origin !== \"https://shopoakexclusive.com\"){ // message is not from the parent website\r\n                return; // exit\r\n            }\r\n\r\n            // check the data that was sent\r\n            if(receiveEvent.data === \"page ready\"){ // parent site is ready to work together\r\n                // update the customisation page load count by 1\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                    customisationPageLoadCount += 1;\r\n                // remove the page preloader\r\n                $('#customise-product-page .page-preloader').css(\"display\", \"none\");\r\n                return;\r\n            }\r\n            else{ // the page sent cart data\r\n                // access the cart data\r\n                let cartData = JSON.parse(receiveEvent.data);\r\n                if(Array.isArray(cartData)){ // the cart data is an array, therefore it's empty\r\n                    // push an empty object into the cart queue property\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.\r\n                    push({});\r\n                }\r\n                else{ // cart data is not an array\r\n                    // push the cart data into the cart queue\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.\r\n                    push(cartData);\r\n                }\r\n\r\n                // check if the cartQueue property is greater than its maximum allowed length of 2\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                    cartsQueue.length > 2){ // cartQueue property is greater than 2 elements\r\n                    // remove the oldest element from the queue\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                        cartsQueue.shift();\r\n                }\r\n\r\n                // save the customised product to local cart cache (do this in a separate event queue)\r\n                window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                saveCustomisedProductToCart, 0);\r\n\r\n                // enable the \"Add To Cart\" button\r\n                $('#customise-product-page #customise-product-add-to-cart').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Add To Cart'\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n                $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // show the page preloader\r\n            $('#customise-product-page .page-preloader').css(\"display\", \"block\");\r\n            // disable the \"Add To Cart\" button\r\n            $('#customise-product-page #customise-product-add-to-cart').attr(\"disabled\", true);\r\n            // remove the spinner from the 'Add To Cart'\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();\r\n\r\n            // hide page loader\r\n            $('#customise-product-page #customise-product-page-iframe-container .modal').css(\"display\", \"none\");\r\n\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#customise-product-page #customise-product-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // reload the current product customisation url  & current remote cart item key into the iframe\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n               customiseProductPageViewModel.\r\n                loadProductCustomisation(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    customiseProductPageViewModel.currentCustomisationUrl,\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.currentCustomisationCartKey);\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                window.setTimeout(function(){ // wait for 2 sec before declaring loading done\r\n                    // enable pull-to-refresh widget till loading is done\r\n                    $('#customise-product-page #customise-product-page-pull-hook').removeAttr(\"disabled\");\r\n                    // signal that loading is done\r\n                    doneCallBack();\r\n                }, 2000);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load a particular product/product variation customisation.\r\n         *\r\n         * @param customisationUrl {String} holds the url for the product to be customised\r\n         *\r\n         * @param remoteCartItemKey {String} holds the remote cart item key for the\r\n         * product being customised\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProductCustomisation(customisationUrl = utopiasoftware[utopiasoftware_app_namespace].\r\n            controller.customiseProductPageViewModel.currentCustomisationUrl, remoteCartItemKey){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to customise product and Pull Down to refresh`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // check if the 'remoteCartItemKey' has been provided\r\n            if(remoteCartItemKey){ // the remote cart item key was provided\r\n                if(customisationUrl.indexOf(\"?\") < 0){ // there are NO previous query parameters\r\n                    // attach the cart item key to the available customisation url & load it\r\n                    // load the specified url into the customisation iframe\r\n                    $('#customise-product-page #customise-product-page-iframe').attr(\"src\",\r\n                        customisationUrl + `?cart_item_key=${window.encodeURIComponent(remoteCartItemKey)}`);\r\n                }\r\n                else{ // there are previous query parameters\r\n                    // attach the cart item key to the previous query parameters and load the customisation url\r\n                    // load the specified url into the customisation iframe\r\n                    $('#customise-product-page #customise-product-page-iframe').attr(\"src\",\r\n                        customisationUrl + `&cart_item_key=${window.encodeURIComponent(remoteCartItemKey)}`);\r\n                }\r\n            }\r\n            else{ // NO remote cart item key was provided\r\n                // load the specified url (as is) into the customisation iframe\r\n                $('#customise-product-page #customise-product-page-iframe').attr(\"src\", customisationUrl);\r\n            }\r\n\r\n            // update the current customisation url\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                currentCustomisationUrl = customisationUrl;\r\n\r\n            // update the current remote/server cart item key for the product being customised\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                currentCustomisationCartKey = remoteCartItemKey;\r\n\r\n            // reset the page load count and cartsQueue properties\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                customisationPageLoadCount = 0;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue = [];\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * method is used to compare the cartQueue property and saves the latest customised product to\r\n         * local cart cache in the app database\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async saveCustomisedProductToCart(){\r\n            // get the previous remote cart object and the new/updated remote cart object\r\n            let previousCartObject = utopiasoftware[utopiasoftware_app_namespace].\r\n                controller.customiseProductPageViewModel.cartsQueue[0];\r\n            let updatedCartObject = utopiasoftware[utopiasoftware_app_namespace].\r\n                controller.customiseProductPageViewModel.cartsQueue[1];\r\n\r\n            // get the latest customised product by comparing the properties of the updateCartObject with the previousCartObject\r\n            for(let property in updatedCartObject){\r\n                // check if this property in the updateCartObject exist in th epreviousCartObject\r\n                if(! previousCartObject[property]){ // property does not exist in the previousCartObject, so this property belongs to the latest customised product\r\n                    // get the latest customised product\r\n                    let customisedProduct = updatedCartObject[property];\r\n\r\n                    console.log(\"CUSTOMISED PRODUCT\", customisedProduct);\r\n\r\n                    let localCart = []; // holds the local cart collection\r\n                    let utopiasoftwareCartObject = {cartData: {}}; // holds the object whose properties make up the cart item\r\n\r\n                    // get the cached user cart\r\n                    try{\r\n                        localCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(\"user-cart\",\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n\r\n                        // check if this is a save of an \"edited\" previously customised product\r\n                        if(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                            currentCustomisationCartKey){ // since a current customisation cart key exist, this is an update\r\n\r\n                            // get the utopiasoftwareCartObject for the old customised product being updated.\r\n                            // This old object will be replaced by the newly customised product, so delete it from app local cache/database\r\n                            let customisedIndex = localCart.findIndex(function(cartObject){\r\n                                return cartObject.anon_cart_key === utopiasoftware[utopiasoftware_app_namespace].\r\n                                    controller.customiseProductPageViewModel.currentCustomisationCartKey;\r\n                            });\r\n                            localCart.splice(customisedIndex, 1); // delete the old customised product\r\n                        }\r\n                    }\r\n                    catch(err){}\r\n\r\n                    // set the other properties of the cart data\r\n                    utopiasoftwareCartObject.cartData.product_id = customisedProduct.product_id;\r\n                    utopiasoftwareCartObject.cartData.quantity = customisedProduct.quantity;\r\n                    utopiasoftwareCartObject.cartData.variation_id = customisedProduct.variation_id;\r\n                    utopiasoftwareCartObject.cartData.variation = customisedProduct.variation;\r\n                    utopiasoftwareCartObject.cartData.cart_item_data = {fpd_data: customisedProduct.fpd_data}; // holds the fancy product designer data\r\n\r\n                    // store the cart key used to identify the customised product as additional data just for the mobile app\r\n                    utopiasoftwareCartObject.anon_cart_key = customisedProduct.key;\r\n                    // store the name of the customised product as additional data just for the mobile app\r\n                    utopiasoftwareCartObject.product_name = customisedProduct.product_name;\r\n                    // store the cutomisationUrl of this product as additional data just for the mobile app\r\n                    utopiasoftwareCartObject.customisationUrl = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        customiseProductPageViewModel.currentCustomisationUrl;\r\n                    // store a unique local-cart uid to identify the product just for the mobile app\r\n                    utopiasoftwareCartObject.uid = Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine);\r\n\r\n                    try{\r\n                        // add the created 'utopiasoftwareCartObject' to the user cart collection\r\n                        localCart.push(utopiasoftwareCartObject);\r\n                        // save the updated cached user cart\r\n                        await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"user-cart\", docType: \"USER_CART\", cart: localCart},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        // inform the user that the product has been added to cart\r\n                        // hide all previously displayed ej2 toast\r\n                        $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                        $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                        // display toast to show that an error\r\n                        let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                        toast.cssClass = 'success-ej2-toast';\r\n                        toast.timeOut = 2000;\r\n                        toast.content = `Customised product has been added to your cart`;\r\n                        toast.dataBind();\r\n                        toast.show();\r\n                    }\r\n                    catch(err){\r\n                        console.log(\"CUSTOMISE PRODUCT ERROR\", err);\r\n\r\n                        // hide all previously displayed ej2 toast\r\n                        $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                        $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                        // display toast to show that an error\r\n                        let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                        toast.cssClass = 'error-ej2-toast';\r\n                        toast.timeOut = 3500;\r\n                        toast.content = `Error adding customised product to your cart. Try again`;\r\n                        toast.dataBind();\r\n                        toast.show();\r\n\r\n                    }\r\n                    finally{\r\n                        // check if this is a save of an \"edited\" previously customised product\r\n                        if(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                            currentCustomisationCartKey){ // since a current customisation cart key exist, this is an update\r\n                            // update the 'currentCustomisationCartKey' property with the key of the newly customised product\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.\r\n                                currentCustomisationCartKey = customisedProduct.key;\r\n                        }\r\n\r\n                        // hide page loader after saving the customised product to user cart\r\n                        $('#customise-product-page #customise-product-page-iframe-container .modal').css(\"display\", \"none\");\r\n                    }\r\n\r\n                    break; // break the for-loop since the latest customised product has been found\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Add To Cart\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async addToCartButtonClicked(){\r\n\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please connect to the Internet to add customised product to cart`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // show the spinner on the 'Add To Cart' button to indicate process is ongoing\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass = '';\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind();\r\n            $('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].start();\r\n\r\n            // display page loader while completing the \"add to cart\" request\r\n            $('#customise-product-page #customise-product-page-iframe-container .modal').css(\"display\", \"table\");\r\n\r\n            // call the method to submit the product customisation form located in the iframe window\r\n            $('#customise-product-page #customise-product-page-iframe').get(0).contentWindow.utopiasoftware_addUsage();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the View Cart page\r\n     */\r\n    viewCartPageViewModel: {\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#view-cart-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#view-cart-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#view-cart-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#view-cart-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#view-cart-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"Checkout\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#view-cart-checkout');\r\n\r\n                }\r\n                catch(err){\r\n\r\n                    console.log(\"VIEW-CART PAGE\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred. Pull down to refresh`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // update cart count\r\n            $('#view-cart-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            window.SoftInputMode.set('adjustResize');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy View Cart button\r\n            $('#view-cart-checkout').get(0).ej2_instances[0].destroy();\r\n            // destroy all the \"Edit\" buttons on the View Cart page\r\n            $(\"#view-cart-page .view-cart-edit-button\").each(function(index, element){\r\n                // destroy the \"Edit\" button\r\n                element.ej2_instances[0].destroy();\r\n            });\r\n\r\n            // destroy all the \"Remove\" buttons required for the View Cart page\r\n            $(\"#view-cart-page .view-cart-remove-button\").each(function(index, element){\r\n                // destroy the \"Remove\" button\r\n                element.ej2_instances[0].destroy();\r\n            });\r\n\r\n            // destroy all the \"Quantity\" input required for the View Cart page\r\n            $(\"#view-cart-page .view-cart-quantity-input\").each(function(index, element){\r\n                // destroy the \"Quantity\" input\r\n                element.ej2_instances[0].destroy();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#view-cart-page #view-cart-page-pull-hook').attr(\"disabled\", true);\r\n\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            // disable the \"Checkout\" button\r\n            $('#view-cart-page #view-cart-checkout').attr(\"disabled\", true);\r\n            // remove the spinner from the 'Add To Cart'\r\n            $('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n            $('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].dataBind();\r\n            $('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].stop();\r\n\r\n            try{\r\n                // display the loaded product details\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();\r\n            }\r\n            catch(err){ // an error occurred\r\n\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#view-cart-page #view-cart-page-pull-hook').removeAttr(\"disabled\");\r\n                // enable the \"Checkout\" button\r\n                $('#view-cart-page #view-cart-checkout').removeAttr(\"disabled\");\r\n                // hide the preloader\r\n                $('#view-cart-page .page-preloader').css(\"display\", \"none\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to display the user cart on the View Cart page.\r\n         * @param localCart {Array}\r\n         *\r\n         * @returns Promise\r\n         */\r\n        async displayUserCart(localCart){\r\n            var displayContent = \"\"; // holds the cart content to be displayed\r\n            try{\r\n\r\n                try{\r\n                    // get the localCart from the parameter passed OR from the the cached loCart from app database\r\n                    localCart = localCart || (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"user-cart\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n                }\r\n                catch(err){\r\n                    // if error occurred during local cart retrieval\r\n                    localCart = []; // set localCart to empty array\r\n                }\r\n\r\n                if(localCart.length === 0){ // localCart is empty\r\n                    // display message to inform user that cart is empty\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'default-ej2-toast';\r\n                    toast.timeOut = 3000;\r\n                    toast.content = `Your cart is empty. Go order some products!`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n\r\n                    return; // exit method\r\n                }\r\n\r\n                // destroy all the \"Edit\" buttons on the View Cart page\r\n                $(\"#view-cart-page .view-cart-edit-button\").each(function(index, element){\r\n                    // destroy the \"Edit\" button\r\n                    element.ej2_instances[0].destroy();\r\n                });\r\n\r\n                // destroy all the \"Remove\" buttons required for the View Cart page\r\n                $(\"#view-cart-page .view-cart-remove-button\").each(function(index, element){\r\n                    // destroy the \"Remove\" button\r\n                    element.ej2_instances[0].destroy();\r\n                });\r\n\r\n                // destroy all the \"Quantity\" input required for the View Cart page\r\n                $(\"#view-cart-page .view-cart-quantity-input\").each(function(index, element){\r\n                    // destroy the \"Quantity\" input\r\n                    element.ej2_instances[0].destroy();\r\n                });\r\n\r\n                // display the contents of the cart using a for-loop\r\n                for(let index = 0; index < localCart.length; index++){\r\n                    displayContent +=\r\n                        `<div class=\"col-xs-12\" style=\"border-bottom: 1px lightgray solid\" \r\n                            data-utopiasoftware-product-uid=\"${localCart[index].uid}\">\r\n                        <div class=\"e-card e-card-horizontal\">`;\r\n\r\n                    if(localCart[index].anon_cart_key){ // this item is a customised product\r\n                        displayContent +=\r\n                            `<div class=\"e-card-image\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\r\n                            min-height: 100%; \r\n                            background-image: url('${localCart[index].cartData.cart_item_data.fpd_data.fpd_product_thumbnail}');\">\r\n                            </div>\r\n                            <div class=\"e-card-stacked\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 70%\">\r\n                            <div class=\"e-card-header\" style=\"padding: 0\">\r\n                            <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                ${localCart[index].product_name}\r\n                            </div>\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 11px; text-align: center; text-transform: capitalize\">\r\n                                &#x20a6;${kendo.toString(localCart[index].cartData.quantity * kendo.parseFloat(localCart[index].cartData.cart_item_data.fpd_data.fpd_product_price), \"n2\")}\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"e-card-content row\" style=\"padding: 0;\">\r\n                            <div class=\"col-xs-3\">\r\n                                <button type=\"button\" class=\"view-cart-edit-button\"\r\n                                        style=\"background-color: #ffffff; color: #3f51b5; height: 10px;\" \r\n                                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        viewCartPageViewModel.\r\n                                        editCartItemButtonClicked('${localCart[index].customisationUrl}', \r\n                                        '${localCart[index].anon_cart_key}')\"></button>\r\n                            </div>\r\n                            <div class=\"col-xs-4\">\r\n                                <button type=\"button\" class=\"view-cart-remove-button\"\r\n                                        style=\"background-color: #ffffff; color: #3f51b5; height: 10px;\" \r\n                                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        viewCartPageViewModel.deleteCartItemButtonClicked('${localCart[index].uid}')\"></button>\r\n                            </div>\r\n                            <div class=\"col-xs-5\">\r\n                                <input class=\"view-cart-quantity-input\" type=\"number\" style=\"padding-top: 2px;\" \r\n                                value=\"${localCart[index].cartData.quantity}\" \r\n                                data-utopiasoftware-product-uid=\"${localCart[index].uid}\">\r\n                            </div>\r\n                            </div>\r\n                            </div>`;\r\n                    }\r\n                    else if(localCart[index].productVariation){ // this product was NOT saved with customisation, but has variations\r\n                        displayContent +=\r\n                            `<div class=\"e-card-image\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\r\n                            min-height: 100%; \r\n                            background-image: \r\n                            url('${localCart[index].productVariation.image && localCart[index].productVariation.image !== \"\" ?\r\n                                localCart[index].productVariation.image.src : localCart[index].product.images[0].src}');\">\r\n                            </div>\r\n                            <div class=\"e-card-stacked\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 70%\">\r\n                            <div class=\"e-card-header\" style=\"padding: 0\">\r\n                            <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                ${localCart[index].product.name}\r\n                            </div>\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 11px; text-align: center; text-transform: capitalize\">\r\n                                &#x20a6;${kendo.toString(localCart[index].cartData.quantity * kendo.parseFloat((localCart[index].productVariation.price && localCart[index].productVariation.price !== \"\" ?\r\n                                localCart[index].productVariation.price : localCart[index].product.price)), \"n2\")}\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"e-card-content row\" style=\"padding: 0;\">\r\n                            <div class=\"col-xs-3\">\r\n                            </div>\r\n                            <div class=\"col-xs-4\">\r\n                                <button type=\"button\" class=\"view-cart-remove-button\"\r\n                                        style=\"background-color: #ffffff; color: #3f51b5; height: 10px;\" \r\n                                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        viewCartPageViewModel.deleteCartItemButtonClicked('${localCart[index].uid}')\"></button>\r\n                            </div>\r\n                            <div class=\"col-xs-5\">\r\n                                <input class=\"view-cart-quantity-input\" type=\"number\" style=\"padding-top: 2px;\" \r\n                                value=\"${localCart[index].cartData.quantity}\" \r\n                                data-utopiasoftware-product-uid=\"${localCart[index].uid}\">\r\n                            </div>\r\n                            </div>\r\n                            </div>`;\r\n                    }\r\n                    else if(! localCart[index].productVariation) { // this product was NOT ssaved with customisation, and has NO variations\r\n                        displayContent +=\r\n                            `<div class=\"e-card-image\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\r\n                            min-height: 100%; \r\n                            background-image: url('${localCart[index].product.images[0].src}');\">\r\n                            </div>\r\n                            <div class=\"e-card-stacked\" style=\"-webkit-flex-basis: auto; flex-basis: auto; width: 70%\">\r\n                            <div class=\"e-card-header\" style=\"padding: 0\">\r\n                            <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                ${localCart[index].product.name}\r\n                            </div>\r\n                            <div class=\"e-card-sub-title\" style=\"font-size: 11px; text-align: center; text-transform: capitalize\">\r\n                                &#x20a6;${kendo.toString(localCart[index].cartData.quantity * kendo.parseFloat(localCart[index].product.price), \"n2\")}\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <div class=\"e-card-content row\" style=\"padding: 0;\">\r\n                            <div class=\"col-xs-3\">                          \r\n                            </div>\r\n                            <div class=\"col-xs-4\">\r\n                                <button type=\"button\" class=\"view-cart-remove-button\"\r\n                                        style=\"background-color: #ffffff; color: #3f51b5; height: 10px;\" \r\n                                        onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        viewCartPageViewModel.deleteCartItemButtonClicked('${localCart[index].uid}')\"></button>\r\n                            </div>\r\n                            <div class=\"col-xs-5\">\r\n                                <input class=\"view-cart-quantity-input\" type=\"number\" style=\"padding-top: 2px;\" \r\n                                value=\"${localCart[index].cartData.quantity}\" \r\n                                data-utopiasoftware-product-uid=\"${localCart[index].uid}\">\r\n                            </div>\r\n                            </div>\r\n                            </div>`;\r\n                    }\r\n\r\n                    displayContent +=\r\n                        `</div>\r\n                         </div>`;\r\n                }\r\n\r\n                // attach the displayContent to the page\r\n                $('#view-cart-page #view-cart-contents-container').html(displayContent);\r\n\r\n                // create all the \"Edit\" buttons required for the View Cart page\r\n                $(\"#view-cart-page .view-cart-edit-button\").each(function(index, element){\r\n                    // create the \"Edit\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-round',\r\n                        iconCss: \"zmdi zmdi-edit utopiasoftware-icon-zoom-one-point-two\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo(element);\r\n                });\r\n\r\n                // create all the \"Remove\" buttons required for the View Cart page\r\n                $(\"#view-cart-page .view-cart-remove-button\").each(function(index, element){\r\n                    // create the \"Remove\" button\r\n                    new ej.buttons.Button({\r\n                        cssClass: 'e-flat e-round',\r\n                        iconCss: \"zmdi zmdi-delete utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo(element);\r\n                });\r\n\r\n                // create all the \"Quantity\" input required for the View Cart page\r\n                $(\"#view-cart-page .view-cart-quantity-input\").each(function(index, element){\r\n                    new ej.inputs.NumericTextBox({\r\n                        value: element.value,\r\n                        cssClass: 'view-cart-quantity-input-class',\r\n                        currency: null,\r\n                        decimals: 0,\r\n                        floatLabelType: 'Auto',\r\n                        format: 'n',\r\n                        showSpinButton: true,\r\n                        min: 1,\r\n                        max: 10,\r\n                        placeholder: ' ',\r\n                        step: 1,\r\n                        strictMode: true,\r\n                        width: '60%',\r\n                        // sets value to the NumericTextBox\r\n                        value: 1,\r\n                        change: function(){ // track changes in the quantity numeric input for every product\r\n                            let currentQuantityValue = this.value; // holds the current quantity value from the numeric input\r\n                            let product_uid = $(element).attr('data-utopiasoftware-product-uid');\r\n                            // dissplay page preloader\r\n                            $('#view-cart-page .page-preloader').css(\"display\", \"block\");\r\n\r\n                            // handle task in a separate event block\r\n                            window.setTimeout(async function(){\r\n                                try {\r\n\r\n                                    // find the product to be updated within the app localCart\r\n                                    let selectedProduct = localCart.find(function(productElement){\r\n                                        return productElement.uid === product_uid;\r\n                                    });\r\n                                    // update the quantity for the selected product\r\n                                    selectedProduct.cartData.quantity = currentQuantityValue;\r\n                                    // save the updated localCart object to the app cache/persistent storage\r\n                                    await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                        {_id: \"user-cart\", docType: \"USER_CART\", cart: localCart},\r\n                                        utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                                    // display the updated user cart\r\n                                    await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                    viewCartPageViewModel.displayUserCart(localCart);\r\n\r\n                                    // inform the user that the product has been added to cart\r\n                                    // hide all previously displayed ej2 toast\r\n                                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    // display toast to show that an error\r\n                                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                                    toast.cssClass = 'success-ej2-toast';\r\n                                    toast.timeOut = 2000;\r\n                                    toast.content = `Product quantity updated`;\r\n                                    toast.dataBind();\r\n                                    toast.show();\r\n                                }\r\n                                catch(err){\r\n                                    console.log(\"UPDATE PRODUCT QUANTITY\", err);\r\n                                    // hide all previously displayed ej2 toast\r\n                                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                                    // display toast to show that an error occurred\r\n                                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                                    toast.cssClass = 'error-ej2-toast';\r\n                                    toast.timeOut = 3500;\r\n                                    toast.content = `Product quantity not updated. Try again`;\r\n                                    toast.dataBind();\r\n                                    toast.show();\r\n                                }\r\n                                finally{\r\n                                    // hide page preloader\r\n                                    $('#view-cart-page .page-preloader').css(\"display\", \"none\");\r\n                                }\r\n\r\n                            }, 0);\r\n                        }\r\n                    }).appendTo(element);\r\n                });\r\n\r\n\r\n                // update the total price of items displayed\r\n                $('#view-cart-page #view-cart-total-price').html(`&#x20a6;${kendo.toString(\r\n                    utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.viewCartPageViewModel.calculateCartTotalPrice(localCart), \"n2\")}`);\r\n            }\r\n            finally{\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is a utility/helper function used to view/load and display the user's cart\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async viewCartPage(){\r\n\r\n            try{\r\n                // load the View Cart page\r\n                await $('#app-main-navigator').get(0).bringPageTop(\"view-cart-page.html\");\r\n                // display the user cart\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();\r\n                // enable the checkout button\r\n                $('#view-cart-page #view-cart-checkout').removeAttr(\"disabled\");\r\n            }\r\n            catch(err){\r\n                console.log(\"VIEW-CART PAGE\", err);\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = `Sorry, an error occurred. Pull down to refresh`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally {\r\n                // hide the preloader\r\n                $('#view-cart-page .page-preloader').css(\"display\", \"none\");\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is a utility function used to calculate the approximate total process of all items in\r\n         * a user's local cart\r\n         *\r\n         * @param localCart {Array} containing an array of items in the user's local cart\r\n         *\r\n         * @returns {number} the total price for all the items contained in cart\r\n         */\r\n        calculateCartTotalPrice(localCart = []){\r\n\r\n            if(localCart.length === 0){ // this is an empty cart, so just return 0\r\n                return 0.00;\r\n            }\r\n\r\n            // run an array reduce function which gets the sub-total price of each item in the cart by multiplying their\r\n            // quantity by the unit price. Then adding all sub-totals to get the total price\r\n\r\n            return localCart.reduce(function(accumulator, currentElement, currentIndex, thisArray){\r\n\r\n                console.log(\"ACCUMULATOR\", accumulator);\r\n                console.log(\"CURRENT INDEX\", currentIndex);\r\n                // check the types of products in the cart\r\n                if(currentElement.anon_cart_key){ // this item is a customised product\r\n                    // multiply the product unit price with the specified quantity and add the to the current cumulative total\r\n                    return accumulator + (currentElement.cartData.quantity *\r\n                        kendo.parseFloat(currentElement.cartData.cart_item_data.fpd_data.fpd_product_price));\r\n                }\r\n                else if(currentElement.productVariation){ // this product was NOT saved with customisation, but has variations\r\n                    // multiply the product unit price with the specified quantity and add the to the current cumulative total\r\n                    return accumulator + (currentElement.cartData.quantity *\r\n                    kendo.parseFloat((currentElement.productVariation.price && currentElement.productVariation.price !== \"\" ?\r\n                        currentElement.productVariation.price : currentElement.product.price)));\r\n                }\r\n                else if(! currentElement.productVariation) { // this product was NOT saved with customisation, and has NO variations\r\n                    // multiply the product unit price with the specified quantity and add the to the current cumulative total\r\n                    return accumulator + (currentElement.cartData.quantity * kendo.parseFloat(currentElement.product.price));\r\n                }\r\n\r\n            }, 0);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the Delete/Remove\" cart item button (attached to each product on the\r\n         * View Cart page) is clicked.\r\n         *\r\n         * @param productUId {String} the unique uid created for each product in\r\n         * the user's local cart. This identifies the product to be deleted from cart\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async deleteCartItemButtonClicked (productUId = \"\"){\r\n\r\n            // attach functions to handle the \"Reject/No\" and \"Accept/Yes\" buttons click event.\r\n            // These buttons are located in the 'Delete Cart Item Action Sheet'.\r\n            // Click event handlers must always be defined for these buttons when using this action sheet\r\n\r\n            // function for \"Reject/No\" button\r\n            $('#view-cart-page-delete-cart-item-action-sheet #view-cart-page-delete-cart-item-no').get(0).onclick =\r\n                async function(){\r\n                    // hide the action sheet\r\n                    await document.getElementById('view-cart-page-delete-cart-item-action-sheet').hide();\r\n                };\r\n\r\n            // function for \"Accept/Yes\" button\r\n            $('#view-cart-page-delete-cart-item-action-sheet #view-cart-page-delete-cart-item-yes').get(0).onclick =\r\n                async function(){\r\n                    let localCart = []; // holds the local cart array\r\n                    try{\r\n\r\n                        // display page preloader\r\n                        $('#view-cart-page .page-preloader').css(\"display\", \"block\");\r\n                        // hide the action sheet\r\n                        await document.getElementById('view-cart-page-delete-cart-item-action-sheet').hide();\r\n\r\n                        try{\r\n                            // get the localCart from the cached localCart of the app database\r\n                            localCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                            loadData(\"user-cart\",\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n                        }\r\n                        catch(err){}\r\n\r\n                        // get the product to be deleted from the cart\r\n                        let productIndex = localCart.findIndex(function(productElement, index){\r\n                            // check if this is the product being search for by comparing the product uid\r\n                            return productUId === productElement.uid;\r\n                        });\r\n\r\n                        // check if a product was found\r\n                        if(productIndex !== -1){ // product was found\r\n                            // delete the product from localCart\r\n                            localCart.splice(productIndex, 1);\r\n                        }\r\n\r\n                        // save the updated cart\r\n                        await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"user-cart\", docType: \"USER_CART\", cart: localCart},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        // hide from display, the cart item belonging to the deleted product\r\n                        let $cartDisplayedItem = $(`#view-cart-page .col-xs-12[data-utopiasoftware-product-uid=\"${productUId}\"]`);\r\n                        await kendo.fx($cartDisplayedItem).expand(\"vertical\").duration(250).reverse();\r\n                        // update the total price of items displayed\r\n                        $('#view-cart-page #view-cart-total-price').html(`&#x20a6;${kendo.toString(\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                            controller.viewCartPageViewModel.calculateCartTotalPrice(localCart), \"n2\")}`);\r\n\r\n                        // inform the user that the product has been removed from cart\r\n                        // hide all previously displayed ej2 toast\r\n                        $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                        $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                        // display toast to show that an error\r\n                        let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                        toast.cssClass = 'default-ej2-toast';\r\n                        toast.timeOut = 2000;\r\n                        toast.content = `Product has been deleted from your cart`;\r\n                        toast.dataBind();\r\n                        toast.show();\r\n                    }\r\n                    catch(err){\r\n                        console.log(\"DELETE CART ERROR\", err);\r\n                        // hide all previously displayed ej2 toast\r\n                        $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                        $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                        // display toast to show that an error\r\n                        let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                        toast.cssClass = 'error-ej2-toast';\r\n                        toast.timeOut = 3500;\r\n                        toast.content = `Error deleting product from your cart. Try again`;\r\n                        toast.dataBind();\r\n                        toast.show();\r\n                    }\r\n                    finally {\r\n                        // hide page preloader\r\n                        $('#view-cart-page .page-preloader').css(\"display\", \"none\");\r\n                    }\r\n                };\r\n\r\n            // display the delete confirmation dialog\r\n            await document.getElementById('view-cart-page-delete-cart-item-action-sheet').show();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Edit\" cart item button (attached to each product on the\r\n         * View Cart page) is clicked.\r\n         *\r\n         * @param productUrl {String} holds the remote/server url for the product desired to be edited\r\n         *\r\n         * @param cartItemKey {String} holds the remote/server cart key for this product/cart-item\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async editCartItemButtonClicked(productUrl, cartItemKey){\r\n\r\n            // load the \"Customise Product\" page to the app-main-navigator\r\n            await $('#app-main-navigator').get(0).bringPageTop(\"customise-product-page.html\");\r\n            // load the product customisation url\r\n            await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n            customiseProductPageViewModel.loadProductCustomisation(productUrl, cartItemKey);\r\n        },\r\n\r\n        /**\r\n         * method is triggerd when the \"Check Out\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async checkoutButtonClicked(){\r\n\r\n            let userDetails = null; // holds the user details\r\n\r\n            // check if a user has signed in\r\n            try{\r\n                // load the use details from the encrypted app database\r\n                userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n            }\r\n            catch(err){\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please sign in to checkout your cart`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                // send the user to the sign in page\r\n                $('#app-main-navigator').get(0).pushPage('login-page.html');\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // check if the user has any item in cart\r\n            try{\r\n                let localCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-cart\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n                if(localCart.length === 0){ // no item in user cart\r\n                    throw \"error\"; // throw error\r\n                }\r\n            }\r\n            catch(err){\r\n                // display message to inform user that cart is empty\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Your cart is empty. Go order some products!`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // check if a billing address has been provided\r\n            if(userDetails.billing.address_1 == \"\"){ // no billing address has been provided\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3500;\r\n                toast.content = `Please update your billing address to checkout your cart`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                $('#app-main-navigator').get(0).pushPage('billing-info-page.html');\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to checkout your cart`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // show the app loader modal\r\n            $('#loader-modal-message').html(\"Preparing Checkout...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // create the user's order object\r\n            var orderData = {\r\n                status: \"pending\", currency: \"NGN\", customer_id: userDetails.id, billing: userDetails.billing,\r\n                shipping: userDetails.shipping, line_items: []\r\n            };\r\n\r\n            try {\r\n                // get the current user's local cart\r\n                let userCart = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(\"user-cart\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).cart;\r\n\r\n                // loop through the user cart item to create the order items\r\n                for(let index = 0; index < userCart.length; index++){\r\n                    orderData.line_items[index] = userCart[index].cartData;\r\n\r\n                    // add the product name to the order line item\r\n                    if(userCart[index].product){ // this product was added to cart without customisation\r\n                        orderData.line_items[index].name = userCart[index].product.name; // add the product name\r\n                        // calculate the subtotal & total for this line item\r\n                        orderData.line_items[index].subtotal =\r\n                            \"\" + kendo.parseFloat(userCart[index].product.price) * orderData.line_items[index].quantity;\r\n                        orderData.line_items[index].total =\r\n                            \"\" + kendo.parseFloat(userCart[index].product.price) * orderData.line_items[index].quantity;\r\n                    }\r\n                    else{ // this product was added to cart via customisation\r\n                        orderData.line_items[index].name = userCart[index].product_name; // add the product name\r\n                    }\r\n\r\n                    orderData.line_items[index].meta_data = []; // create the meta-data array for each order line item\r\n\r\n                    // check if the product being ordered has a variation\r\n                    if(userCart[index].cartData.variation_id){ // this product has a variation\r\n                        if(!userCart[index].cartData.cart_item_data){ // if the product has no customisation data\r\n                            // calculate the subtotal & total for this line item\r\n                            orderData.line_items[index].subtotal =\r\n                            \"\" + kendo.parseFloat(userCart[index].productVariation.price) * orderData.line_items[index].quantity;\r\n                            orderData.line_items[index].total =\r\n                                \"\" + kendo.parseFloat(userCart[index].productVariation.price) * orderData.line_items[index].quantity;\r\n                        }\r\n\r\n                        // add the variation attributes to the line item meta data\r\n                        for(let key in userCart[index].cartData.variation){\r\n\r\n                            orderData.line_items[index].meta_data.push({\r\n                                // add the variation attributes for this product to the line items meta-data array.\r\n                                // the meta-data object key value is gotten by splitting the variation key\r\n                                key: key.split(\"_\")[1],\r\n                                value: userCart[index].cartData.variation[key]\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    // check if the product has any customisation data to attach\r\n                    if(userCart[index].cartData.cart_item_data){\r\n                        console.log(\"ORDER ITEM\", userCart[index].cartData);\r\n                        // calculate the subtotal & total for this line item\r\n                        orderData.line_items[index].subtotal =\r\n                            \"\" + kendo.parseFloat(userCart[index].cartData.cart_item_data.fpd_data.fpd_product_price)\r\n                            * orderData.line_items[index].quantity;\r\n                        orderData.line_items[index].total =\r\n                            \"\" + kendo.parseFloat(userCart[index].cartData.cart_item_data.fpd_data.fpd_product_price)\r\n                            * orderData.line_items[index].quantity;\r\n\r\n                        orderData.line_items[index].meta_data.push({\r\n                            // add the customisation data for this product to the line items meta-data array.\r\n                            key: \"_fpd_data\",\r\n                            value: userCart[index].cartData.cart_item_data.fpd_data.fpd_product\r\n                        }, {\r\n                            // add the customisation data for this product to the line items meta-data array.\r\n                            key: \"__fpd_print_order\",\r\n                            value: userCart[index].cartData.cart_item_data.fpd_data.fpd_print_order\r\n                        });\r\n\r\n                        // delete the 'cart_item_data' property from the line item because it is not needed for submisssion\r\n                        delete orderData.line_items[index].cart_item_data;\r\n                    }\r\n                }\r\n\r\n                console.log(\"ORDER DATA\", orderData);\r\n\r\n                // create the order on the remote server\r\n                orderData = await Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/orders`,\r\n                        type: \"post\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify(orderData)\r\n                    }\r\n                ));\r\n\r\n                // display the products details page using the selected product\r\n                await $('#app-main-navigator').get(0).pushPage(\"checkout-page.html\", {data: {orderData}});\r\n            }\r\n            catch(err){\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Checkout failed. ${err.message || \"\"}`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // hide the app loader\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Profile page\r\n     */\r\n    profilePageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the profile form\r\n         */\r\n        profileFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        profilePageViewModel.backButtonClicked;\r\n\r\n                // initialise the profile form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator =\r\n                    $('#profile-page #profile-form').parsley();\r\n\r\n                // listen for profile form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#profile-page #profile-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for profile form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#profile-page #profile-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for profile form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidated);\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#profile-page .content').on(\"scroll\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.profilePageViewModel.scrollAndResizeEventListener);\r\n\r\n\r\n                try{\r\n\r\n                    // create the tooltip objects for the profile form\r\n                    $('#profile-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopLeft',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#profile-page #profile-form').get(0));\r\n                    });\r\n\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#profile-cancel');\r\n\r\n                    // create the \"Update\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#profile-update');\r\n\r\n                    // display the user's profile on the profile form\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.displayProfileContent();\r\n                }\r\n                catch(err){\r\n                    console.log(\"PROFILE ERROR\", err);\r\n                }\r\n                finally {\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // update cart count\r\n            $('#profile-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.addEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                profilePageViewModel.scrollAndResizeEventListener, false);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // hide the tooltips on the profile form\r\n            $('#profile-page #profile-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.reset();\r\n\r\n            //remove listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.removeEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                profilePageViewModel.scrollAndResizeEventListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the profile form\r\n            $('#profile-page #profile-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the \"Cancel\" and \"Update\" buttons\r\n            $('#profile-page #profile-cancel').get(0).ej2_instances[0].destroy();\r\n            $('#profile-page #profile-update').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the profile page is scrolled or the display window is resized by\r\n         * virtue of the device keyboard being displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollAndResizeEventListener(){\r\n            // place function execution in the event queue to be executed ASAP\r\n            window.setTimeout(function(){\r\n                // adjust the tooltips elements on the profile form\r\n                $(\"#profile-page #profile-form ons-input\").each(function(index, element){\r\n                    document.getElementById('profile-form').ej2_instances[index].refresh(element);\r\n                });\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Update\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async updateButtonClicked(){\r\n\r\n            // run the validation method for the profile form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the profile form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async profileFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to update your profile`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // disable the \"Update\" button\r\n            $('#profile-page #profile-update').attr(\"disabled\", true);\r\n            // show the spinner on the 'Update' button to indicate process is ongoing\r\n            $('#profile-page #profile-update').get(0).ej2_instances[0].cssClass = '';\r\n            $('#profile-page #profile-update').get(0).ej2_instances[0].dataBind();\r\n            $('#profile-page #profile-update').get(0).ej2_instances[0].start();\r\n\r\n            // display page loader while completing the \"update profile\" request\r\n            $('#profile-page .modal').css(\"display\", \"table\");\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete the process\r\n\r\n            var promisesArrayPromise = null; // holds the promise gotten from the promisesArray\r\n\r\n            try{\r\n                // load the use details from the encrypted app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS BEFORE PROFILE UPDATE\", userDetails);\r\n\r\n                // temporary hold the user id and password\r\n                let userId = userDetails.id;\r\n                let userPassword = userDetails.password;\r\n\r\n                // use the input from the profile form to update the user details\r\n                userDetails.first_name = $('#profile-page #profile-form #profile-first-name').val().trim();\r\n                userDetails.last_name = $('#profile-page #profile-form #profile-last-name').val().trim();\r\n\r\n                // check if user details has the billing property\r\n                if(!userDetails.billing){ // no billing property, so create it\r\n                    // create the billing property\r\n                    userDetails.billing = {};\r\n                }\r\n\r\n                // set the billing email to the email of the user\r\n                userDetails.billing.email = $('#profile-page #profile-form #profile-email').val().trim();\r\n                // set the billing first name and last name to that of the user\r\n                userDetails.billing.first_name = userDetails.first_name;\r\n                userDetails.billing.last_name = userDetails.last_name;\r\n\r\n                // update the user phone number\r\n                userDetails.billing.phone = $('#profile-page #profile-form #profile-phone-number').val().trim();\r\n                if(userDetails.billing.phone.startsWith(\"0\")){ // phone number starts with zero\r\n                    // replace the starting zero with '+234'\r\n                    userDetails.billing.phone = userDetails.billing.phone.replace(/0/i, \"+234\");\r\n                }\r\n\r\n                // delete the properties not needed for the update from the userDetails object\r\n                delete userDetails.id;\r\n                delete userDetails.password;\r\n\r\n                // now send the user profile update request to the remote server\r\n                promisesArray.push(Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/customers/${userId}`,\r\n                        type: \"put\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify(userDetails)\r\n                    }\r\n                )));\r\n\r\n                // get the promise created from the promisesArray\r\n                promisesArrayPromise = Promise.all(promisesArray);\r\n\r\n                // get the result from the promisesArray\r\n                let resultsArray = await promisesArrayPromise;\r\n\r\n                // add the user's password to the user details retrieved from the server\r\n                resultsArray[0].password = userPassword;\r\n\r\n                // save the created user details data to ENCRYPTED app database as cached data\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails: resultsArray[0]},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'success-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User profile updated`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            }\r\n            catch (err) {\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User profile update failed. ${err.message || \"\"}`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally {\r\n                // enable the \"Update\" button\r\n                $('#profile-page #profile-update').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Update' button to indicate process is ongoing\r\n                $('#profile-page #profile-update').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#profile-page #profile-update').get(0).ej2_instances[0].dataBind();\r\n                $('#profile-page #profile-update').get(0).ej2_instances[0].stop();\r\n\r\n                // hide page loader\r\n                $('#profile-page .modal').css(\"display\", \"none\");\r\n            }\r\n\r\n            return promisesArrayPromise; // return the resolved promisesArray\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to load the current user profile data into the profile form\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayProfileContent(){\r\n\r\n            try{\r\n                // load the user profile details from the app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS\", userDetails);\r\n\r\n                // display the user profile data in the profile form\r\n                $('#profile-page #profile-form #profile-email').val(userDetails.email);\r\n                $('#profile-page #profile-form #profile-first-name').val(userDetails.first_name || \"\");\r\n                $('#profile-page #profile-form #profile-last-name').val(userDetails.last_name || \"\");\r\n                $('#profile-page #profile-form #profile-phone-number').\r\n                val(userDetails.billing && userDetails.billing.phone ? userDetails.billing.phone : \"\");\r\n            }\r\n            finally {\r\n                // hide page preloader\r\n                $('#profile-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#profile-page .modal').css(\"display\", \"none\");\r\n                // enable the \"Update\" button\r\n                $('#profile-page #profile-update').removeAttr(\"disabled\");\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Change Password page\r\n     */\r\n    changePasswordPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the change password form\r\n         */\r\n        changePasswordFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        changePasswordPageViewModel.backButtonClicked;\r\n\r\n                // initialise the changePassword form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator =\r\n                    $('#change-password-page #change-password-form').parsley();\r\n\r\n                // listen for changePassword form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.\r\n                changePasswordFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#change-password-page #change-password-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for changePassword form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel\r\n                    .changePasswordFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#change-password-page #change-password-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for profile form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.\r\n                changePasswordFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        changePasswordPageViewModel.changePasswordFormValidated);\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#change-password-page .content').on(\"scroll\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.changePasswordPageViewModel.scrollAndResizeEventListener);\r\n\r\n\r\n                try{\r\n\r\n                    // create the tooltip objects for the changePassword form\r\n                    $('#change-password-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopLeft',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#change-password-page #change-password-form').get(0));\r\n                    });\r\n\r\n                    // create the button for switching password visibility on the signup page\r\n                    new ej.buttons.Button({\r\n                        isToggle: true,\r\n                        cssClass: 'e-flat e-small e-round',\r\n                        iconCss: \"zmdi zmdi-eye\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo($('#change-password-view-button', $thisPage).get(0));\r\n\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#change-password-cancel');\r\n\r\n                    // create the \"Update\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#change-password-update');\r\n\r\n                }\r\n                catch(err){\r\n                    console.log(\"CHANGE PASSWORD ERROR\", err);\r\n                }\r\n                finally {\r\n                    // hide the page preloader\r\n                    $('#change-password-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide page loader\r\n                    $('#change-password-page .modal').css(\"display\", \"none\");\r\n                    // enable the update button\r\n                    $('#change-password-page #change-password-update').removeAttr(\"disabled\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // update cart count\r\n            $('#change-password-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.addEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                changePasswordPageViewModel.scrollAndResizeEventListener, false);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // hide the tooltips on the changePassword form\r\n            $('#change-password-page #change-password-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.\r\n            changePasswordFormValidator.reset();\r\n\r\n            //remove listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.removeEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                changePasswordPageViewModel.scrollAndResizeEventListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the changePassword form\r\n            $('#change-password-page #change-password-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the \"Cancel\" and \"Update\" buttons\r\n            $('#change-password-page #change-password-cancel').get(0).ej2_instances[0].destroy();\r\n            $('#change-password-page #change-password-update').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the password visibility button\r\n            $('#change-password-page #change-password-view-button').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.\r\n            changePasswordFormValidator.destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Password Visibility button is clicked\r\n         *\r\n         * @param buttonElement {HTMLElement} button element being clicked\r\n         *\r\n         * @param inputId {String} the id for the input whose content visibility is being changed\r\n         */\r\n        passwordVisibilityButtonClicked(buttonElement, inputId){\r\n\r\n            // check the state of the button is it 'active' or not\r\n            if(! $(buttonElement).hasClass('e-active')){ // button is not active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"text\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye-off';\r\n                ej2Button.dataBind();\r\n            }\r\n            else{ // button is active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"password\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye';\r\n                ej2Button.dataBind();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the profile page is scrolled or the display window is resized by\r\n         * virtue of the device keyboard being displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollAndResizeEventListener(){\r\n            // place function execution in the event queue to be executed ASAP\r\n            window.setTimeout(function(){\r\n                // adjust the tooltips elements on the changePassword form\r\n                $(\"#change-password-page #change-password-form ons-input\").each(function(index, element){\r\n                    document.getElementById('change-password-form').ej2_instances[index].refresh(element);\r\n                });\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Update\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async updateButtonClicked(){\r\n\r\n            // run the validation method for the profile form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.\r\n            changePasswordFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the changePassword form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async changePasswordFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to change password`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // disable the \"Update\" button\r\n            $('#change-password-page #change-password-update').attr(\"disabled\", true);\r\n            // show the spinner on the 'Update' button to indicate process is ongoing\r\n            $('#change-password-page #change-password-update').get(0).ej2_instances[0].cssClass = '';\r\n            $('#change-password-page #change-password-update').get(0).ej2_instances[0].dataBind();\r\n            $('#change-password-page #change-password-update').get(0).ej2_instances[0].start();\r\n\r\n            // display page loader while completing the \"update profile\" request\r\n            $('#change-password-page .modal').css(\"display\", \"table\");\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete the process\r\n\r\n            var promisesArrayPromise = null; // holds the promise gotten from the promisesArray\r\n\r\n            try{\r\n                // load the use details from the encrypted app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS BEFORE PASSWORD CHANGE\", userDetails);\r\n\r\n                // check if the current password input matches that in the current user password\r\n                try{\r\n                    await Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json\",\r\n                            type: \"get\",\r\n                            // contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    Base64.encode(`${userDetails.email}:${jQuery('#change-password-current-password').val().trim()}`));\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: false\r\n                        }\r\n                    ));\r\n                }\r\n                catch(err){ // if an error occurs, it meanns the inputed current password DOES NOT MATCH the current user password\r\n                    // throw an error object because user current password does not match\r\n                    throw {responseText: JSON.stringify({message: \"current password is incorrect.\"})};\r\n                }\r\n\r\n                // temporary hold the user id\r\n                let userId = userDetails.id;\r\n                // delete the billing and shipping info from the userData object being updated because it's not needed.\r\n                // if the password change is successful, the response will include\r\n                // the billing and shipping retrieved from the server.\r\n                delete userDetails.billing;\r\n                delete userDetails.shipping;\r\n\r\n                // use the new password input to change/update the user password\r\n                userDetails.password = $('#change-password-page #change-password-form #change-password-new-password').val().trim();\r\n\r\n                // now send the user profile/password change request to the remote server\r\n                promisesArray.push(Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/customers/${userId}`,\r\n                        type: \"put\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify(userDetails)\r\n                    }\r\n                )));\r\n\r\n                // get the promise created from the promisesArray\r\n                promisesArrayPromise = Promise.all(promisesArray);\r\n\r\n                // get the result from the promisesArray\r\n                let resultsArray = await promisesArrayPromise;\r\n\r\n                // add the user's new password to the user details retrieved from the server\r\n                resultsArray[0].password =\r\n                    $('#change-password-page #change-password-form #change-password-new-password').val().trim();\r\n\r\n                console.log(\"PASSWORD CHANGED\", resultsArray[0]);\r\n\r\n                // save the created user details data to ENCRYPTED app database as cached data\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails: resultsArray[0]},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'success-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User password changed`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            }\r\n            catch (err) {\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User password change failed. ${err.message || \"\"}`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally {\r\n                // enable the \"Update\" button\r\n                $('#change-password-page #change-password-update').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Update' button to indicate process is ongoing\r\n                $('#change-password-page #change-password-update').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#change-password-page #change-password-update').get(0).ej2_instances[0].dataBind();\r\n                $('#change-password-page #change-password-update').get(0).ej2_instances[0].stop();\r\n\r\n                // hide page loader\r\n                $('#change-password-page .modal').css(\"display\", \"none\");\r\n            }\r\n\r\n            return promisesArrayPromise; // return the resolved promisesArray\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Billing Info page\r\n     */\r\n    billingInfoPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the billing address form\r\n         */\r\n        billingInfoFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        billingInfoPageViewModel.backButtonClicked;\r\n\r\n                // initialise the billing info form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator =\r\n                    $('#billing-info-page #billing-info-form').parsley();\r\n\r\n                // initialise the custom validation for the billing info 'country' field\r\n                $('#billing-info-page #billing-info-form #billing-info-country').parsley({\r\n                    value: function(parsley) {\r\n                        // return the value from the dropdownlist\r\n                        return $('#billing-info-country').get(0).ej2_instances[0].value;\r\n                    }\r\n                });\r\n\r\n                // initialise the custom validation for the billing info 'state' field\r\n                $('#billing-info-page #billing-info-form #billing-info-state').parsley({\r\n                    value: function(parsley) { // function returns a 'custom' value\r\n                        // get the State dropdownlist component\r\n                        let stateDropDownList = $('#billing-info-state').get(0).ej2_instances[0];\r\n                        // check if the dropdownlist is enabled or not\r\n                        if(stateDropDownList.enabled !== true){ // dropdownlist is disabled\r\n                            return \" \"; // return an empty string\r\n                        }\r\n                        else{ // dropdownlist is enabled\r\n                            return stateDropDownList.value; // return the value from the dropdownlist\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for billing form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.\r\n                on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#billing-info-page #billing-info-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for billing info form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.\r\n                on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#billing-info-page #billing-info-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for billing info form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.\r\n                on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidated);\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#billing-info-page .content').on(\"scroll\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.billingInfoPageViewModel.scrollAndResizeEventListener);\r\n\r\n\r\n                try{\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#billing-info-cancel');\r\n\r\n                    // create the \"Update\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#billing-info-update');\r\n\r\n                    let countryDataArray = []; // holds the array containing country objects\r\n\r\n                    // load the country data from the local list with the app\r\n                    countryDataArray = await Promise.resolve($.ajax(\r\n                        {\r\n                            url: 'country-list.json',\r\n                            type: \"get\",\r\n                            //contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {}\r\n                        }\r\n                    ));\r\n\r\n                    // create the tooltip objects for the billing info form\r\n                    $('#billing-info-form textarea, #billing-info-form ons-input, #billing-info-form #billing-info-country, #billing-info-form #billing-info-state', $thisPage).\r\n                    each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopLeft',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#billing-info-page #billing-info-form').get(0));\r\n                    });\r\n\r\n                    // create the Country dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"billing-info-dropdownlist\",\r\n                            dataSource: countryDataArray,\r\n                            fields: { value: 'code', text: 'name'},\r\n                            placeholder: \"Country\",\r\n                            floatLabelType: 'Auto',\r\n                            value: 'NG',\r\n                            itemTemplate: '<span>${name}</span>',\r\n                            valueTemplate: '<span>${name}</span>'\r\n                        }).appendTo('#billing-info-country');\r\n\r\n                    // create the Country dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"billing-info-dropdownlist\",\r\n                            dataSource: countryDataArray.find(function(countryElement){\r\n                                return countryElement.code === \"NG\";\r\n                            }).states,\r\n                            fields: { value: 'code', text: 'name'},\r\n                            placeholder: \"State\",\r\n                            floatLabelType: 'Auto',\r\n                            itemTemplate: '<span>${name}</span>',\r\n                            valueTemplate: '<span>${name}</span>',\r\n                            select: async function () { // listen for when dropdown list value is changed by selection\r\n\r\n                                // handle method task in a different event block\r\n                                window.setTimeout(function(){\r\n                                    $('#billing-info-page #billing-info-form').get(0).\r\n                                        ej2_instances[$('#billing-info-state').get(0)._utopiasoftware_validator_index].close();\r\n                                    // call the method used to trigger the form validation\r\n                                    /*utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                    billingInfoPageViewModel.updateButtonClicked()*/\r\n                                }, 0);\r\n                            }\r\n                        }).appendTo('#billing-info-state');\r\n\r\n                    // display the billing info on the billing info form\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.displayContent();\r\n                }\r\n                catch(err){\r\n                    console.log(\"BILLING ADDRESS ERROR\", err);\r\n                }\r\n                finally {\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // update cart count\r\n            $('#billing-info-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.addEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                billingInfoPageViewModel.scrollAndResizeEventListener, false);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // hide the tooltips on the profile form\r\n            $('#billing-info-page #billing-info-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.reset();\r\n\r\n            //remove listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.removeEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                billingInfoPageViewModel.scrollAndResizeEventListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the profile form\r\n            $('#billing-info-page #billing-info-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the Country & State DropDownLists\r\n            $('#billing-info-page #billing-info-country').get(0).ej2_instances[0].destroy();\r\n            $('#billing-info-page #billing-info-state').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the \"Cancel\" and \"Update\" buttons\r\n            $('#billing-info-page #billing-info-cancel').get(0).ej2_instances[0].destroy();\r\n            $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the profile page is scrolled or the display window is resized by\r\n         * virtue of the device keyboard being displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollAndResizeEventListener(){\r\n            // place function execution in the event queue to be executed ASAP\r\n            window.setTimeout(function(){\r\n                // adjust the tooltips elements on the profile form\r\n                $('#billing-info-form textarea, #billing-info-form ons-input, #billing-info-form #billing-info-country, #billing-info-form #billing-info-state').\r\n                each(function(index, element){\r\n                    document.getElementById('billing-info-form').ej2_instances[index].refresh(element);\r\n                });\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Update\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async updateButtonClicked(){\r\n\r\n            // run the validation method for the billing-info form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.\r\n            billingInfoFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the billing-info form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async billingInfoFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to update your billing address`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // disable the \"Update\" button\r\n            $('#billing-info-page #billing-info-update').attr(\"disabled\", true);\r\n            // show the spinner on the 'Update' button to indicate process is ongoing\r\n            $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].cssClass = '';\r\n            $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].dataBind();\r\n            $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].start();\r\n\r\n            // display page loader while completing the \"update profile\" request\r\n            $('#billing-info-page .modal').css(\"display\", \"table\");\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete the process\r\n\r\n            var promisesArrayPromise = null; // holds the promise gotten from the promisesArray\r\n\r\n            try{\r\n                // load the use details from the encrypted app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS BEFORE BILLING INFO UPDATE\", userDetails);\r\n\r\n                // temporary hold the user id and password\r\n                let userId = userDetails.id;\r\n                let userPassword = userDetails.password;\r\n\r\n                // check if user details has the billing property\r\n                if(!userDetails.billing){ // no billing property, so create it\r\n                    // create the billing property\r\n                    userDetails.billing = {};\r\n                }\r\n\r\n                // set the billing email to the email of the user\r\n                userDetails.billing.email = userDetails.email;\r\n\r\n                // use the input from the profile form to update the user details\r\n                userDetails.billing.company = $('#billing-info-page #billing-info-company').val().trim();\r\n                userDetails.billing.address_1 = $('#billing-info-page #billing-info-address-1').val().trim();\r\n                userDetails.billing.address_2 = $('#billing-info-page #billing-info-address-2').val().trim();\r\n                userDetails.billing.postcode = $('#billing-info-page #billing-info-postcode').val().trim();\r\n                userDetails.billing.city = $('#billing-info-page #billing-info-city').val().trim();\r\n                userDetails.billing.country = $('#billing-info-page #billing-info-country').get(0).ej2_instances[0].value;\r\n                userDetails.billing.state = $('#billing-info-page #billing-info-state').get(0).ej2_instances[0].value ?\r\n                    $('#billing-info-page #billing-info-state').get(0).ej2_instances[0].value : \"\";\r\n\r\n                // delete the properties not needed for the update from the userDetails object\r\n                delete userDetails.id;\r\n                delete userDetails.password;\r\n\r\n                // now send the user profile update request to the remote server\r\n                promisesArray.push(Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/customers/${userId}`,\r\n                        type: \"put\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify(userDetails)\r\n                    }\r\n                )));\r\n\r\n                // get the promise created from the promisesArray\r\n                promisesArrayPromise = Promise.all(promisesArray);\r\n\r\n                // get the result from the promisesArray\r\n                let resultsArray = await promisesArrayPromise;\r\n\r\n                // add the user's password to the user details retrieved from the server\r\n                resultsArray[0].password = userPassword;\r\n\r\n                // save the created user details data to ENCRYPTED app database as cached data\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails: resultsArray[0]},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'success-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User billing address updated`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            }\r\n            catch (err) {\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `User billing address update failed. ${err.message || \"\"}`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally {\r\n                // enable the \"Update\" button\r\n                $('#billing-info-page #billing-info-update').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Update' button to indicate process is ongoing\r\n                $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].dataBind();\r\n                $('#billing-info-page #billing-info-update').get(0).ej2_instances[0].stop();\r\n\r\n                // hide page loader\r\n                $('#billing-info-page .modal').css(\"display\", \"none\");\r\n            }\r\n\r\n            return promisesArrayPromise; // return the resolved promisesArray\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to load the current billing info data into the billing info form\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayContent(){\r\n\r\n            try{\r\n                // load the user profile details from the app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS\", userDetails);\r\n\r\n                // display the user billing info data in the billing info form\r\n                $('#billing-info-page #billing-info-form #billing-info-company').\r\n                val(userDetails.billing && userDetails.billing.company ? userDetails.billing.company : \"\");\r\n                $('#billing-info-page #billing-info-form #billing-info-address-1').\r\n                val(userDetails.billing && userDetails.billing.address_1 ? userDetails.billing.address_1 : \"\");\r\n                $('#billing-info-page #billing-info-form #billing-info-address-2').\r\n                val(userDetails.billing && userDetails.billing.address_2 ? userDetails.billing.address_2 : \"\");\r\n                $('#billing-info-page #billing-info-form #billing-info-postcode').\r\n                val(userDetails.billing && userDetails.billing.postcode ? userDetails.billing.postcode : \"\");\r\n                $('#billing-info-page #billing-info-form #billing-info-city').\r\n                val(userDetails.billing && userDetails.billing.city ? userDetails.billing.city : \"\");\r\n\r\n                // get the country dropdownlist\r\n                var countryDropDownList = $('#billing-info-page #billing-info-form #billing-info-country').get(0).ej2_instances[0];\r\n                // temporarily remove the select event listener for the country dropdownlist\r\n                countryDropDownList.removeEventListener(\"select\");\r\n                // update the select dropdownlist for country\r\n                countryDropDownList.value = (userDetails.billing && userDetails.billing.country && userDetails.billing.country !== \"\")\r\n                    ? userDetails.billing.country : 'NG';\r\n                countryDropDownList.dataBind();\r\n\r\n                // update the select dropdownlist for state\r\n                let statesDropDownList = $('#billing-info-page #billing-info-form #billing-info-state').get(0).ej2_instances[0];\r\n                statesDropDownList.dataSource = countryDropDownList.dataSource.find(function(countryElement){\r\n                    return countryElement.code === countryDropDownList.value;\r\n                }).states;\r\n                statesDropDownList.dataBind();\r\n                statesDropDownList.value = (userDetails.billing && userDetails.billing.state && userDetails.billing.state !== \"\")\r\n                    ? userDetails.billing.state : null;\r\n                statesDropDownList.dataBind();\r\n                // check if the state dropdownlist has a value\r\n                if(statesDropDownList.value){ // check if the state dropdownlist has a value\r\n                    statesDropDownList.enabled = true; // enable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                else if(countryDropDownList.value === 'NG'){ // if the country selected is nigeria\r\n                    statesDropDownList.enabled = true; // enable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                else { // the state dropdown has no value and the country selected is not nigeria\r\n                    statesDropDownList.enabled = false; // disable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                console.log(\"STATE VALUE\", statesDropDownList.value);\r\n\r\n            }\r\n            finally {\r\n                // hide page preloader\r\n                $('#billing-info-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#billing-info-page .modal').css(\"display\", \"none\");\r\n                // enable the \"Update\" button\r\n                $('#billing-info-page #billing-info-update').removeAttr(\"disabled\");\r\n\r\n                // reinstate the country dropdownlist \"select\" listener in a separate event block\r\n                window.setTimeout(async function(){\r\n                    // reinstate the country dropdownlist \"select\" listener\r\n                    countryDropDownList.addEventListener(\"select\", async function () { // listen for when dropdown list value is changed by selection\r\n                        let countryDropDownList = this; // holds this dropdown list\r\n\r\n                        // execute the task in a separate event block\r\n                        window.setTimeout(async function(){\r\n                            // get the country object and its states that represents the country value selected\r\n                            let countryStatesArray = countryDropDownList.getDataByValue(countryDropDownList.value).states;\r\n                            // get the state dropdownlist\r\n                            let stateDropDownList = $('#billing-info-page #billing-info-form #billing-info-state').\r\n                            get(0).ej2_instances[0];\r\n                            // reset the selected value for the State\r\n                            stateDropDownList.value = null;\r\n                            // reset the dataSource for the State\r\n                            stateDropDownList.dataSource = countryStatesArray;\r\n\r\n                            if(countryStatesArray.length > 0 ){ // there are states in the selected country\r\n                                // enable the State dropdownlist for user selection\r\n                                stateDropDownList.enabled = true;\r\n                            }\r\n                            else{ // there are NO states in the selected country\r\n                                // disable the State dropdownlist for user selection\r\n                                stateDropDownList.enabled = false;\r\n                            }\r\n\r\n                            // bind/update all changes made to the State dropdownlist\r\n                            stateDropDownList.dataBind();\r\n\r\n                        }, 0);\r\n                    });\r\n                }, 0);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Shipping Info page\r\n     */\r\n    shippingInfoPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the shipping info form\r\n         */\r\n        shippingInfoFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        shippingInfoPageViewModel.backButtonClicked;\r\n\r\n                // initialise the shipping info form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator =\r\n                    $('#shipping-info-page #shipping-info-form').parsley();\r\n\r\n                // initialise the custom validation for the shipping info 'country' field\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-country').parsley({\r\n                    value: function(parsley) {\r\n                        // return the value from the dropdownlist\r\n                        return $('#shipping-info-country').get(0).ej2_instances[0].value;\r\n                    }\r\n                });\r\n\r\n                // initialise the custom validation for the shipping info 'state' field\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-state').parsley({\r\n                    value: function(parsley) { // function returns a 'custom' value\r\n                        // get the State dropdownlist component\r\n                        let stateDropDownList = $('#shipping-info-state').get(0).ej2_instances[0];\r\n                        // check if the dropdownlist is enabled or not\r\n                        if(stateDropDownList.enabled !== true){ // dropdownlist is disabled\r\n                            return \" \"; // return an empty string\r\n                        }\r\n                        else{ // dropdownlist is enabled\r\n                            return stateDropDownList.value; // return the value from the dropdownlist\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // listen for shipping form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.\r\n                on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#shipping-info-page #shipping-info-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for shipping info form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.\r\n                on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#shipping-info-page #shipping-info-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for shipping info form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.\r\n                on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidated);\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#shipping-info-page .content').on(\"scroll\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.shippingInfoPageViewModel.scrollAndResizeEventListener);\r\n\r\n\r\n                try{\r\n                    // create the \"Cancel\" button\r\n                    new ej.buttons.Button({\r\n                        //iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        //iconPosition: \"Left\"\r\n                    }).appendTo('#shipping-info-cancel');\r\n\r\n                    // create the \"Update\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#shipping-info-update');\r\n\r\n                    let countryDataArray = []; // holds the array containing country objects\r\n\r\n                    // load the country data from the local list with the app\r\n                    countryDataArray = await Promise.resolve($.ajax(\r\n                        {\r\n                            url: 'country-list.json',\r\n                            type: \"get\",\r\n                            //contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {}\r\n                        }\r\n                    ));\r\n\r\n                    // create the tooltip objects for the shipping info form\r\n                    $('#shipping-info-form textarea, #shipping-info-form ons-input, #shipping-info-form #shipping-info-country, #shipping-info-form #shipping-info-state', $thisPage).\r\n                    each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopLeft',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#shipping-info-page #shipping-info-form').get(0));\r\n                    });\r\n\r\n                    // create the Country dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"shipping-info-dropdownlist\",\r\n                            dataSource: countryDataArray,\r\n                            fields: { value: 'code', text: 'name'},\r\n                            placeholder: \"Country\",\r\n                            floatLabelType: 'Auto',\r\n                            value: 'NG',\r\n                            itemTemplate: '<span>${name}</span>',\r\n                            valueTemplate: '<span>${name}</span>'\r\n                        }).appendTo('#shipping-info-country');\r\n\r\n                    // create the Country dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"shipping-info-dropdownlist\",\r\n                            dataSource: countryDataArray.find(function(countryElement){\r\n                                return countryElement.code === \"NG\";\r\n                            }).states,\r\n                            fields: { value: 'code', text: 'name'},\r\n                            placeholder: \"State\",\r\n                            floatLabelType: 'Auto',\r\n                            itemTemplate: '<span>${name}</span>',\r\n                            valueTemplate: '<span>${name}</span>',\r\n                            select: async function () { // listen for when dropdown list value is changed by selection\r\n\r\n                                // handle method task in a different event block\r\n                                window.setTimeout(function(){\r\n                                    // since the dropdownlist value has changed, remove any tooltip that is being displayed on this component\r\n                                    $('#shipping-info-page #shipping-info-form').get(0).\r\n                                        ej2_instances[$('#shipping-info-state').get(0)._utopiasoftware_validator_index].close();\r\n                                }, 0);\r\n                            }\r\n                        }).appendTo('#shipping-info-state');\r\n\r\n                    // display the shipping info on the shipping info form\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.displayContent();\r\n                }\r\n                catch(err){\r\n                    console.log(\"SHIPPING INFO ERROR\", err);\r\n                }\r\n                finally {\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustResize');\r\n\r\n            // update cart count\r\n            $('#shipping-info-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.addEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                shippingInfoPageViewModel.scrollAndResizeEventListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // hide the tooltips on the profile form\r\n            $('#shipping-info-page #shipping-info-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.reset();\r\n\r\n            //remove listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.removeEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                shippingInfoPageViewModel.scrollAndResizeEventListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the shipping form\r\n            $('#shipping-info-page #shipping-info-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the Country & State DropDownLists\r\n            $('#shipping-info-page #shipping-info-country').get(0).ej2_instances[0].destroy();\r\n            $('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the \"Cancel\" and \"Update\" buttons\r\n            $('#shipping-info-page #shipping-info-cancel').get(0).ej2_instances[0].destroy();\r\n            $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.destroy();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the profile page is scrolled or the display window is resized by\r\n         * virtue of the device keyboard being displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollAndResizeEventListener(){\r\n            // place function execution in the event queue to be executed ASAP\r\n            window.setTimeout(function(){\r\n                // adjust the tooltips elements on the shipping form\r\n                $('#shipping-info-form textarea, #shipping-info-form ons-input, #shipping-info-form #shipping-info-country, #shipping-info-form #shipping-info-state').\r\n                each(function(index, element){\r\n                    document.getElementById('shipping-info-form').ej2_instances[index].refresh(element);\r\n                });\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Update\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async updateButtonClicked(){\r\n\r\n            // run the validation method for the shipping-info form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.\r\n            shippingInfoFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the shipping-info form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async shippingInfoFormValidated(){\r\n\r\n            // check if there is Internet connection\r\n            if(navigator.connection.type === Connection.NONE){ // there is no Internet connection\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast to show that an error\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Connect to the Internet to update shipping information`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n            // disable the \"Update\" button\r\n            $('#shipping-info-page #shipping-info-update').attr(\"disabled\", true);\r\n            // show the spinner on the 'Update' button to indicate process is ongoing\r\n            $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].cssClass = '';\r\n            $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].dataBind();\r\n            $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].start();\r\n\r\n            // display page loader while completing the \"update profile\" request\r\n            $('#shipping-info-page .modal').css(\"display\", \"table\");\r\n\r\n            var promisesArray = []; // holds the array for the promises used to complete the process\r\n\r\n            var promisesArrayPromise = null; // holds the promise gotten from the promisesArray\r\n\r\n            try{\r\n                // load the use details from the encrypted app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS BEFORE SHIPPING INFO UPDATE\", userDetails);\r\n\r\n                // temporary hold the user id and password\r\n                let userId = userDetails.id;\r\n                let userPassword = userDetails.password;\r\n\r\n                // check if user details has the shipping property\r\n                if(!userDetails.shipping){ // no shipping property, so create it\r\n                    // create the shipping property\r\n                    userDetails.shipping = {};\r\n                }\r\n\r\n                // use the input from the shipping form to update the user details\r\n                userDetails.shipping.first_name = $('#shipping-info-page #shipping-info-first-name').val().trim();\r\n                userDetails.shipping.last_name = $('#shipping-info-page #shipping-info-last-name').val().trim();\r\n                userDetails.shipping.company = $('#shipping-info-page #shipping-info-company').val().trim();\r\n                userDetails.shipping.address_1 = $('#shipping-info-page #shipping-info-address-1').val().trim();\r\n                userDetails.shipping.address_2 = $('#shipping-info-page #shipping-info-address-2').val().trim();\r\n                userDetails.shipping.postcode = $('#shipping-info-page #shipping-info-postcode').val().trim();\r\n                userDetails.shipping.city = $('#shipping-info-page #shipping-info-city').val().trim();\r\n                userDetails.shipping.country = $('#shipping-info-page #shipping-info-country').get(0).ej2_instances[0].value;\r\n                userDetails.shipping.state = $('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].value ?\r\n                    $('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].value : \"\";\r\n\r\n                // delete the properties not needed for the update from the userDetails object\r\n                delete userDetails.id;\r\n                delete userDetails.password;\r\n\r\n                // now send the user profile update request to the remote server\r\n                promisesArray.push(Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/customers/${userId}`,\r\n                        type: \"put\",\r\n                        contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: false,\r\n                        data: JSON.stringify(userDetails)\r\n                    }\r\n                )));\r\n\r\n                // get the promise created from the promisesArray\r\n                promisesArrayPromise = Promise.all(promisesArray);\r\n\r\n                // get the result from the promisesArray\r\n                let resultsArray = await promisesArrayPromise;\r\n\r\n                // add the user's password to the user details retrieved from the server\r\n                resultsArray[0].password = userPassword;\r\n\r\n                // save the created user details data to ENCRYPTED app database as cached data\r\n                await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                    {_id: \"user-details\", docType: \"USER_DETAILS\", userDetails: resultsArray[0]},\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'success-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Shipping information updated`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n            }\r\n            catch (err) {\r\n                err = JSON.parse(err.responseText);\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Shipping information update failed. ${err.message || \"\"}`;\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally {\r\n                // enable the \"Update\" button\r\n                $('#shipping-info-page #shipping-info-update').removeAttr(\"disabled\");\r\n                // hide the spinner on the 'Update' button to indicate process is ongoing\r\n                $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].cssClass = 'e-hide-spinner';\r\n                $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].dataBind();\r\n                $('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].stop();\r\n\r\n                // hide page loader\r\n                $('#shipping-info-page .modal').css(\"display\", \"none\");\r\n            }\r\n\r\n            return promisesArrayPromise; // return the resolved promisesArray\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to load the current shipping info data into the shipping info form\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayContent(){\r\n\r\n            try{\r\n                // load the user profile details from the app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                console.log(\"USER DETAILS\", userDetails);\r\n\r\n                // display the user shipping info data in the shipping info form\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-first-name').\r\n                val(userDetails.shipping && userDetails.shipping.first_name ? userDetails.shipping.first_name : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-last-name').\r\n                val(userDetails.shipping && userDetails.shipping.last_name ? userDetails.shipping.last_name : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-company').\r\n                val(userDetails.shipping && userDetails.shipping.company ? userDetails.shipping.company : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-address-1').\r\n                val(userDetails.shipping && userDetails.shipping.address_1 ? userDetails.shipping.address_1 : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-address-2').\r\n                val(userDetails.shipping && userDetails.shipping.address_2 ? userDetails.shipping.address_2 : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-postcode').\r\n                val(userDetails.shipping && userDetails.shipping.postcode ? userDetails.shipping.postcode : \"\");\r\n                $('#shipping-info-page #shipping-info-form #shipping-info-city').\r\n                val(userDetails.shipping && userDetails.shipping.city ? userDetails.shipping.city : \"\");\r\n\r\n                // get the country dropdownlist\r\n                var countryDropDownList = $('#shipping-info-page #shipping-info-form #shipping-info-country').get(0).ej2_instances[0];\r\n                // temporarily remove the select event listener for the country dropdownlist\r\n                countryDropDownList.removeEventListener(\"select\");\r\n                // update the select dropdownlist for country\r\n                countryDropDownList.value = (userDetails.shipping && userDetails.shipping.country && userDetails.shipping.country !== \"\")\r\n                    ? userDetails.shipping.country : 'NG';\r\n                countryDropDownList.dataBind();\r\n\r\n                // update the select dropdownlist for state\r\n                let statesDropDownList = $('#shipping-info-page #shipping-info-form #shipping-info-state').get(0).ej2_instances[0];\r\n                statesDropDownList.dataSource = countryDropDownList.dataSource.find(function(countryElement){\r\n                    return countryElement.code === countryDropDownList.value;\r\n                }).states;\r\n                statesDropDownList.dataBind();\r\n                statesDropDownList.value = (userDetails.shipping && userDetails.shipping.state && userDetails.shipping.state !== \"\")\r\n                    ? userDetails.shipping.state : null;\r\n                statesDropDownList.dataBind();\r\n                // check if the state dropdownlist has a value\r\n                if(statesDropDownList.value){ // check if the state dropdownlist has a value\r\n                    statesDropDownList.enabled = true; // enable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                else if(countryDropDownList.value === 'NG'){ // if the country selected is nigeria\r\n                    statesDropDownList.enabled = true; // enable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                else { // the state dropdown has no value and the country selected is not nigeria\r\n                    statesDropDownList.enabled = false; // disable the state dropdownlist\r\n                    statesDropDownList.dataBind();\r\n                }\r\n                console.log(\"STATE VALUE\", statesDropDownList.value);\r\n\r\n            }\r\n            finally {\r\n                // hide page preloader\r\n                $('#shipping-info-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#shipping-info-page .modal').css(\"display\", \"none\");\r\n                // enable the \"Update\" button\r\n                $('#shipping-info-page #shipping-info-update').removeAttr(\"disabled\");\r\n\r\n                // reinstate the country dropdownlist \"select\" listener in a separate event block\r\n                window.setTimeout(async function(){\r\n                    // reinstate the country dropdownlist \"select\" listener\r\n                    countryDropDownList.addEventListener(\"select\", async function () { // listen for when dropdown list value is changed by selection\r\n                        let countryDropDownList = this; // holds this dropdown list\r\n\r\n                        // execute the task in a separate event block\r\n                        window.setTimeout(async function(){\r\n                            // get the country object and its states that represents the country value selected\r\n                            let countryStatesArray = countryDropDownList.getDataByValue(countryDropDownList.value).states;\r\n                            // get the state dropdownlist\r\n                            let stateDropDownList = $('#shipping-info-page #shipping-info-form #shipping-info-state').\r\n                            get(0).ej2_instances[0];\r\n                            // reset the selected value for the State\r\n                            stateDropDownList.value = null;\r\n                            // reset the dataSource for the State\r\n                            stateDropDownList.dataSource = countryStatesArray;\r\n\r\n                            if(countryStatesArray.length > 0 ){ // there are states in the selected country\r\n                                // enable the State dropdownlist for user selection\r\n                                stateDropDownList.enabled = true;\r\n                            }\r\n                            else{ // there are NO states in the selected country\r\n                                // disable the State dropdownlist for user selection\r\n                                stateDropDownList.enabled = false;\r\n                            }\r\n\r\n                            // bind/update all changes made to the State dropdownlist\r\n                            stateDropDownList.dataBind();\r\n\r\n                        }, 0);\r\n                    });\r\n                }, 0);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Checkout page\r\n     */\r\n    checkoutPageViewModel: {\r\n\r\n\r\n        /**\r\n         * holds the user's Order object which will be sent to the server\r\n         */\r\n        chekoutOrder : null,\r\n\r\n        /**\r\n         * holds the array/list of countries where the user's shipping address can be located\r\n         */\r\n        countryArray: [],\r\n\r\n        /**\r\n         * holds the array/list of shipping zones where an order can be delivered\r\n         */\r\n        shoppingZonesArray: [],\r\n\r\n        /**\r\n         * flag whether to update the billing details for the\r\n         * checkout order data using the billing details of the current user\r\n         */\r\n        updateOrderBillingDetails: false,\r\n\r\n        /**\r\n         * flag whether to update the shipping details for the\r\n         * checkout order data using the shipping details of the current user\r\n         */\r\n        updateOrderShippingDetails: false,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        checkoutPageViewModel.backButtonClicked;\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#checkout-page .content').on(\"scroll\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.checkoutPageViewModel.scrollAndResizeEventListener);\r\n\r\n                // set the order object to be used by this page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder =\r\n                $('#app-main-navigator').get(0).topPage.data.orderData;\r\n\r\n                try{\r\n\r\n                    // create the accorodion ej2 component used on the \"Checkout\" page\r\n                    new ej.navigations.Accordion({\r\n                        expandMode: 'Single'\r\n                    }).appendTo('#checkout-accordion');\r\n\r\n                    // create the Shipping method dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"shipping-method-dropdownlist\",\r\n                            dataSource: [],\r\n                            fields: { value: 'method_id', text: 'title'},\r\n                            placeholder: \"Shipping Method\",\r\n                            floatLabelType: 'Auto',\r\n                            enabled: false,\r\n                            itemTemplate: '<span>${title}</span>',\r\n                            valueTemplate: '<span>${title}</span>'\r\n                        }).appendTo('#checkout-shipping-method-type');\r\n\r\n                    // create the payment method dropdown list from the select input\r\n                    new ej.dropdowns.DropDownList(\r\n                        {\r\n                            cssClass: \"payment-method-dropdownlist\",\r\n                            dataSource: [],\r\n                            fields: { value: 'id', text: 'title'},\r\n                            placeholder: \"Payment Method\",\r\n                            floatLabelType: 'Auto',\r\n                            enabled: false,\r\n                            itemTemplate: '<span>${title}</span>',\r\n                            valueTemplate: '<span>${title}</span>'\r\n                        }).appendTo('#checkout-payment-method-type');\r\n\r\n                    // create the payment voucher multiselect dropdown list from the select input\r\n                    new ej.dropdowns.MultiSelect(\r\n                        {\r\n                            cssClass: \"payment-voucher-dropdownlist\",\r\n                            dataSource: [],\r\n                            //fields: { value: 'id', text: 'method_title'},\r\n                            placeholder: \"Payment Coupons\",\r\n                            floatLabelType: 'Auto',\r\n                            mode: \"Box\",\r\n                            showClearButton: false,\r\n                            showDropDownIcon: false,\r\n                            enabled: false\r\n                        }).appendTo('#checkout-payment-vouchers');\r\n\r\n                    // create the \"Make Payment\" button\r\n                    new ej.splitbuttons.ProgressButton({\r\n                        cssClass: 'e-hide-spinner',\r\n                        duration: 10 * 60 * 60 * 1000 // set spinner/progress duration for 10 hr\r\n                    }).appendTo('#checkout-make-payment');\r\n\r\n                    // create the tooltips for the checkout page\r\n                    $('.utopiasoftware-checkout-failure', $thisPage).\r\n                    each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the page element\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($thisPage.get(0));\r\n                    });\r\n\r\n                    //load the remote list of payment methods, list of shipping zones & local list of countries for the app\r\n                    let promisesArray = []; // holds all created promises\r\n\r\n                    promisesArray.push(Promise.resolve($.ajax( // load the list of payment gateways\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/payment_gateways`,\r\n                            type: \"get\",\r\n                            //contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {}\r\n                        }\r\n                    )));\r\n                    promisesArray.push(Promise.resolve($.ajax( // load the list of shipping zones\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + `/wp-json/wc/v3/shipping/zones`,\r\n                            type: \"get\",\r\n                            //contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {}\r\n                        }\r\n                    )));\r\n                    promisesArray.push(Promise.resolve($.ajax( // load the list of available countries\r\n                        {\r\n                            url: 'country-list.json',\r\n                            type: \"get\",\r\n                            //contentType: \"application/json\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {}\r\n                        }\r\n                    )));\r\n\r\n                    // wait for all promises to resolve\r\n                    promisesArray = await Promise.all(promisesArray);\r\n\r\n                    // filter only pay method that are enabled\r\n                    promisesArray[0] = promisesArray[0].filter(function(paymentElem){\r\n                        return paymentElem.enabled === true;\r\n                    });\r\n\r\n                    // assign the payment method array as the dataSource for the payment method dropdownlist\r\n                    $('#checkout-payment-method-type').get(0).ej2_instances[0].dataSource = promisesArray[0];\r\n                    $('#checkout-payment-method-type').get(0).ej2_instances[0].dataBind();\r\n\r\n                    //store the list of shipping zones as a view-model property\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        checkoutPageViewModel.shoppingZonesArray = promisesArray[1];\r\n\r\n                    //store the list of countries as a view-model property\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        checkoutPageViewModel.countryArray = promisesArray[2];\r\n\r\n                }\r\n                catch(err){\r\n                    // get back to the previous page on the app-main navigator stack\r\n                    await $('#app-main-navigator').get(0).popPage();\r\n\r\n                    console.log(\"CHECKOUT ERROR\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast message\r\n                    let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.timeOut = 3000;\r\n                    toast.content = `Error preparing checkout. Please retry`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide page preloader\r\n                    $('#checkout-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide page modal loader\r\n                    $('#checkout-page .modal').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: async function(){\r\n            // check if the payment method element exists on page\r\n            if($('#checkout-page #checkout-payment-method-type').length == 0){ // if length is zero, element does not exist\r\n                return; // exit the method\r\n            }\r\n\r\n            // get payment method dropdownlist component\r\n            var paymentMethodDropDown = $('#checkout-payment-method-type').get(0).ej2_instances[0];\r\n\r\n            console.log(\"CHECKOUT DATASOURCE\", paymentMethodDropDown.dataSource);\r\n\r\n\r\n            // check if the datasource for the payment method has been set\r\n            if(paymentMethodDropDown.dataSource.length == 0){ // datasource for the payment method dropdownlist has not been set\r\n                // re-execute this method again after some time\r\n                window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    checkoutPageViewModel.pageShow, 500);\r\n\r\n                return;\r\n            }\r\n\r\n            window.SoftInputMode.set('adjustResize'); // adjust device input mode\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.addEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                checkoutPageViewModel.scrollAndResizeEventListener, false);\r\n\r\n            // show page preloader\r\n            $('#checkout-page .page-preloader').css(\"display\", \"block\");\r\n            // show page modal loader\r\n            $('#checkout-page .modal').css(\"display\", \"table\");\r\n\r\n\r\n            try{\r\n                // display the content of the checkout page\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    checkoutPageViewModel.displayContent();\r\n            }\r\n            catch(err){\r\n                console.log(\"CHECKOUT SHOW ERROR\", err);\r\n                // hide page preloader\r\n                $('#checkout-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#checkout-page .modal').css(\"display\", \"none\");\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Checkout error. Please retry or Pull Down to refresh`;\r\n                toast.dataBind();\r\n                toast.show();\r\n\r\n                return; // exit method\r\n            }\r\n\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                checkoutPageViewModel.validateOrderCheckout();\r\n            }\r\n            catch(err){\r\n                /*console.log(\"CHECKOUT SHOW ERROR\", err);\r\n                // hide page preloader\r\n                $('#checkout-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#checkout-page .modal').css(\"display\", \"none\");\r\n\r\n                // hide all previously displayed ej2 toast\r\n                $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                // display toast message\r\n                let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.timeOut = 3000;\r\n                toast.content = `Checkout error. Please retry or Pull Down to refresh`;\r\n                toast.dataBind();\r\n                toast.show();*/\r\n\r\n            }\r\n            finally {\r\n                // hide page preloader\r\n                $('#checkout-page .page-preloader').css(\"display\", \"none\");\r\n                // hide page modal loader\r\n                $('#checkout-page .modal').css(\"display\", \"none\");\r\n            }\r\n\r\n            console.log(\"END OF CHECKOUT SHOW\");\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            //add listener for when the window is resized by virtue of the device keyboard being shown\r\n            window.removeEventListener(\"resize\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                checkoutPageViewModel.scrollAndResizeEventListener, false);\r\n\r\n\r\n            // close the tooltips on the page\r\n            $('#checkout-page').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n            console.log(\"END OF CHECKOUT HIDE\");\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the shipping method dropdownlist\r\n            $('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the payment method dropdownlist\r\n            $('#checkout-page #checkout-payment-method-type').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the payment voucher multiselect dropdownlist\r\n            $('#checkout-page #checkout-payment-vouchers').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the \"Make Payment\"\r\n            $('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the page accordion\r\n            $('#checkout-page #checkout-accordion').get(0).ej2_instances[0].destroy();\r\n\r\n            // destroy the tooltips on the page\r\n            $('#checkout-page').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // reset the view-model properties\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.countryArray = [];\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.shoppingZonesArray = [];\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                updateOrderBillingDetails = false;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                updateOrderShippingDetails = false;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the page is scrolled or the display window is resized by\r\n         * virtue of the device keyboard being displayed\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollAndResizeEventListener(){\r\n            // place function execution in the event queue to be executed ASAP\r\n            window.setTimeout(function(){\r\n                // adjust the tooltips elements on the checkout page\r\n                $('#checkout-page .utopiasoftware-checkout-failure').\r\n                each(function(index, element){\r\n                    document.getElementById('checkout-page').ej2_instances[index].refresh(element);\r\n                });\r\n\r\n            }, 0);\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Edit\" button for the billing details is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async editBillingDetailsButtonClicked(){\r\n            // set the update billing details flag to true\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                updateOrderBillingDetails = true;\r\n            // display the billing details page\r\n            $('#app-main-navigator').get(0).pushPage('billing-info-page.html');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Edit\" button for the shipping details is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async editShippingDetailsButtonClicked(){\r\n            // set the update shipping details flag to true\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                updateOrderShippingDetails = true;\r\n            // display the shipping details page\r\n            $('#app-main-navigator').get(0).pushPage('shipping-info-page.html');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Edit\" button for the shipping method is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async editShippingMethodButtonClicked(){\r\n\r\n            // handle the task in a separate event block\r\n            window.setTimeout(function(){\r\n                // enable the shipping method dropdownlist\r\n                let shippingMethodDropdownList = $('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0];\r\n                shippingMethodDropdownList.enabled = true;\r\n                shippingMethodDropdownList.dataBind();\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user clicks the \"Make Payment\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async makePaymentButtonClicked(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is used to load the current checkout/order data into the page\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayContent(){\r\n\r\n            try{\r\n                // load the user profile details from the app database\r\n                let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                loadData(\"user-details\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n\r\n                // check if the checkout order billing data should be updated with the current user's billing\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                    updateOrderBillingDetails === true){ // billing data should be updated\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.billing =\r\n                        userDetails.billing;\r\n                    // reset the flag\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                        updateOrderBillingDetails = false;\r\n                }\r\n\r\n                // check if the checkout order shipping data should be updated with the current user's shipping\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                    updateOrderShippingDetails === true){ // shipping data should be updated\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping =\r\n                        userDetails.shipping;\r\n                    // reset the flag\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                        updateOrderShippingDetails = false;\r\n                }\r\n\r\n                // get the order object set on this page\r\n                let orderData = utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder;\r\n\r\n                console.log(\"CHECK OUT USER DETAILS\", userDetails);\r\n\r\n                // display the checkout data\r\n                $('#checkout-page #checkout-personal-details-email').html(userDetails.email);\r\n                $('#checkout-page #checkout-personal-details-first-name').html(userDetails.first_name);\r\n                $('#checkout-page #checkout-personal-details-last-name').html(userDetails.last_name);\r\n\r\n                $('#checkout-page #checkout-billing-information-address').html(orderData.billing.address_1);\r\n                $('#checkout-page #checkout-billing-information-city').html(orderData.billing.city);\r\n\r\n                $('#checkout-page #checkout-shipping-information-first-name').html(orderData.shipping.first_name);\r\n                $('#checkout-page #checkout-shipping-information-last-name').html(orderData.shipping.last_name);\r\n                $('#checkout-page #checkout-shipping-information-address').html(orderData.shipping.address_1);\r\n                $('#checkout-page #checkout-shipping-information-city').html(orderData.shipping.city);\r\n\r\n                // get the shipping zone the of the user by checking the user's shipping country\r\n                let shippingCountryCode =  orderData.shipping.country == \"\" ? 'NG': orderData.shipping.country;\r\n                let shippingZoneId = 0; // set the shipping zone id to the default i.e. 'Rest of the world'\r\n                // find the country with the specified country code\r\n                let shippingCountry = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    checkoutPageViewModel.countryArray.find(function(countryElem){\r\n                        return countryElem.code === shippingCountryCode;\r\n                });\r\n                // check if a shipping country was discovered\r\n                if(shippingCountry){ // a shipping country was discovered\r\n                    // get the shipping zone id which the shipping country belongs to\r\n                    let shippingZone = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        checkoutPageViewModel.shoppingZonesArray.find(function(shippingZoneElem){\r\n                            return shippingZoneElem.name === shippingCountry.name;\r\n                    });\r\n                    if(shippingZone){ // a shipping zone was found\r\n                        //get the id of the discovered shipping zone\r\n                        shippingZoneId = shippingZone.id;\r\n                    }\r\n                }\r\n\r\n                // get the shipping methods attached to the discovered shipping zone\r\n                let shippingMethodsArray = await Promise.resolve($.ajax( // load the list of shipping zones\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl +\r\n                            `/wp-json/wc/v3/shipping/zones/${shippingZoneId}/methods`,\r\n                        type: \"get\",\r\n                        //contentType: \"application/json\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                        },\r\n                        dataType: \"json\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: true,\r\n                        data: {}\r\n                    }\r\n                ));\r\n                // filter the shipping methods for only the methods that are enabled\r\n                shippingMethodsArray = shippingMethodsArray.filter(function(shippingMethodElem){\r\n                    return shippingMethodElem.enabled === true;\r\n                });\r\n                // remove the \"select\" event listener for the shipping method dropdownlist\r\n                let shippingMethodDropDown = $('#checkout-shipping-method-type').get(0).ej2_instances[0];\r\n                shippingMethodDropDown.removeEventListener(\"select\");\r\n\r\n                // set the shippingMethodArray as the datasource for the shipping method dropdownlist\r\n                shippingMethodDropDown.dataSource = shippingMethodsArray;\r\n                // set the pre-selected shipping method (i.e. the shippingMethod dropdownlist value)\r\n                // check if there are any shipping lines info available\r\n                if(orderData.shipping_lines.length > 0){ // if length is > 0, there are shipping lines info available\r\n                    // set the shipping method dropdownlist value\r\n                    shippingMethodDropDown.value = orderData.shipping_lines[0].method_id;\r\n                }\r\n                shippingMethodDropDown.dataBind();\r\n\r\n                // add the \"select\" event listener for the shipping method dropdownlist\r\n                shippingMethodDropDown.addEventListener(\"select\", function(){\r\n                    // handle the task in a separate event block\r\n                    window.setTimeout(async function(){\r\n\r\n                        // display the page loader modal\r\n                        $('#checkout-page .modal').css(\"display\", \"table\");\r\n\r\n                        // get a local/deep-clone copy of the page's checkout order object\r\n                        let localOrderObject = JSON.parse(JSON.\r\n                        stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder));\r\n                        // update the shipping method for the local order object to be sent to the server\r\n                        localOrderObject.shipping_lines[0] =\r\n                            {method_id: shippingMethodDropDown.value, method_title: shippingMethodDropDown.text};\r\n\r\n                        // update the checkout order data on the remote server\r\n                        try{\r\n                            localOrderObject = await Promise.resolve($.ajax(\r\n                                {\r\n                                    url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl +\r\n                                        `/wp-json/wc/v3/orders/${localOrderObject.id}`,\r\n                                    type: \"put\",\r\n                                    contentType: \"application/json\",\r\n                                    beforeSend: function(jqxhr) {\r\n                                        jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                            utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                                    },\r\n                                    dataType: \"json\",\r\n                                    timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                    processData: false,\r\n                                    data: JSON.stringify(localOrderObject)\r\n                                }\r\n                            ));\r\n\r\n                            // update the page checkout order with the updated order from the server\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.\r\n                                chekoutOrder = localOrderObject;\r\n\r\n                            // disable the shipping method dropdownlist\r\n                            shippingMethodDropDown.enabled = false;\r\n                            shippingMethodDropDown.dataBind();\r\n\r\n                            // redisplay the page (redisplaying the page also hides the page loader when the process is complete)\r\n                            await utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow();\r\n                        }\r\n                        catch(err){\r\n                            console.log(\"CHECKOUT SHIPPING METHOD UPDATE ERROR\", err);\r\n\r\n                            err = JSON.parse(err.responseText);\r\n\r\n                            // hide all previously displayed ej2 toast\r\n                            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                            $('.timed-page-toast').get(0).ej2_instances[0].hide('All');\r\n                            // display toast message\r\n                            let toast = $('.timed-page-toast').get(0).ej2_instances[0];\r\n                            toast.cssClass = 'error-ej2-toast';\r\n                            toast.timeOut = 3000;\r\n                            toast.content = `Shipping method not updated, retry. ${err.message || \"\"}`;\r\n                            toast.dataBind();\r\n                            toast.show();\r\n\r\n                            // hide the page loader modal\r\n                            $('#checkout-page .modal').css(\"display\", \"none\");\r\n                        }\r\n\r\n                    }, 0);\r\n                });\r\n\r\n                // set the pre-selected payment method for the order data\r\n                $('#checkout-payment-method-type').get(0).ej2_instances[0].value = orderData.payment_method;\r\n                $('#checkout-payment-method-type').get(0).ej2_instances[0].dataBind();\r\n\r\n                // set the order coupons\r\n                let couponsMultiSelectDropDown = $('#checkout-payment-vouchers').get(0).ej2_instances[0];\r\n                let couponsArray = orderData.coupon_lines.map(function(couponElem){\r\n                    return couponElem.code;\r\n                });\r\n                // set the datasource and the values for the coupons mulitselect dropdown\r\n                couponsMultiSelectDropDown.datasource = couponsArray;\r\n                couponsMultiSelectDropDown.value = couponsArray;\r\n                couponsMultiSelectDropDown.dataBind();\r\n\r\n                // set the order notes i.e. shipping instructions\r\n                $('#checkout-page #checkout-payment-order-note-text').val(orderData.customer_note);\r\n\r\n                // display the order items\r\n                let orderItemsDisplayContent = ''; // holds the content to be displayed for the order items segment\r\n                for(let index = 0; index < orderData.line_items.length; index++){\r\n                    orderItemsDisplayContent +=\r\n                        `<div class=\"col-xs-6\" style=\"text-align: right; padding-right: 5px;\r\n                        padding-top: 10px; padding-bottom: 10px\">${orderData.line_items[index].name}</div>\r\n                        <div class=\"col-xs-2\" style=\"text-align: left;\r\n                        padding-top: 10px; padding-bottom: 10px\">&times;${orderData.line_items[index].quantity}</div>\r\n                        <div class=\"col-xs-4\" style=\"text-align: left; padding-left: 5px;\r\n                        padding-top: 10px; padding-bottom: 10px\">\r\n                        &#x20a6;${kendo.toString(kendo.parseFloat(orderData.line_items[index].subtotal), \"n2\")}</div>`;\r\n                }\r\n                $('#checkout-page #checkout-order-items-container').html(orderItemsDisplayContent);\r\n\r\n                // display checkout totals\r\n                $('#checkout-page #checkout-page-items-cost').html(\r\n                `&#x20a6;${kendo.toString((kendo.parseFloat(orderData.total) - kendo.parseFloat(orderData.shipping_total) +\r\n                    kendo.parseFloat(orderData.discount_total)), \"n2\")}`);\r\n                $('#checkout-page #checkout-page-shipping-cost').html(\r\n                    `&#x20a6;${kendo.toString(kendo.parseFloat(orderData.shipping_total), \"n2\")}`\r\n                );\r\n                $('#checkout-page #checkout-page-discount-cost').html(\r\n                    `&#x20a6;${kendo.toString(kendo.parseFloat(orderData.discount_total), \"n2\")}`\r\n                );\r\n                $('#checkout-page #checkout-page-total-cost').html(\r\n                    `&#x20a6;${kendo.toString(kendo.parseFloat(orderData.total), \"n2\")}`\r\n                );\r\n                if(kendo.parseFloat(orderData.discount_total) > 0){ // if the discount total value is > zero\r\n                    // display the discount total to user\r\n                    $('#checkout-page .checkout-page-discount').css(\"display\", \"block\");\r\n                }\r\n                else{ // the discount total is zero\r\n                    // hide the discount total from user\r\n                    $('#checkout-page .checkout-page-discount').css(\"display\", \"none\");\r\n                }\r\n            }\r\n            finally {\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to validate the order object/data i.e. the 'chekoutOrder' property of\r\n         * the view-model\r\n         *\r\n         * @returns {Promise<void>} the Promise resolves when the order data is successfully validated; it\r\n         * rejects when the validation fails.\r\n         */\r\n        async validateOrderCheckout(){\r\n\r\n            var validationSuccessful = true; // flag indicates if checkout validation was successful or not\r\n\r\n            return new Promise(async function(resolve, reject){\r\n\r\n                // get the checkout Order object\r\n                var orderData = utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder;\r\n\r\n                // validate the personal details segment\r\n                try{\r\n                    // load the user profile details from the app database\r\n                    let userDetails = (await utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"user-details\",\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase)).userDetails;\r\n                    if(!userDetails.first_name || userDetails.first_name == \"\"){\r\n                        throw \"validation error\";\r\n                    }\r\n                    // user validation was successful\r\n                    $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"inline-block\");\r\n                    $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"none\");\r\n                    // hide error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').\r\n                        get(0)._utopiasoftware_validator_index;\r\n                    $('#checkout-page').get(0).ej2_instances[tooltipIndex].close();\r\n                }\r\n                catch(err){\r\n                    // user details could not be loaded, so user validation failed\r\n                    $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-success').\r\n                        css(\"display\", \"none\");\r\n                    $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"inline-block\");\r\n                    // display error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    let tooltip = $('#checkout-page').get(0).ej2_instances[tooltipIndex];\r\n                    tooltip.content = \"incomplete personal details\";\r\n                    tooltip.dataBind();\r\n                    tooltip.open( $('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure')\r\n                        .get(0));\r\n                    // flag validation as failed\r\n                    validationSuccessful = false;\r\n                }\r\n\r\n                // validate the billing details segment\r\n                if(!orderData.billing.address_1 || orderData.billing.address_1 == \"\"){ // the billing address has NOT been provided\r\n                    // signal that billing details validation failed\r\n                    $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"none\");\r\n                    $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"inline-block\");\r\n                    // display error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    let tooltip = $('#checkout-page').get(0).ej2_instances[tooltipIndex];\r\n                    tooltip.content = \"incomplete billing details\";\r\n                    tooltip.dataBind();\r\n                    tooltip.open( $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure')\r\n                        .get(0));\r\n                    // flag validation as failed\r\n                    validationSuccessful = false;\r\n                }\r\n                else{ // the billing address and other billing info have been provided\r\n                    $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"inline-block\");\r\n                    $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"none\");\r\n                    // hide error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    $('#checkout-page').get(0).ej2_instances[tooltipIndex].close();\r\n                }\r\n\r\n                // validate the shipping details segment\r\n                if(!orderData.shipping.address_1 || orderData.shipping.address_1 == \"\"){ // the shipping address has NOT been provided\r\n                    // signal that shipping details validation failed\r\n                    $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"none\");\r\n                    $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"inline-block\");\r\n                    // display error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    let tooltip = $('#checkout-page').get(0).ej2_instances[tooltipIndex];\r\n                    tooltip.content = \"incomplete shipping details\";\r\n                    tooltip.dataBind();\r\n                    tooltip.open( $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure')\r\n                        .get(0));\r\n                    // flag validation as failed\r\n                    validationSuccessful = false;\r\n                }\r\n                else{ // the billing address and other billing info have been provided\r\n                    $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"inline-block\");\r\n                    $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"none\");\r\n                    // hide error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    $('#checkout-page').get(0).ej2_instances[tooltipIndex].close();\r\n                }\r\n\r\n                // validate the shipping method segment\r\n                if(! $('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0].value){ // no shipping method\r\n                    // signal that shipping method validation failed\r\n                    $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"none\");\r\n                    $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"inline-block\");\r\n                    // display error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    let tooltip = $('#checkout-page').get(0).ej2_instances[tooltipIndex];\r\n                    tooltip.content = \"shipping method required\";\r\n                    tooltip.dataBind();\r\n                    tooltip.open( $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure')\r\n                        .get(0));\r\n                    // flag validation as failed\r\n                    validationSuccessful = false;\r\n                }\r\n                else{ // shipping method has been set\r\n                    $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"inline-block\");\r\n                    $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"none\");\r\n                    // hide error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    $('#checkout-page').get(0).ej2_instances[tooltipIndex].close();\r\n                }\r\n\r\n                // validate the payment method segment\r\n                if(! $('#checkout-page #checkout-payment-method-type').get(0).ej2_instances[0].value){ // no shipping method\r\n                    // signal that payment method validation failed\r\n                    $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"none\");\r\n                    $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"inline-block\");\r\n                    // display error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    let tooltip = $('#checkout-page').get(0).ej2_instances[tooltipIndex];\r\n                    tooltip.content = \"payment method required\";\r\n                    tooltip.dataBind();\r\n                    tooltip.open( $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure')\r\n                        .get(0));\r\n                    // flag validation as failed\r\n                    validationSuccessful = false;\r\n                }\r\n                else{ // payment method has been set\r\n                    $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-success').\r\n                    css(\"display\", \"inline-block\");\r\n                    $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').\r\n                    css(\"display\", \"none\");\r\n                    // hide error tooltip for this segment\r\n                    let tooltipIndex = $('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').\r\n                    get(0)._utopiasoftware_validator_index;\r\n                    $('#checkout-page').get(0).ej2_instances[tooltipIndex].close();\r\n                }\r\n\r\n                // check if the checkout order validation failed or succeeded\r\n                if(validationSuccessful === true){ // validation was successful\r\n                    resolve(); // resolve validation promise\r\n                    return;\r\n                }\r\n                else{ // validation failed\r\n                    reject(); // reject validation promise\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n};"]}