{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 18/11/2018.\r\n */\r\n\r\n/**\r\n* file defines all View-Models, Controllers and Event Listeners used by the app\r\n*\r\n* The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n* The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n* also used interchangeably\r\n*/\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n    /**\r\n     * method contains the startup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // create the ej2 toast component for the app\r\n            new ej.notifications.Toast({\r\n                content: '',\r\n                cssClass: 'default-ej2-toast',\r\n                target: document.body,\r\n                position: {X: \"Center\",  Y: \"Bottom\"},\r\n                width: \"100%\",\r\n                timeOut: 0,\r\n                extendedTimeout: 0,\r\n                showCloseButton: true\r\n            }).appendTo($('.page-toast').get(0));\r\n\r\n            if(true){ // there is a previous logged in user\r\n                // load the app main page\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n\r\n            }\r\n            else{ // there is no previously logged in user\r\n                // load the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n\r\n                // create the pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase = new PouchDB('PrintServiceEcommerce.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // create the encrypted pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase =\r\n                    new PouchDB('PrintServiceEcommerceEncrypted.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // generate a password for encrypting the app database (if it does NOT already exist)\r\n                let secureKey = null;\r\n                try {\r\n                    // get secure key, if it exists\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.getItem(\"utopiasoftware-oak-print-service-secure-key\",resolve, reject);\r\n                    });\r\n                }\r\n                catch(err){ // secure key does not exist\r\n                    // create the secure key\r\n                    secureKey = await new Promise(function(resolve, reject){\r\n                        NativeStorage.setItem(\"utopiasoftware-oak-print-service-secure-key\",\r\n                            {password: Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},\r\n                            resolve, reject);\r\n                    });\r\n                }\r\n                // enable the db encryption using the generated password\r\n                await new Promise(function(resolve, reject){\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.\r\n                    crypto(secureKey.password, {\r\n                        ignore: ['_attachments', '_deleted'],\r\n                        cb: function(err, key){\r\n                            if(err){ // there is an error\r\n                                reject(err); // reject Promise\r\n                            }\r\n                            else{ // no error\r\n                                resolve(key); // resolve Promise\r\n                            }\r\n                        }});\r\n                });\r\n\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n                // set status bar color\r\n                StatusBar.backgroundColorByHexString(\"#363E7C\");\r\n                navigator.splashscreen.hide(); // hide the splashscreen\r\n                utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fully loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Home page\r\n     */\r\n    homePageViewModel: {\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"New Products\"\r\n         */\r\n        newProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Featured Products\"\r\n         */\r\n        featuredProductsCarousel: null,\r\n\r\n        /**\r\n         * object is used as the carousel Flickity object for \"Sales Products\"\r\n         */\r\n        salesProductsCarousel: null,\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#home-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#home-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                try{\r\n                    // create the \"New Products\" carousel\r\n                    let newProductsCarousel = new Flickity($('#home-page #home-latest-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        // adaptiveHeight: true,\r\n                        imagesLoaded: true,\r\n                        cellSelector: '.col-xs-12',\r\n                        autoPlay: 5000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'left',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    newProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(newProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(newProductsCarousel._utopiasoftware_scrollTimer);\r\n                            newProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        newProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            newProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    newProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        //  $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"New Product\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel =\r\n                        newProductsCarousel;\r\n\r\n                    // create the \"Featured Products\" carousel\r\n                    let featuredProductsCarousel = new Flickity($('#home-page #home-featured-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4000,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    featuredProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(featuredProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(featuredProductsCarousel._utopiasoftware_scrollTimer);\r\n                            featuredProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        featuredProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            featuredProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    featuredProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"Featured Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel =\r\n                        featuredProductsCarousel;\r\n\r\n                    let salesProductsCarousel = new Flickity($('#home-page #home-sales-design-block .row').get(0), {\r\n                        // options\r\n                        wrapAround: true,\r\n                        groupCells: 1,\r\n                        cellSelector: '.col-xs-7',\r\n                        autoPlay: 4500,\r\n                        pauseAutoPlayOnHover: false,\r\n                        dragThreshold: 10,\r\n                        initialIndex: 0,\r\n                        cellAlign: 'center',\r\n                        contain: false,\r\n                        prevNextButtons: false,\r\n                        pageDots: false\r\n                    });\r\n                    salesProductsCarousel.on(\"scroll\", function(){\r\n                        // check if the carousel object has a timer attached\r\n                        if(salesProductsCarousel._utopiasoftware_scrollTimer){ // there is a timer\r\n                            // clear the timer\r\n                            window.clearTimeout(salesProductsCarousel._utopiasoftware_scrollTimer);\r\n                            salesProductsCarousel._utopiasoftware_scrollTimer = null;\r\n                        }\r\n\r\n                        // automatically start the the carousel autoplay\r\n                        salesProductsCarousel._utopiasoftware_scrollTimer = window.setTimeout(function(){\r\n                            salesProductsCarousel.playPlayer(); // start carousel autoplay\r\n                        }, 0);\r\n                    });\r\n                    salesProductsCarousel.on(\"staticClick\", function(event, pointer, cellElement, cellIndex){\r\n                        // check if it was a cell that was clicked\r\n                        if(! cellElement){ // it was not a slider cell that was clicked\r\n                            // clear the timer\r\n                            return;\r\n                        }\r\n                        // a cell was clicked, so load the product-details page\r\n                        $('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                    });\r\n                    // assign the \"Sales Products\" carousel to the appropriate object\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel =\r\n                        salesProductsCarousel;\r\n\r\n                    $('#loader-modal').get(0).hide(); // show loader\r\n\r\n                    // display page preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"block\");\r\n\r\n                    // start loading the page content\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n\r\n                    // hide the preloader\r\n                    $('#home-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n                catch(err){\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"OAK\");\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the carousels\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n            newProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                newProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                featuredProductsCarousel = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.\r\n                salesProductsCarousel = null;\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            ons.notification.confirm('Do you want to close the app?',\r\n                {title: '<img src=\"css/app-images/oak-design-logo.png\" style=\"height: 1.5em; width: auto; margin-right: 0.5em\">Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see live products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#home-page #home-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();\r\n                // hide the preloader\r\n                $('#home-page .page-preloader').css(\"display\", \"none\");\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#home-page #home-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load all products to the page\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(){\r\n            var productTypesPromisesArray = []; // holds the array for all the promises of the product types to be loaded\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load banner products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"private\",\r\n                            \"type\": \"external\", \"page\": 1, \"per_page\": 5}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // save the retrieved data to app database as cache\r\n                        utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                            {_id: \"banner-products\", docType: \"BANNER_PRODUCTS\", products: productsArray},\r\n                            utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"${productsArray[index].images[0].src}\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"featured\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // save the retrieved data to app database as cache\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: \"popular-products\", docType: \"POPULAR_PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 5, \"on_sale\": true}\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // save the retrieved data to app database as cache\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: \"sales-products\", docType: \"SALES_PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ? \r\n                                         productsArray[index].price : productsArray[index].regular_price)) \r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see live products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load banner products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"banner-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).\r\n                    then(function(productsArray){\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // hide the \"Products\" segment\r\n                        // remove the previously slides from the carousel\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                        newProductsCarousel.\r\n                        remove($('#home-page #home-latest-design-block .row .col-xs-12').get());\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-12\" style=\"padding-left: 0; padding-right: 0;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 40vh; max-height: 90vh\">\r\n                                        <div class=\"e-card-image\" style=\"\">\r\n                                        <img src=\"css/app-images/blank-img.png\" style=\"width: 100%; height: auto; max-height: 90vh\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            newProductsCarousel.append($(columnContent));\r\n                        }\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        $('#home-page #home-latest-design-block').css(\"opacity\", \"1\"); // show the \"Products\" segment\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load featured products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"popular-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.\r\n                            remove($('#home-page #home-featured-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-featured-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            featuredProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n\r\n                // load sales products from cached data\r\n                productTypesPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(\"sales-products\", utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        return cachedProductsData.products;\r\n                    }).then(function(productsArray){\r\n                        if(productsArray.length > 0){\r\n                            // show the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"1\", \"display\": \"block\"});\r\n                            // remove the previously slides from the carousel\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.\r\n                            remove($('#home-page #home-sales-design-block .row .col-xs-7').get());\r\n                        }\r\n                        else{\r\n                            // hide the \"Products\" segment\r\n                            $('#home-page #home-sales-design-block').css({\"opacity\": \"0\", \"display\": \"none\"});\r\n                        }\r\n\r\n                        // attach the products to the page\r\n                        for(let index = 0; index < productsArray.length; index++){\r\n                            if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                                productsArray[index].regular_price = \"0.00\";\r\n                            }\r\n                            let columnContent =\r\n                                `<div class=\"col-xs-7\" style=\"margin-left: 20.5%; margin-right: 20.5%;\">\r\n                                    <div class=\"e-card\" style=\"min-height: 34vh;\">\r\n                                        <div class=\"e-card-image\" style=\"height: 60%; \r\n                                        background-image: url('${productsArray[index].images[0].src}');\">\r\n                                        <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                                    kendo.parseFloat(productsArray[index].regular_price)) /\r\n                                    kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                        productsArray[index].price : productsArray[index].regular_price))\r\n                                    * 100)}% OFF\r\n                                                    </span>\r\n                                        </div>\r\n                                        <div class=\"e-card-header\">\r\n                                            <div class=\"e-card-header-caption\">\r\n                                                <div class=\"e-card-sub-title\" style=\"color: #000000; text-align: center; font-size: 14px; text-transform: capitalize\">\r\n                                                    ${productsArray[index].name}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center; text-decoration: line-through\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}\r\n                                                </div>\r\n                                                <div class=\"e-card-sub-title\" style=\"text-align: center;\">\r\n                                                &#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>`;\r\n                            // append the content\r\n                            utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.\r\n                            salesProductsCarousel.append($(columnContent));\r\n                        }\r\n                        resolve(); // resolve the parent promise\r\n                    }).catch(function(err){\r\n                        console.log(\"LOAD PRODUCT\", err);\r\n                        reject(); // reject the parent promise\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productTypesPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreFeaturedProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"featured\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n                    console.log(\"PRODUCTS PAGE\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the user wishes to view more featured products\r\n         * @returns {Promise<void>}\r\n         */\r\n        async showMoreSalesProducts(){\r\n            // load the products page in a separate event queue\r\n            window.setTimeout(async function(){\r\n                try{\r\n                    // navigate to the products page\r\n                    await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                    // request for products from the category that was clicked\r\n                    let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                    loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                        \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20, \"on_sale\": true});\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                }\r\n                catch(err){\r\n                    console.log(\"PRODUCTS PAGE\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally{\r\n                    // hide the preloader for the products page\r\n                    $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Categories page\r\n     */\r\n    categoriesPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 100,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#categories-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#categories-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight =\r\n                    Math.floor($('#categories-page .page__content').height());\r\n                console.log(\"CONTENT HEIGHT\", utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight);\r\n\r\n                // listen for the scroll event on the page\r\n                $('#categories-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#categories-page .page__content').scrollTop());\r\n                        console.log(\"SCROLL TOP\", scrollTop);\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                categoriesPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#categories-page #categories-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when a category card is clicked\r\n                $thisPage.on(\"click\", \".e-card\", function(clickEvent){\r\n                    // load the products page in a separate event queue\r\n                    window.setTimeout(async function(){\r\n                        try{\r\n                            // navigate to the products page\r\n                            await $('#app-main-tabbar').get(0).setActiveTab(4, {animation: 'none'});\r\n                            // request for products from the category that was clicked\r\n                            let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                            loadProducts({\"order\": \"desc\", \"orderby\": \"date\", \"status\": \"publish\",\r\n                                \"type\": \"variable\", \"stock_status\": \"instock\", \"page\": 1, \"per_page\": 20,\r\n                                \"category\": $(clickEvent.currentTarget).attr(\"data-category-id\")});\r\n                            await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n                        }\r\n                        catch(err){\r\n                            console.log(\"PRODUCTS PAGE\", err);\r\n                            // hide all previously displayed ej2 toast\r\n                            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                            // display toast to show that an error\r\n                            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                            toast.cssClass = 'error-ej2-toast';\r\n                            toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                            toast.dataBind();\r\n                            toast.show();\r\n                        }\r\n                        finally{\r\n                            // hide the preloader for the products page\r\n                            $('#products-page .page-preloader').css(\"display\", \"none\");\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                try{\r\n                    // start loading the page content\r\n                    let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();\r\n                    await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n                }\r\n                catch(err){\r\n                    console.log(\"CATEGORIES PAGE\", err);\r\n                    // hide all previously displayed ej2 toast\r\n                    $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n                    // display toast to show that an error\r\n                    let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                    toast.cssClass = 'error-ej2-toast';\r\n                    toast.content = `Sorry, an error occurred.${navigator.connection.type === Connection.NONE ? \" Connect to the Internet.\" : \"\"} Pull down to refresh and try again`;\r\n                    toast.dataBind();\r\n                    toast.show();\r\n                }\r\n                finally {\r\n                    // hide the preloader\r\n                    $('#categories-page .page-preloader').css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // update the title of the page\r\n            // hide the page scroll fab\r\n            $('#categories-page #categories-page-scroll-top-fab').css({\"display\": \"none\"});\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(0);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated categories\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#categories-page #categories-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let categoryArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                categoriesPageViewModel.loadCategories(1, utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.categoriesPageViewModel.pageSize);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(categoryArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#categories-page #categories-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products categories to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadCategories(pageToAccess = utopiasoftware[utopiasoftware_app_namespace].\r\n                                            controller.categoriesPageViewModel.currentPage + 1,\r\n                             pageSize = utopiasoftware[utopiasoftware_app_namespace].\r\n                                        controller.categoriesPageViewModel.pageSize){\r\n            var categoryPromisesArray = []; // holds the array for the promises used to load the product categories\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested categories list from the server\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products/categories\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: {\"order\": \"asc\", \"orderby\": \"name\", \"hide_empty\": true,\r\n                                \"page\": pageToAccess, \"per_page\": pageSize}\r\n                        }\r\n                    )).then(function(categoriesArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(categoriesArray.length > 0){ // there is data to cache\r\n                            // remove the 'uncategorized' category\r\n                            categoriesArray = categoriesArray.filter(function(element){\r\n                                return element.slug !== 'uncategorized';\r\n                            });\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCT_CATEGORIES\", categories: categoriesArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.categoriesPageViewModel.currentPage = pageToAccess;\r\n                        }\r\n                        resolve(categoriesArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD CATEGORY\", err);\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading product categories with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated categories\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested product categories from cached data\r\n                categoryPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"categories\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedCategoriesData){\r\n                        resolve(cachedCategoriesData.categories); // resolve the parent promise with the cached categories data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD CATEGORY\", err);\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(categoryPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products categories on the app screen\r\n         *\r\n         * @param categoriesArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(categoriesArray, appendContent = true, overwriteContent = true){\r\n            /*for(let index = 0; index < 4; index++){ // REMOVE THIS LATER JUST FOR TEST TODO\r\n                categoriesArray.push(...categoriesArray);\r\n            }*/\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let categoriesContent = \"\"; // holds the contents for the categories\r\n\r\n                // check if the categoriesArray is empty or not\r\n                if(categoriesArray.length <= 0){ // there are no new content to display\r\n                    resolve(categoriesArray.length); // resolve promise with the length of the categories array\r\n                }\r\n                else{ // there are some categories to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < categoriesArray.length; index++){\r\n                        categoriesContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            categoriesContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            categoriesContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        categoriesContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\" data-category-id=\"${categoriesArray[index].id}\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${categoriesArray[index].image.src}');\">\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${categoriesArray[index].name}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                      </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#categories-page #categories-contents-container').html(categoriesContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#categories-page #categories-contents-container').append(categoriesContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#categories-page #categories-contents-container').prepend(categoriesContent);\r\n                        }\r\n                    }\r\n\r\n                    resolve(categoriesArray.length); // resolve the promise with length of the categoriesArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#categories-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Search page\r\n     */\r\n    searchPageViewModel: {\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Search\"); // update the title of the page\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // go to the \"Categories\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Account page\r\n     */\r\n    accountPageViewModel: {\r\n\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for when the device back button is tapped\r\n                event.target.onDeviceBackButton = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    accountPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n                    let accordion = new ej.navigations.Accordion({\r\n                        expandMode: 'Single'\r\n                    });\r\n                    accordion.appendTo('#account-personal-accordion');\r\n                    accordion.expandItem(true, 0);\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Account\"); // update the title of the page\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the \"Home\" page (tab)\r\n            $('#app-main-tabbar').get(0).setActiveTab(2);\r\n        },\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Login page\r\n     */\r\n    loginPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the login page\r\n         */\r\n        loginFormValidator: null,\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the signup page\r\n         */\r\n        signupFormValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked;\r\n\r\n                // listen for when the login-carousel has changed/slide used to change screen from login to signup etc\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange);\r\n\r\n                // listen for when the login-carousel has changed/slide used to hide the tooltips for the previous displayed screen\r\n                $thisPage.on(\"postchange\", \"#login-carousel\",\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange);\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator =\r\n                    $('#login-page #login-form').parsley();\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator =\r\n                    $('#login-page #signup-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #login-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated);\r\n\r\n                // listen for signup form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.content = fieldInstance.getErrorsMessages()[0];\r\n                    tooltip.dataBind();\r\n                    tooltip.open(fieldInstance.$element.get(0));\r\n                });\r\n\r\n                // listen for sign up form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success', function(fieldInstance) {\r\n                    // hide tooltip from element\r\n                    let tooltip = $('#login-page #signup-form').get(0).\r\n                        ej2_instances[fieldInstance.$element.get(0)._utopiasoftware_validator_index];\r\n                    tooltip.close();\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated);\r\n\r\n\r\n                // listen for scroll event on the page to adjust the tooltips when page scrolls\r\n                $('#login-page .login-page-form-container',).on(\"scroll\", function(){\r\n\r\n                    // place function execution in the event queue to be executed ASAP\r\n                    window.setTimeout(function(){\r\n                        console.log(\"CAROUSEL SCROLL\");\r\n                            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                                case 0: // first carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #login-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('login-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 1: // second carousel item is active, so adjust the input elements on the login form\r\n                                    $(\"#login-page #signup-form ons-input\").each(function(index, element){\r\n                                        document.getElementById('signup-form').ej2_instances[index].refresh(element);\r\n                                    });\r\n                                    break;\r\n\r\n                                case 2:\r\n\r\n                                    break;\r\n                            }\r\n                        }, 0);\r\n                });\r\n\r\n                try{\r\n                    // create the tooltip objects for the signin form\r\n                    $('#login-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #login-form').get(0));\r\n                    });\r\n\r\n                    // create the tooltip objects for the signup form\r\n                    $('#signup-form ons-input', $thisPage).each(function(index, element){\r\n                        element._utopiasoftware_validator_index = index;\r\n                        // create the tool tips for every element being validated, but attach it to the html form object\r\n                        new ej.popups.Tooltip({\r\n                            cssClass: 'utopiasoftware-ej2-validation-tooltip',\r\n                            position: 'TopCenter',\r\n                            opensOn: 'Custom'\r\n                        }).appendTo($('#login-page #signup-form').get(0));\r\n                    });\r\n\r\n                    // create the button for showing password visibility on the signup page\r\n                    new ej.buttons.Button({\r\n                        isToggle: true,\r\n                        cssClass: 'e-flat e-small e-round',\r\n                        iconCss: \"zmdi zmdi-eye\",\r\n                        iconPosition: \"Left\"\r\n                    }).appendTo($('#signup-password-view-button', $thisPage).get(0));\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device keyboard is shown\r\n            window.addEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n\r\n            // remove listener for when the device keyboard is shown\r\n            window.removeEventListener('keyboardDidShow',\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView);\r\n\r\n            // hide the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // hide the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.close();\r\n            });\r\n\r\n            // reset all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // destroy the tooltips on the login form\r\n            $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // destroy the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy the tooltips on the signup form\r\n            $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                // hide the tooltip\r\n                tooltipArrayElem.destroy();\r\n            });\r\n\r\n            // destroy all form validator objects\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy();\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy();\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Sign In / Sign Up segment buttons are clicked\r\n         *\r\n         * @param itemIndex {Integer} zero-based index representing the carousel item to\r\n         * display ewhen the button is clicked\r\n         */\r\n        segmentButtonClicked(itemIndex){\r\n            // move to the slide item specify by the provided parameter\r\n            $('#login-page #login-carousel').get(0).setActiveIndex(itemIndex);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Password Visibility button is clicked\r\n         *\r\n         * @param buttonElement {HTMLElement} button element being clicked\r\n         *\r\n         * @param inputId {String} the id for the input whose content visibility is being changed\r\n         */\r\n        passwordVisibilityButtonClicked(buttonElement, inputId){\r\n\r\n            // check the state of the button is it 'active' or not\r\n            if(! $(buttonElement).hasClass('e-active')){ // button is not active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"text\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye-off';\r\n                ej2Button.dataBind();\r\n            }\r\n            else{ // button is active\r\n                // change the type for the input field\r\n                $(document.getElementById(inputId)).attr(\"type\", \"password\");\r\n                // change the icon on the button to indicate the change in visibility\r\n                let ej2Button = buttonElement.ej2_instances[0];\r\n                ej2Button.iconCss = 'zmdi zmdi-eye';\r\n                ej2Button.dataBind();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * displaying the various screens i.e. login or signup etc\r\n         *\r\n         * @param event\r\n         */\r\n        changeScreenCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel is being shown\r\n            switch(event.originalEvent.activeIndex){ // get the index of the active carousel item\r\n                case 0:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);\r\n\r\n                    break;\r\n\r\n                case 1:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.third .login-segment button input\").prop(\"checked\", false);\r\n                    // scroll to the top of the active carousel item\r\n                    $('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);\r\n                    break;\r\n\r\n                case 2:\r\n                    // reset the the segment button contained in the other carousel items to their initial state\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input\").prop(\"checked\", false);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input\").prop(\"checked\", true);\r\n                    $(\"#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input\").prop(\"checked\", false);\r\n                    $('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to track changes on the carousel slides for\r\n         * hiding the tooltips on the previously displayed slide\r\n         *\r\n         * @param event\r\n         */\r\n        hideTooltipsCarouselPostChange(event){\r\n\r\n            // use the switch case to determine what carousel item was PREVIOUSLY shown\r\n            switch(event.originalEvent.lastActiveIndex){ // get the index of the LAST active carousel item\r\n                case 0:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #login-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 1:\r\n\r\n                    // hide the tooltips on the login form\r\n                    $('#login-page #signup-form').get(0).ej2_instances.forEach(function(tooltipArrayElem){\r\n                        // hide the tooltip\r\n                        tooltipArrayElem.close();\r\n                    });\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n        /**\r\n         * method is triggered when the keyboard is shown.\r\n         * It is used to adjust the display height\r\n         *\r\n         * @param event\r\n         */\r\n        keyboardShownAdjustView(event){\r\n            // get the height of the keyboard and add 6000px to it\r\n            let adjustedKeyboardHeight = Math.ceil(event.keyboardHeight) + 6000;\r\n\r\n            switch ($('#login-page #login-carousel').get(0).getActiveIndex()) { // get the active carousel item\r\n                case 0:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.first .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 1:\r\n                    // add padding to the bottom, to allow elements to scroll into view\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    css({\"padding-bottom\": adjustedKeyboardHeight + \"px\"});\r\n                    // scroll to the currently focused input element\r\n                    $(\"#login-page ons-carousel-item.second .login-page-form-container\").\r\n                    scrollTop(Math.floor($(document.activeElement).closest(\"ons-input\").position().top - 30));\r\n                    break;\r\n\r\n                case 2:\r\n\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign In\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signinButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign Up\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupButtonClicked() {\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the login form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loginFormValidated(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the sign up form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signupFormValidated(){\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Products page\r\n     */\r\n    productsPageViewModel: {\r\n\r\n        /**\r\n         * property holds the current \"page\" of the categories being accessed\r\n         */\r\n        currentPage: 0,\r\n\r\n        /**\r\n         * property holds the size i.e. number of items that can be contained in currentPage being accessed\r\n         */\r\n        pageSize: 20,\r\n\r\n        /**\r\n         * property holds the height of the \"content view\" for the page\r\n         */\r\n        viewContentHeight: 0,\r\n\r\n        /**\r\n         * property holds the index position of the last active\r\n         * navigation tab before user landed on this page\r\n         */\r\n        lastActiveNavTab: 0,\r\n\r\n        /**\r\n         * property holds the current query parameter used to display the products on screen\r\n         */\r\n        currentQueryParam: {},\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.backButtonClicked;\r\n\r\n                // add method to handle page-infinite-scroll\r\n                event.target.onInfiniteScroll =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageInfinteScroll;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#products-page-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-down\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-long-arrow-up\" size=\"24px\" style=\"color: #363E7C\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            // update the displayed content\r\n                            $('#products-page-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // get the height of the view content container\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight =\r\n                    Math.floor($('#products-page .page__content').height());\r\n                console.log(\"CONTENT HEIGHT\", utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight);\r\n\r\n                // listen for the scroll event on the page\r\n                $('#products-page .page__content').on(\"scroll\", function(){\r\n                    // handle the logic in a different event queue slot\r\n                    window.setTimeout(function(){\r\n                        // get the scrollTop position of the view content\r\n                        var scrollTop = Math.floor($('#products-page .page__content').scrollTop());\r\n                        console.log(\"SCROLL TOP\", scrollTop);\r\n                        // get the percentage of scroll that has taken place from the top position\r\n                        var percentageScroll = (scrollTop /  utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            productsPageViewModel.viewContentHeight) * 100;\r\n                        if(percentageScroll >= 50){ // if the scroll position is >= halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css(\r\n                                {\"transform\": \"scale(1)\",\r\n                                    \"display\": \"inline-block\"});\r\n                        }\r\n                        else{ // if the scroll position is < halfway\r\n                            $('#products-page #products-page-scroll-top-fab').css({\"transform\": \"scale(0)\"});\r\n                        }\r\n                    }, 0);\r\n                });\r\n\r\n                // listen for when the navigation tab has changed and update the lastActiveNavTab\r\n                $('#app-main-tabbar').on(\"prechange\", function(event){\r\n                    if(event.originalEvent.index === 4){ // if the tab index is this page, don't update the lastActiveNavTab\r\n                        return; // exit the method\r\n                    }\r\n\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productsPageViewModel.lastActiveNavTab = event.originalEvent.index;\r\n                    console.log(\"TAB CHANGED\", utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        productsPageViewModel.lastActiveNavTab);\r\n                });\r\n\r\n                // listen for when a product card is clicked\r\n                $thisPage.on(\"click\", \".e-card > *:not(.e-card-actions)\", function(){\r\n                    // load the product-details page\r\n                    //$('#app-main-navigator').get(0).pushPage(\"product-details-page.html\", {animation: \"lift\"});\r\n                });\r\n\r\n                try{\r\n\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            $('#app-main-page ons-toolbar div.title-bar').html(\"Products\"); // change the title of the screen\r\n            // show the preloader\r\n            $('#products-page .page-preloader').css(\"display\", \"block\");\r\n            // empty the content of the page\r\n            $('#products-page #products-contents-container').html('');\r\n            // hide the page scroll fab\r\n            $('#products-page #products-page-scroll-top-fab').css({\"display\": \"none\"});\r\n\r\n            window.SoftInputMode.set('adjustPan');\r\n\r\n            // listen for when the device does not have Internet connection\r\n            document.addEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // listen for when the device has Internet connection\r\n            document.addEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n            // remove listener for when the device does not have Internet connection\r\n            document.removeEventListener(\"offline\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener, false);\r\n            // remove listener for when the device has Internet connection\r\n            document.removeEventListener(\"online\",\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener, false);\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n            // go to the last active page (tab)\r\n            $('#app-main-tabbar').get(0).\r\n            setActiveTab(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab);\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is offline\r\n         */\r\n        deviceOfflineListener(){\r\n            // display toast to show that there is no internet connection\r\n            let toast = $('.page-toast').get(0).ej2_instances[0];\r\n            toast.hide('All'); // hide all previously displayed ej2 toast\r\n            toast.cssClass = 'default-ej2-toast';\r\n            toast.content = \"No Internet connection. Connect to the Internet to see updated products\";\r\n            toast.dataBind();\r\n            toast.show();// show ej2 toast\r\n        },\r\n\r\n        /**\r\n         * method is triggered whenever the user's device is online\r\n         */\r\n        deviceOnlineListener(){\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#products-page #products-page-pull-hook').attr(\"disabled\", true);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the page content\r\n                let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam);\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(productArray[0]);\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // enable pull-to-refresh widget till loading is done\r\n                $('#products-page #products-page-pull-hook').removeAttr(\"disabled\");\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pageInfinteScroll(doneCallBack = function(){}){\r\n            // append an infinite load indicator to the bottom of the page\r\n            $('#products-page .page__content').\r\n            append(`<div class=\"infinite-load-container\" style=\"text-align: center\">\r\n                        <ons-progress-circular indeterminate modifier=\"pull-hook\"></ons-progress-circular>\r\n                    </div>`);\r\n            // hide all previously displayed ej2 toast\r\n            $('.page-toast').get(0).ej2_instances[0].hide('All');\r\n\r\n            try{\r\n                // start loading the NEXT page content\r\n                let productArray = await utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.productsPageViewModel.currentQueryParam,\r\n                    utopiasoftware[utopiasoftware_app_namespace].\r\n                        controller.productsPageViewModel.currentPage + 1);\r\n                // append the new content to the previous contents\r\n                await utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.\r\n                displayPageContent(productArray[0], true, false);\r\n\r\n                // check if any new products were retrieved\r\n                if(productArray.length < 0){ // no more products where retrieve\r\n                    // scroll the page to the top a little bit, to prevent page-infinite-scroll from looping indefinitely\r\n                    $('#products-page .page__content').\r\n                    scrollTop( Math.floor($('#products-page .page__content').scrollTop() - 20));\r\n                }\r\n            }\r\n            catch(err){ // an error occurred\r\n                // display toast to show that error\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.cssClass = 'error-ej2-toast';\r\n                toast.content = \"Sorry, an error occurred. Refresh to try again\";\r\n                toast.dataBind();\r\n                toast.show();\r\n            }\r\n            finally{\r\n                // remove the infinite load indicator from the bottom of the page\r\n                $('#products-page .page__content .infinite-load-container').remove();\r\n                // signal that loading is done\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to load products to the page\r\n         *\r\n         * @param pageToAccess {Integer} the page within the paginated categories to retrieve\r\n         *\r\n         * @param pageSize {Integer} the size of the page i.e. the number of category items to retrieve\r\n         *\r\n         * @param queryParam {Object} holds the objects that contains the query\r\n         * params for the type of products to retrieve\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loadProducts(queryParam, pageToAccess = queryParam.page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.currentPage + 1,\r\n                             pageSize = queryParam.per_page || utopiasoftware[utopiasoftware_app_namespace].\r\n                                 controller.productsPageViewModel.pageSize){\r\n            queryParam.page = pageToAccess;\r\n            queryParam.per_page = pageSize;\r\n\r\n            var productPromisesArray = []; // holds the array for the promises used to load the products\r\n\r\n            // check if there is internet connection or not\r\n            if(navigator.connection.type !== Connection.NONE){ // there is internet connection\r\n                // load the requested products list from the server\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    Promise.resolve($.ajax(\r\n                        {\r\n                            url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/wp-json/wc/v3/products\",\r\n                            type: \"get\",\r\n                            //contentType: \"application/x-www-form-urlencoded\",\r\n                            beforeSend: function(jqxhr) {\r\n                                jqxhr.setRequestHeader(\"Authorization\", \"Basic \" +\r\n                                    utopiasoftware[utopiasoftware_app_namespace].accessor);\r\n                            },\r\n                            dataType: \"json\",\r\n                            timeout: 240000, // wait for 4 minutes before timeout of request\r\n                            processData: true,\r\n                            data: queryParam\r\n                        }\r\n                    )).then(function(productsArray){\r\n                        // check if there is any data to cache in the app database\r\n                        if(productsArray.length > 0){ // there is data to cache\r\n                            // generate an id for the data being cached\r\n                            let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                            // save the retrieved data to app database as cached data\r\n                            utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData(\r\n                                {_id: cachedDataId, docType: \"PRODUCTS\", products: productsArray},\r\n                                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);\r\n\r\n                            // update the current page being viewed\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentPage = queryParam.page;\r\n                            // update the current query parameter for the page\r\n                            utopiasoftware[utopiasoftware_app_namespace].\r\n                                controller.productsPageViewModel.currentQueryParam = queryParam;\r\n                        }\r\n                        resolve(productsArray); // resolve the parent promise with the data gotten from the server\r\n\r\n                    }).catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD PRODUCTS\", err);\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n\r\n            } // end of loading products with Internet Connection\r\n            else{ // there is no internet connection\r\n                // display toast to show that there is no internet connection\r\n                let toast = $('.page-toast').get(0).ej2_instances[0];\r\n                toast.hide('All');\r\n                toast.cssClass = 'default-ej2-toast';\r\n                toast.content = \"No Internet connection. Pull down to refresh and see updated products\";\r\n                toast.dataBind();\r\n                toast.show();\r\n                // load the requested products from cached data\r\n                productPromisesArray.push(new Promise(function(resolve, reject){\r\n                    // generate the id for the cached data being retrieved\r\n                    let cachedDataId = (\"\" + pageToAccess).padStart(7, \"0\") + \"products\";\r\n                    Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.\r\n                    loadData(cachedDataId, utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).\r\n                    then(function(cachedProductsData){\r\n                        resolve(cachedProductsData.products); // resolve the parent promise with the cached products data\r\n                    }).\r\n                    catch(function(err){ // an error occurred\r\n                        console.log(\"LOAD PRODUCTS\", err);\r\n                        reject(err); // reject the parent promise with the error\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(productPromisesArray); // return a promise which resolves when all promises in the array resolve\r\n        },\r\n\r\n        /**\r\n         * method is used to display the retrieved products on the app screen\r\n         *\r\n         * @param productsArray\r\n         *\r\n         * @param appendContent {Boolean} if the value is true,\r\n         * add each content to the end of other items on the screen.\r\n         * Else, prepend the content to the top of other items\r\n         *\r\n         * @param overwriteContent {Boolean} should the old content be replaced or added to\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async displayPageContent(productsArray, appendContent = true, overwriteContent = true){\r\n            for(let index = 0; index < 4; index++){ // REMOVE THIS LATER JUST FOR TEST TODO\r\n                productsArray.push(...productsArray);\r\n            }\r\n            var displayCompletedPromise = new Promise(function(resolve, reject){\r\n\r\n                let productsContent = \"\"; // holds the contents for the products\r\n\r\n                // check if the productsArray is empty or not\r\n                if(productsArray.length <= 0){ // there are no new content to display\r\n                    resolve(productsArray.length); // resolve promise with the length of the products array\r\n                }\r\n                else{ // there are some products to display\r\n\r\n                    // loop through the array content and display it\r\n                    for(let index = 0; index < productsArray.length; index++){\r\n                        if(!productsArray[index].regular_price || productsArray[index].regular_price == \"\"){ // regular price was NOT set, so set it\r\n                            productsArray[index].regular_price = \"0.00\";\r\n                        }\r\n\r\n                        productsContent += `<div class=\"col-xs-4\" `;\r\n                        if((index + 1) % 3 !== 0){ // this is NOT the last column in the row\r\n                            productsContent += `style=\"border-right: 1px lightgray solid; border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        else{ // this is the last column in the row\r\n                            productsContent += `style=\"border-bottom: 1px lightgray solid\">`;\r\n                        }\r\n                        productsContent += `\r\n                        <ons-ripple background=\"rgba(63, 81, 181, 0.3)\"></ons-ripple>\r\n                        <div class=\"e-card\">\r\n                            <div class=\"e-card-image\" style=\"min-height: 100px; \r\n                            background-image: url('${productsArray[index].images[0].src}');\">\r\n                            ${productsArray[index].on_sale === true ? `\r\n                            <span class=\"e-badge e-badge-danger\" style=\"float: right; clear: both; \r\n                                                    background-color: transparent; color: #d64113;\r\n                                                    border: 1px #d64113 solid; font-size: 0.6em;\">\r\n                                                    ${Math.ceil((Math.abs(kendo.parseFloat(productsArray[index].price) -\r\n                            kendo.parseFloat(productsArray[index].regular_price)) /\r\n                            kendo.parseFloat(productsArray[index].regular_price === \"0.00\" ?\r\n                                productsArray[index].price : productsArray[index].regular_price))\r\n                            * 100)}% OFF\r\n                             </span>` : \"\"}\r\n                            </div>\r\n                            <div class=\"e-card-header\">\r\n                                <div class=\"e-card-header-caption\"  style=\"padding-left: 3px; padding-right: 5px\">\r\n                                    <div class=\"e-card-sub-title\" style=\"color: #000000; font-size: 14px; text-align: center; text-transform: capitalize\">\r\n                                        ${productsArray[index].name}\r\n                                    </div>\r\n                        <div style=\"color: gold; font-size: 0.6em !important; white-space: nowrap !important; \r\n                        text-overflow: ellipsis\">\r\n                        ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                            `<ons-icon icon=\"md-star\" fixed-width></ons-icon>`.\r\n                        repeat(Math.floor(kendo.parseFloat(productsArray[index].average_rating))):\r\n                            `<ons-icon icon=\"md-star-outline\" style=\"color: lightgray\" fixed-width></ons-icon>`.repeat(5)}\r\n                            <span style=\"display: inline-block; color: gray;\">\r\n                            ${Math.floor(kendo.parseFloat(productsArray[index].average_rating)) > 0 ? \r\n                        `(${productsArray[index].rating_count})` : \"\"}\r\n                           </span>\r\n                        </div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left;\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].price), \"n2\")}</div>\r\n                        <div class=\"e-card-sub-title\" style=\"text-align: left; text-decoration: line-through; \r\n                        ${productsArray[index].on_sale === true ? \"visibility: visible\": \"visibility: hidden\"}\">&#x20a6;${kendo.toString(kendo.parseFloat(productsArray[index].regular_price), \"n2\")}</div>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                        </div>`;\r\n\r\n                    }\r\n\r\n                    // check if the contents are to be overwritten\r\n                    if(overwriteContent === true){ // content wants to be overwritten\r\n                        $('#products-page #products-contents-container').html(productsContent);\r\n                    }\r\n                    else{ // content is NOT to be overwritten\r\n                        if(appendContent === true){ // append content\r\n                            $('#products-page #products-contents-container').append(productsContent);\r\n                        }\r\n                        else{ // prepend content\r\n                            $('#products-page #products-contents-container').prepend(productsContent);\r\n                        }\r\n                    }\r\n\r\n                    resolve(productsArray.length); // resolve the promise with length of the productsArray\r\n                }\r\n\r\n            });\r\n\r\n            return displayCompletedPromise; // return the promise object ot indicate if the display has been completed or not\r\n\r\n        },\r\n\r\n        /**\r\n         * method scrolls the page to the top\r\n         * @returns {Promise<void>}\r\n         */\r\n        async scrollPageToTop(){\r\n            window.setTimeout(function(){\r\n                $('#products-page .page__content').animate({ scrollTop: 0 }, 400);\r\n            }, 0);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Product Details page\r\n     */\r\n    productDetailsPageViewModel: {\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady() {\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if (!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false) {\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked;\r\n\r\n                try{\r\n                    let addToCartButton = new ej.buttons.Button({\r\n                        iconCss: \"zmdi zmdi-shopping-cart-add utopiasoftware-icon-zoom-one-point-two\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    addToCartButton.appendTo('#product-details-add-to-cart');\r\n\r\n                    let customiseProductButton = new ej.buttons.Button({\r\n                        iconCss: \"zmdi zmdi-brush utopiasoftware-icon-zoom-one-point-two\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    customiseProductButton.appendTo('#product-details-customise-product');\r\n\r\n                    let wishListButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-favorite-outline\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    wishListButton.appendTo('#product-details-wish-list');\r\n\r\n                    let compareButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-utopiasoftware-icon-scale-balance\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    compareButton.appendTo('#product-details-compare');\r\n\r\n                    let reviewButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-star-outline\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    reviewButton.appendTo('#product-details-review');\r\n\r\n                    let shareButton = new ej.buttons.Button({\r\n                        cssClass: 'e-outline e-small',\r\n                        iconCss: \"zmdi zmdi-share\",\r\n                        iconPosition: \"Left\"\r\n                    });\r\n                    shareButton.appendTo('#product-details-share');\r\n                }\r\n                catch(err){}\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            window.SoftInputMode.set('adjustPan');\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: async function(){\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // get back to the previous page on the app-main navigator stack\r\n            $('#app-main-navigator').get(0).popPage();\r\n        }\r\n    }\r\n};"]}